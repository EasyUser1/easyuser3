function Sys$Enum$parse(n,t){var i,r,h,f,e,o,s,u,c;if(t){if(i=this.__lowerCaseValues,!i){this.__lowerCaseValues=i={};f=this.prototype;for(e in f)i[e.toLowerCase()]=f[e]}}else i=this.prototype;if(this.__flags){for(o=(t?n.toLowerCase():n).split(","),s=0,u=o.length-1;u>=0;u--){if(c=o[u].trim(),r=i[c],typeof r!="number")throw Error.argument("value",String.format(Sys.Res.enumInvalidValue,n.split(",")[u].trim(),this.__typeName));s|=r}return s}if(h=t?n.toLowerCase():n,r=i[h.trim()],typeof r!="number")throw Error.argument("value",String.format(Sys.Res.enumInvalidValue,n,this.__typeName));return r}function Sys$Enum$toString(n){var r,t,i,u,e,o,f;if(typeof n=="undefined"||n===null)return this.__string;if(r=this.prototype,this.__flags&&n!==0){if(i=this.__sortedValues,!i){i=[];for(t in r)i[i.length]={key:t,value:r[t]};i.sort(function(n,t){return n.value-t.value});this.__sortedValues=i}for(u=[],e=n,t=i.length-1;t>=0;t--)if((o=i[t],f=o.value,f!==0)&&(f&n)===f&&(u[u.length]=o.key,e-=f,e===0))break;if(u.length&&e===0)return u.reverse().join(", ")}else for(t in r)if(r[t]===n)return t;return""}function Sys$Component$_setProperties(n,t){var u,c=Object.getType(n),e=c===Object||c===Sys.UI.DomElement,l=Sys.Component.isInstanceOfType(n)&&!n.get_isUpdating(),r,i,f,o,s;l&&n.beginUpdate();for(r in t)if(i=t[r],f=e?null:n["get_"+r],e||typeof f!="function")o=n[r],i&&typeof i=="object"&&(!e||o)?Sys$Component$_setProperties(o,i):n[r]=i;else if(s=n["set_"+r],typeof s=="function")s.apply(n,[i]);else if(i instanceof Array){u=f.apply(n);for(var h=0,a=u.length,v=i.length;h<v;h++,a++)u[a]=i[h]}else typeof i=="object"&&Object.getType(i)===Object&&(u=f.apply(n),Sys$Component$_setProperties(u,i));l&&n.endUpdate()}function Sys$Component$_setReferences(n,t){var i,r,u;for(i in t)r=n["set_"+i],u=$find(t[i]),r.apply(n,[u])}function Assima$Controls$Splitter(n){Assima$Controls$Splitter.initializeBase(this,[n]);this._moving=!1;this._mouseDownHandler=Function.createDelegate(this,this._onMouseDown);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._selectStartHandler=Function.createDelegate(this,this._onSelectStart)}function Assima$Controls$TouchPad(n){Assima$Controls$TouchPad.initializeBase(this,[n]);this._isSinglePress=!1;this._currentTouchPos={posX:0,posY:0};this._moving=!1;this._enabled=!1;this._isGestureSupported="gesturestart"in document;this._moveTolerance=!0;this._mouseDownHandler=Function.createDelegate(this,this.onMouseDown);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._mouseUpHandler=Function.createDelegate(this,this.onMouseUp);this._dblclickHandler=Function.createDelegate(this,this._onDblClick);this._gestureForwardHandler=Function.createDelegate(this,function(n){this._raiseGestureForward(n)});this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._selectStartHandler=Function.createDelegate(this,this._onSelectStart);this._singleTapHandler=Function.createDelegate(this,this._onSingleTap);this._longPressHandler=Function.createDelegate(this,this._onLongPress);this._longPressTimeout=null;this._doubleTapTimeOut=null}function Assima$Controls$ElementMoving(n){Assima$Controls$ElementMoving.initializeBase(this,[n]);this._currentTouchPos={posX:0,posY:0};this._moving=!1;this._mouseDownHandler=Function.createDelegate(this,this._onMouseDown);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._dblClickHandler=Function.createDelegate(this,this._onDblClick);this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._selectStartHandler=Function.createDelegate(this,this._onSelectStart)}var $create,$get,$find,__cultureInfo,Assima$Controls$SplitterEventArgs,Assima$Controls$TouchpadEventArgs,_createOverlay,Assima$Controls$ElementMovingEventArgs,Controller,Player,TutorialMessageInfo,ElementOpacityAnimationInfo,_waitDiv,Scorm12,Scorm2004,JSON,LZString;Function.__typeName="Function";Function.__class=!0;Function.createCallback=function(n,t){return function(){var u=arguments.length,r,i;if(u>0){for(r=[],i=0;i<u;i++)r[i]=arguments[i];return r[u]=t,n.apply(this,r)}return n.call(this,t)}};Function.createDelegate=function(n,t){return function(){return t.apply(n,arguments)}};Function.emptyFunction=Function.emptyMethod=function(){};Function._validateParams=function(n,t){var i,r,u,f;if(i=Function._validateParameterCount(n,t),i)return i.popStackFrame(),i;for(r=0;r<n.length;r++)if(u=t[Math.min(r,t.length-1)],f=u.name,u.parameterArray&&(f+="["+(r-t.length+1)+"]"),i=Function._validateParameter(n[r],u,f),i)return i.popStackFrame(),i;return null};Function._validateParameterCount=function(n,t){for(var r,u=t.length,f=0,i=0;i<t.length;i++)t[i].parameterArray?u=Number.MAX_VALUE:t[i].optional||f++;return n.length<f||n.length>u?(r=Error.parameterCount(),r.popStackFrame(),r):null};Function._validateParameter=function(n,t,i){var r,o=t.type,l=!!t.integer,a=!!t.domElement,v=!!t.mayBeNull,f,e,s,h,u,c;if(r=Function._validateParameterType(n,o,l,a,v,i),r)return r.popStackFrame(),r;if(f=t.elementType,e=!!t.elementMayBeNull,o===Array&&typeof n!="undefined"&&n!==null&&(f||!e))for(s=!!t.elementInteger,h=!!t.elementDomElement,u=0;u<n.length;u++)if(c=n[u],r=Function._validateParameterType(c,f,s,h,e,i+"["+u+"]"),r)return r.popStackFrame(),r;return null};Function._validateParameterType=function(n,t,i,r,u,f){var e,o,v,c,s,l,h,a;if(typeof n=="undefined")return u?null:(e=Error.argumentUndefined(f),e.popStackFrame(),e);if(n===null)return u?null:(e=Error.argumentNull(f),e.popStackFrame(),e);if(t&&t.__enum){if(typeof n!="number")return e=Error.argumentType(f,Object.getType(n),t),e.popStackFrame(),e;if(n%1==0)if(o=t.prototype,t.__flags&&n!==0){v=n;for(c in o)if((s=o[c],s!==0)&&((s&n)===s&&(v-=s),v===0))return null}else for(c in o)if(o[c]===n)return null;return e=Error.argumentOutOfRange(f,n,String.format(Sys.Res.enumInvalidValue,n,t.getName())),e.popStackFrame(),e}return r&&(typeof n.nodeType!="number"?(h=n.ownerDocument||n.document||n,h!=n?(a=h.defaultView||h.parentWindow,l=a!=n&&!(a.document&&n.document&&a.document===n.document)):l=typeof h.body=="undefined"):l=n.nodeType===3,l)?(e=Error.argument(f,Sys.Res.argumentDomElement),e.popStackFrame(),e):t&&!t.isInstanceOfType(n)?(e=Error.argumentType(f,Object.getType(n),t),e.popStackFrame(),e):t===Number&&i&&n%1!=0?(e=Error.argumentOutOfRange(f,n,Sys.Res.argumentInteger),e.popStackFrame(),e):null};Error.__typeName="Error";Error.__class=!0;Error.create=function(n,t){var i=new Error(n),r;if(i.message=n,t)for(r in t)i[r]=t[r];return i.popStackFrame(),i};Error.argument=function(n,t){var r="Sys.ArgumentException: "+(t?t:Sys.Res.argument),i;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),i=Error.create(r,{name:"Sys.ArgumentException",paramName:n}),i.popStackFrame(),i};Error.argumentNull=function(n,t){var r="Sys.ArgumentNullException: "+(t?t:Sys.Res.argumentNull),i;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),i=Error.create(r,{name:"Sys.ArgumentNullException",paramName:n}),i.popStackFrame(),i};Error.argumentOutOfRange=function(n,t,i){var r="Sys.ArgumentOutOfRangeException: "+(i?i:Sys.Res.argumentOutOfRange),u;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),typeof t!="undefined"&&t!==null&&(r+="\n"+String.format(Sys.Res.actualValue,t)),u=Error.create(r,{name:"Sys.ArgumentOutOfRangeException",paramName:n,actualValue:t}),u.popStackFrame(),u};Error.argumentType=function(n,t,i,r){var u="Sys.ArgumentTypeException: ",f;return u+=r?r:t&&i?String.format(Sys.Res.argumentTypeWithTypes,t.getName(),i.getName()):Sys.Res.argumentType,n&&(u+="\n"+String.format(Sys.Res.paramName,n)),f=Error.create(u,{name:"Sys.ArgumentTypeException",paramName:n,actualType:t,expectedType:i}),f.popStackFrame(),f};Error.argumentUndefined=function(n,t){var r="Sys.ArgumentUndefinedException: "+(t?t:Sys.Res.argumentUndefined),i;return n&&(r+="\n"+String.format(Sys.Res.paramName,n)),i=Error.create(r,{name:"Sys.ArgumentUndefinedException",paramName:n}),i.popStackFrame(),i};Error.format=function(n){var i="Sys.FormatException: "+(n?n:Sys.Res.format),t=Error.create(i,{name:"Sys.FormatException"});return t.popStackFrame(),t};Error.invalidOperation=function(n){var i="Sys.InvalidOperationException: "+(n?n:Sys.Res.invalidOperation),t=Error.create(i,{name:"Sys.InvalidOperationException"});return t.popStackFrame(),t};Error.notImplemented=function(n){var i="Sys.NotImplementedException: "+(n?n:Sys.Res.notImplemented),t=Error.create(i,{name:"Sys.NotImplementedException"});return t.popStackFrame(),t};Error.parameterCount=function(n){var i="Sys.ParameterCountException: "+(n?n:Sys.Res.parameterCount),t=Error.create(i,{name:"Sys.ParameterCountException"});return t.popStackFrame(),t};Error.prototype.popStackFrame=function(){var r,t;if(typeof this.stack!="undefined"&&this.stack!==null&&typeof this.fileName!="undefined"&&this.fileName!==null&&typeof this.lineNumber!="undefined"&&this.lineNumber!==null){for(var n=this.stack.split("\n"),i=n[0],u=this.fileName+":"+this.lineNumber;typeof i!="undefined"&&i!==null&&i.indexOf(u)===-1;)n.shift(),i=n[0];(r=n[1],typeof r!="undefined"&&r!==null)&&(t=r.match(/@(.*):(\d+)$/),typeof t!="undefined"&&t!==null)&&(this.fileName=t[1],this.lineNumber=parseInt(t[2]),n.shift(),this.stack=n.join("\n"))}};Object.__typeName="Object";Object.__class=!0;Object.getType=function(n){var t=n.constructor;return!t||typeof t!="function"||!t.__typeName||t.__typeName==="Object"?Object:t};Object.getTypeName=function(n){return Object.getType(n).getName()};String.__typeName="String";String.__class=!0;String.prototype.endsWith=function(n){return this.substr(this.length-n.length)===n};String.prototype.startsWith=function(n){return this.substr(0,n.length)===n};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.trimEnd=function(){return this.replace(/\s+$/,"")};String.prototype.trimStart=function(){return this.replace(/^\s+/,"")};String.format=function(){return String._toFormattedString(!1,arguments)};String.localeFormat=function(){return String._toFormattedString(!0,arguments)};String._toFormattedString=function(n,t){for(var o,u,e="",f=t[0],i=0;;){if(o=f.indexOf("{",i),u=f.indexOf("}",i),o<0&&u<0){e+=f.slice(i);break}if(u>0&&(u<o||o<0)){e+=f.slice(i,u+1);i=u+2;continue}if(e+=f.slice(i,o),i=o+1,f.charAt(i)==="{"){e+="{";i++;continue}if(u<0)break;var s=f.substring(i,u),h=s.indexOf(":"),l=parseInt(h<0?s:s.substring(0,h),10)+1,c=h<0?"":s.substring(h+1),r=t[l];(typeof r=="undefined"||r===null)&&(r="");e+=r.toFormattedString?r.toFormattedString(c):n&&r.localeFormat?r.localeFormat(c):r.format?r.format(c):r.toString();i=u+1}return e};Boolean.__typeName="Boolean";Boolean.__class=!0;Boolean.parse=function(n){var t=n.trim().toLowerCase();return t==="false"?!1:t==="true"?!0:void 0};Date.__typeName="Date";Date.__class=!0;Date._appendPreOrPostMatch=function(n,t){for(var u,f=0,i=!1,r=0,e=n.length;r<e;r++){u=n.charAt(r);switch(u){case"'":i?t.append("'"):f++;i=!1;break;case"\\":i&&t.append("\\");i=!i;break;default:t.append(u);i=!1}}return f};Date._expandFormat=function(n,t){if(t||(t="F"),t.length===1)switch(t){case"d":return n.ShortDatePattern;case"D":return n.LongDatePattern;case"t":return n.ShortTimePattern;case"T":return n.LongTimePattern;case"F":return n.FullDateTimePattern;case"M":case"m":return n.MonthDayPattern;case"s":return n.SortableDateTimePattern;case"Y":case"y":return n.YearMonthPattern;default:throw Error.format(Sys.Res.formatInvalidString);}return t};Date._expandYear=function(n,t){if(t<100){var i=(new Date).getFullYear();if(t+=i-i%100,t>n.Calendar.TwoDigitYearMax)return t-100}return t};Date._getParseRegExp=function(n,t){var r,c,l,e;if(n._parseRegExp){if(n._parseRegExp[t])return n._parseRegExp[t]}else n._parseRegExp={};r=Date._expandFormat(n,t);r=r.replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1");for(var i=new Sys.StringBuilder("^"),o=[],f=0,s=0,h=Date._getTokenRegExp(),u;(u=h.exec(r))!==null;){if(c=r.slice(f,u.index),f=h.lastIndex,s+=Date._appendPreOrPostMatch(c,i),s%2==1){i.append(u[0]);continue}switch(u[0]){case"dddd":case"ddd":case"MMMM":case"MMM":i.append("(\\D+)");break;case"tt":case"t":i.append("(\\D*)");break;case"yyyy":i.append("(\\d{4})");break;case"fff":i.append("(\\d{3})");break;case"ff":i.append("(\\d{2})");break;case"f":i.append("(\\d)");break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":i.append("(\\d\\d?)");break;case"zzz":i.append("([+-]?\\d\\d?:\\d{2})");break;case"zz":case"z":i.append("([+-]?\\d\\d?)")}Array.add(o,u[0])}return Date._appendPreOrPostMatch(r.slice(f),i),i.append("$"),l=i.toString().replace(/\s+/g,"\\s+"),e={regExp:l,groups:o},n._parseRegExp[t]=e,e};Date._getTokenRegExp=function(){return/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g};Date.parseLocale=function(n){return Date._parse(n,Sys.CultureInfo.CurrentCulture,arguments)};Date.parseInvariant=function(n){return Date._parse(n,Sys.CultureInfo.InvariantCulture,arguments)};Date._parse=function(n,t,i){for(var e,o,u,s=!1,r=1,f=i.length;r<f;r++)if(e=i[r],e&&(s=!0,u=Date._parseExact(n,e,t),u))return u;if(!s)for(o=t._getDateTimeFormats(),r=0,f=o.length;r<f;r++)if(u=Date._parseExact(n,o[r],t),u)return u;return null};Date._parseExact=function(n,t,i){var a,ut,r,f,g,k,v,c,u,nt;n=n.trim();var y=i.dateTimeFormat,tt=Date._getParseRegExp(y,t),it=new RegExp(tt.regExp).exec(n);if(it===null)return null;var rt=tt.groups,s=null,f=null,l=null,h=null,e=0,p=0,w=0,o=0,b=null,d=!1;for(a=0,ut=rt.length;a<ut;a++)if(r=it[a+1],r)switch(rt[a]){case"dd":case"d":if(l=parseInt(r,10),l<1||l>31)return null;break;case"MMMM":if(f=i._getMonthIndex(r),f<0||f>11)return null;break;case"MMM":if(f=i._getAbbrMonthIndex(r),f<0||f>11)return null;break;case"M":case"MM":if(f=parseInt(r,10)-1,f<0||f>11)return null;break;case"y":case"yy":if(s=Date._expandYear(y,parseInt(r,10)),s<0||s>9999)return null;break;case"yyyy":if(s=parseInt(r,10),s<0||s>9999)return null;break;case"h":case"hh":if(e=parseInt(r,10),e===12&&(e=0),e<0||e>11)return null;break;case"H":case"HH":if(e=parseInt(r,10),e<0||e>23)return null;break;case"m":case"mm":if(p=parseInt(r,10),p<0||p>59)return null;break;case"s":case"ss":if(w=parseInt(r,10),w<0||w>59)return null;break;case"tt":case"t":if(g=r.toUpperCase(),d=g===y.PMDesignator.toUpperCase(),!d&&g!==y.AMDesignator.toUpperCase())return null;break;case"f":if(o=parseInt(r,10)*100,o<0||o>999)return null;break;case"ff":if(o=parseInt(r,10)*10,o<0||o>999)return null;break;case"fff":if(o=parseInt(r,10),o<0||o>999)return null;break;case"dddd":if(h=i._getDayIndex(r),h<0||h>6)return null;break;case"ddd":if(h=i._getAbbrDayIndex(r),h<0||h>6)return null;break;case"zzz":if((k=r.split(/:/),k.length!==2)||(c=parseInt(k[0],10),c<-12||c>13)||(v=parseInt(k[1],10),v<0||v>59))return null;b=c*60+(r.startsWith("-")?-v:v);break;case"z":case"zz":if(c=parseInt(r,10),c<-12||c>13)return null;b=c*60}return(u=new Date,s===null&&(s=u.getFullYear()),f===null&&(f=u.getMonth()),l===null&&(l=u.getDate()),u.setFullYear(s,f,l),u.getDate()!==l)?null:h!==null&&u.getDay()!==h?null:(d&&e<12&&(e+=12),u.setHours(e,p,w,o),b!==null&&(nt=u.getMinutes()-(b+u.getTimezoneOffset()),u.setHours(u.getHours()+parseInt(nt/60,10),nt%60)),u)};Date.prototype.format=function(n){return this._toFormattedString(n,Sys.CultureInfo.InvariantCulture)};Date.prototype.localeFormat=function(n){return this._toFormattedString(n,Sys.CultureInfo.CurrentCulture)};Date.prototype._toFormattedString=function(n,t){function f(n){return n<10?"0"+n:n.toString()}function o(n){return n<10?"00"+n:n<100?"0"+n:n.toString()}var u,i,r,s,h;if(!n||n.length===0||n==="i")return t&&t.name.length>0?this.toLocaleString():this.toString();for(u=t.dateTimeFormat,n=Date._expandFormat(u,n),i=new Sys.StringBuilder,s=0,h=Date._getTokenRegExp();;){var c=h.lastIndex,e=h.exec(n),l=n.slice(c,e?e.index:n.length);if(s+=Date._appendPreOrPostMatch(l,i),!e)break;if(s%2==1){i.append(e[0]);continue}switch(e[0]){case"dddd":i.append(u.DayNames[this.getDay()]);break;case"ddd":i.append(u.AbbreviatedDayNames[this.getDay()]);break;case"dd":i.append(f(this.getDate()));break;case"d":i.append(this.getDate());break;case"MMMM":i.append(u.MonthNames[this.getMonth()]);break;case"MMM":i.append(u.AbbreviatedMonthNames[this.getMonth()]);break;case"MM":i.append(f(this.getMonth()+1));break;case"M":i.append(this.getMonth()+1);break;case"yyyy":i.append(this.getFullYear());break;case"yy":i.append(f(this.getFullYear()%100));break;case"y":i.append(this.getFullYear()%100);break;case"hh":r=this.getHours()%12;r===0&&(r=12);i.append(f(r));break;case"h":r=this.getHours()%12;r===0&&(r=12);i.append(r);break;case"HH":i.append(f(this.getHours()));break;case"H":i.append(this.getHours());break;case"mm":i.append(f(this.getMinutes()));break;case"m":i.append(this.getMinutes());break;case"ss":i.append(f(this.getSeconds()));break;case"s":i.append(this.getSeconds());break;case"tt":i.append(this.getHours()<12?u.AMDesignator:u.PMDesignator);break;case"t":i.append((this.getHours()<12?u.AMDesignator:u.PMDesignator).charAt(0));break;case"f":i.append(o(this.getMilliseconds()).charAt(0));break;case"ff":i.append(o(this.getMilliseconds()).substr(0,2));break;case"fff":i.append(o(this.getMilliseconds()));break;case"z":r=this.getTimezoneOffset()/60;i.append((r<=0?"+":"-")+Math.floor(Math.abs(r)));break;case"zz":r=this.getTimezoneOffset()/60;i.append((r<=0?"+":"-")+f(Math.floor(Math.abs(r))));break;case"zzz":r=this.getTimezoneOffset()/60;i.append((r<=0?"+":"-")+f(Math.floor(Math.abs(r)))+u.TimeSeparator+f(Math.abs(this.getTimezoneOffset()%60)))}}return i.toString()};Number.__typeName="Number";Number.__class=!0;Number.parseLocale=function(n){return Number._parse(n,Sys.CultureInfo.CurrentCulture)};Number.parseInvariant=function(n){return Number._parse(n,Sys.CultureInfo.InvariantCulture)};Number._parse=function(n,t){var l,u,f,s,a,v,h,c;if(n=n.trim(),n.match(/^[+-]?infinity$/i))return parseFloat(n);if(n.match(/^0x[a-f0-9]+$/i))return parseInt(n);var i=t.numberFormat,e=Number._parseNumberNegativePattern(n,i,i.NumberNegativePattern),o=e[0],r=e[1];return(o===""&&i.NumberNegativePattern!==1&&(e=Number._parseNumberNegativePattern(n,i,1),o=e[0],r=e[1]),o===""&&(o="+"),f=r.indexOf("e"),f<0&&(f=r.indexOf("E")),f<0?(u=r,l=null):(u=r.substr(0,f),l=r.substr(f+1)),v=u.indexOf(i.NumberDecimalSeparator),v<0?(s=u,a=null):(s=u.substr(0,v),a=u.substr(v+i.NumberDecimalSeparator.length)),s=s.split(i.NumberGroupSeparator).join(""),h=o+s,a!==null&&(h+="."+a),l!==null&&(c=Number._parseNumberNegativePattern(l,i,1),c[0]===""&&(c[0]="+"),h+="e"+c[0]+c[1]),h.match(/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/))?parseFloat(h):Number.NaN};Number._parseNumberNegativePattern=function(n,t,i){var r=t.NegativeSign,u=t.PositiveSign;switch(i){case 4:r=" "+r;u=" "+u;case 3:if(n.endsWith(r))return["-",n.substr(0,n.length-r.length)];if(n.endsWith(u))return["+",n.substr(0,n.length-u.length)];break;case 2:r+=" ";u+=" ";case 1:if(n.startsWith(r))return["-",n.substr(r.length)];if(n.startsWith(u))return["+",n.substr(u.length)];break;case 0:if(n.startsWith("(")&&n.endsWith(")"))return["-",n.substr(1,n.length-2)]}return["",n]};Number.prototype.format=function(n){return this._toFormattedString(n,Sys.CultureInfo.InvariantCulture)};Number.prototype.localeFormat=function(n){return this._toFormattedString(n,Sys.CultureInfo.CurrentCulture)};Number.prototype._toFormattedString=function(n,t){function h(n,t,i,r,u){var h=i[0],a=1,o=n.toString(),f="",p="",v=o.split("."),c,l,y,e,s;if(v.length>1&&(o=v[0],f=v[1],c=f.split(/e/i),c.length>1&&(f=c[0],p="e"+c[1])),t>0){if(l=f.length-t,l>0)f=f.slice(0,t);else if(l<0)for(y=0;y<Math.abs(l);y++)f+="0";f=u+f}else f="";for(f+=p,e=o.length-1,s="";e>=0;){if(h===0||h>e)return s.length>0?o.slice(0,e+1)+r+s+f:o.slice(0,e+1)+f;s=s.length>0?o.slice(e-h+1,e+1)+r+s:o.slice(e-h+1,e+1);e-=h;a<i.length&&(h=i[a],a++)}return o.slice(0,e+1)+r+s+f}var i,u,r,f,o,c,l,a,e,v,s;if(!n||n.length===0||n==="i")return t&&t.name.length>0?this.toLocaleString():this.toString();i=t.numberFormat;u=Math.abs(this);n||(n="D");r=-1;n.length>1&&(r=parseInt(n.slice(1),10));switch(n.charAt(0)){case"d":case"D":if(f="n",r!==-1){if(o=""+u,c=r-o.length,c>0)for(l=0;l<c;l++)o="0"+o;u=o}this<0&&(u=-u);break;case"c":case"C":f=this<0?["($n)","-$n","$-n","$n-","(n$)","-n$","n-$","n$-","-n $","-$ n","n $-","$ n-","$ -n","n- $","($ n)","(n $)"][i.CurrencyNegativePattern]:["$n","n$","$ n","n $"][i.CurrencyPositivePattern];r===-1&&(r=i.CurrencyDecimalDigits);u=h(Math.abs(this),r,i.CurrencyGroupSizes,i.CurrencyGroupSeparator,i.CurrencyDecimalSeparator);break;case"n":case"N":f=this<0?["(n)","-n","- n","n-","n -"][i.NumberNegativePattern]:"n";r===-1&&(r=i.NumberDecimalDigits);u=h(Math.abs(this),r,i.NumberGroupSizes,i.NumberGroupSeparator,i.NumberDecimalSeparator);break;case"p":case"P":f=this<0?["-n %","-n%","-%n"][i.PercentNegativePattern]:["n %","n%","%n"][i.PercentPositivePattern];r===-1&&(r=i.PercentDecimalDigits);u=h(Math.abs(this),r,i.PercentGroupSizes,i.PercentGroupSeparator,i.PercentDecimalSeparator);break;default:throw Error.format(Sys.Res.formatBadFormatSpecifier);}for(a=/n|\$|-|%/g,e="";;){if(v=a.lastIndex,s=a.exec(f),e+=f.slice(v,s?s.index:f.length),!s)break;switch(s[0]){case"n":e+=u;break;case"$":e+=i.CurrencySymbol;break;case"-":e+=i.NegativeSign;break;case"%":e+=i.PercentSymbol}}return e};RegExp.__typeName="RegExp";RegExp.__class=!0;Array.__typeName="Array";Array.__class=!0;Array.add=Array.enqueue=function(n,t){n[n.length]=t};Array.addRange=function(n,t){n.push.apply(n,t)};Array.clear=function(n){n.length=0};Array.clone=function(n){return n.length===1?[n[0]]:Array.apply(null,n)};Array.contains=function(n,t){return Array.indexOf(n,t)>=0};Array.dequeue=function(n){return n.shift()};Array.forEach=function(n,t,i){for(var u,r=0,f=n.length;r<f;r++)u=n[r],typeof u!="undefined"&&t.call(i,u,r,n)};Array.indexOf=function(n,t,i){var u,r;if(typeof t=="undefined")return-1;if(u=n.length,u!==0)for(i=+i,isNaN(i)?i=0:(isFinite(i)&&(i=i-i%1),i<0&&(i=Math.max(0,u+i))),r=i;r<u;r++)if(typeof n[r]!="undefined"&&n[r]===t)return r;return-1};Array.insert=function(n,t,i){n.splice(t,0,i)};Array.parse=function(n){return n?eval(n):[]};Array.remove=function(n,t){var i=Array.indexOf(n,t);return i>=0&&n.splice(i,1),i>=0};Array.removeAt=function(n,t){n.splice(t,1)};window||(this.window=this);window.Type=Function;Type.prototype.callBaseMethod=function(n,t,i){var r=this.getBaseMethod(n,t);return i?r.apply(n,i):r.apply(n)};Type.prototype.getBaseMethod=function(n,t){var r=this.getBaseType(),i;return r?(i=r.prototype[t],i instanceof Function?i:null):null};Type.prototype.getBaseType=function(){return typeof this.__baseType=="undefined"?null:this.__baseType};Type.prototype.getInterfaces=function(){for(var n=[],t=this,i,r,f,u;t;){if(i=t.__interfaces,i)for(r=0,f=i.length;r<f;r++)u=i[r],Array.contains(n,u)||(n[n.length]=u);t=t.__baseType}return n};Type.prototype.getName=function(){return typeof this.__typeName=="undefined"?"":this.__typeName};Type.prototype.implementsInterface=function(n){var r,t,u,i,f;if(this.resolveInheritance(),r=n.getName(),t=this.__interfaceCache,t){if(u=t[r],typeof u!="undefined")return u}else t=this.__interfaceCache={};for(i=this;i;){if(f=i.__interfaces,f&&Array.indexOf(f,n)!==-1)return t[r]=!0;i=i.__baseType}return t[r]=!1};Type.prototype.inheritsFrom=function(n){this.resolveInheritance();for(var t=this.__baseType;t;){if(t===n)return!0;t=t.__baseType}return!1};Type.prototype.initializeBase=function(n,t){return this.resolveInheritance(),this.__baseType&&(t?this.__baseType.apply(n,t):this.__baseType.apply(n)),n};Type.prototype.isImplementedBy=function(n){if(typeof n=="undefined"||n===null)return!1;var t=Object.getType(n);return!!(t.implementsInterface&&t.implementsInterface(this))};Type.prototype.isInstanceOfType=function(n){if(typeof n=="undefined"||n===null)return!1;if(n instanceof this)return!0;var t=Object.getType(n);return!!(t===this)||t.inheritsFrom&&t.inheritsFrom(this)||t.implementsInterface&&t.implementsInterface(this)};Type.prototype.registerClass=function(n,t,i){var r,u,f;if(this.prototype.constructor=this,this.__typeName=n,this.__class=!0,t&&(this.__baseType=t,this.__basePrototypePending=!0),Sys.__upperCaseTypes[n.toUpperCase()]=this,i)for(this.__interfaces=[],r=2,u=arguments.length;r<u;r++)f=arguments[r],this.__interfaces.push(f);return this};Type.prototype.registerInterface=function(n){return Sys.__upperCaseTypes[n.toUpperCase()]=this,this.prototype.constructor=this,this.__typeName=n,this.__interface=!0,this};Type.prototype.resolveInheritance=function(){var n,t,i;if(this.__basePrototypePending){n=this.__baseType;n.resolveInheritance();for(t in n.prototype)i=n.prototype[t],this.prototype[t]||(this.prototype[t]=i);delete this.__basePrototypePending}};Type.getRootNamespaces=function(){return Array.clone(Sys.__rootNamespaces)};Type.isClass=function(n){return typeof n=="undefined"||n===null?!1:!!n.__class};Type.isInterface=function(n){return typeof n=="undefined"||n===null?!1:!!n.__interface};Type.isNamespace=function(n){return typeof n=="undefined"||n===null?!1:!!n.__namespace};Type.parse=function(n,t){var i;return t?(i=Sys.__upperCaseTypes[t.getName().toUpperCase()+"."+n.toUpperCase()],i||null):n?(Type.__htClasses||(Type.__htClasses={}),i=Type.__htClasses[n],i||(i=eval(n),Type.__htClasses[n]=i),i):null};Type.registerNamespace=function(n){for(var f,t,r=window,u=n.split("."),i=0;i<u.length;i++)f=u[i],t=r[f],t||(t=r[f]={__namespace:!0,__typeName:u.slice(0,i+1).join(".")},i===0&&(Sys.__rootNamespaces[Sys.__rootNamespaces.length]=t),t.getName=function(){return this.__typeName}),r=t};window.Sys={__namespace:!0,__typeName:"Sys",getName:function(){return"Sys"},__upperCaseTypes:{}};Sys.__rootNamespaces=[Sys];Sys.IDisposable=function(){};Sys.IDisposable.prototype={};Sys.IDisposable.registerInterface("Sys.IDisposable");Sys.StringBuilder=function(n){this._parts=typeof n!="undefined"&&n!==null&&n!==""?[n.toString()]:[];this._value={};this._len=0};Sys.StringBuilder.prototype={append:function(n){this._parts[this._parts.length]=n},appendLine:function(n){this._parts[this._parts.length]=typeof n=="undefined"||n===null||n===""?"\r\n":n+"\r\n"},clear:function(){this._parts=[];this._value={};this._len=0},isEmpty:function(){return this._parts.length===0?!0:this.toString()===""},toString:function(n){var t,r,i;if(n=n||"",t=this._parts,this._len!==t.length&&(this._value={},this._len=t.length),r=this._value,typeof r[n]=="undefined"){if(n!=="")for(i=0;i<t.length;)typeof t[i]=="undefined"||t[i]===""||t[i]===null?t.splice(i,1):i++;r[n]=this._parts.join(n)}return r[n]}};Sys.StringBuilder.registerClass("Sys.StringBuilder");window.XMLHttpRequest||(window.XMLHttpRequest=function(){for(var t=["Mxsml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],n=0,i=t.length;n<i;n++)try{return new ActiveXObject(t[n])}catch(r){}return null});Sys.Browser={};Sys.Browser.InternetExplorer={};Sys.Browser.Firefox={};Sys.Browser.Safari={};Sys.Browser.Opera={};Sys.Browser.agent=null;Sys.Browser.hasDebuggerStatement=!1;Sys.Browser.name=navigator.appName;Sys.Browser.version=parseFloat(navigator.appVersion);navigator.userAgent.indexOf(" MSIE ")>-1?(Sys.Browser.agent=Sys.Browser.InternetExplorer,Sys.Browser.version=parseFloat(navigator.userAgent.match(/MSIE (\d+\.\d+)/)[1]),Sys.Browser.hasDebuggerStatement=!0):navigator.userAgent.indexOf(" Firefox/")>-1?(Sys.Browser.agent=Sys.Browser.Firefox,Sys.Browser.version=parseFloat(navigator.userAgent.match(/Firefox\/(\d+\.\d+)/)[1]),Sys.Browser.name="Firefox",Sys.Browser.hasDebuggerStatement=!0):navigator.userAgent.indexOf(" Safari/")>-1?(Sys.Browser.agent=Sys.Browser.Safari,Sys.Browser.version=parseFloat(navigator.userAgent.match(/Safari\/(\d+(\.\d+)?)/)[1]),Sys.Browser.name="Safari"):navigator.userAgent.indexOf("Opera/")>-1&&(Sys.Browser.agent=Sys.Browser.Opera);Type.registerNamespace("Sys.UI");Sys._Debug=function(){};Sys._Debug.prototype={_appendConsole:function(n){typeof Debug!="undefined"&&Debug.writeln&&Debug.writeln(n);window.console&&window.console.log&&window.console.log(n);window.opera&&window.opera.postError(n);window.debugService&&window.debugService.trace(n)},_appendTrace:function(n){var t=document.getElementById("TraceConsole");t&&t.tagName.toUpperCase()==="TEXTAREA"&&(t.value+=n+"\n")},assert:function(n,t,i){n||(t=i&&this.assert.caller?String.format(Sys.Res.assertFailedCaller,t,this.assert.caller):String.format(Sys.Res.assertFailed,t),confirm(String.format(Sys.Res.breakIntoDebugger,t))&&this.fail(t))},clearTrace:function(){var n=document.getElementById("TraceConsole");n&&n.tagName.toUpperCase()==="TEXTAREA"&&(n.value="")},fail:function(n){this._appendConsole(n);Sys.Browser.hasDebuggerStatement&&eval("debugger")},trace:function(n){this._appendConsole(n);this._appendTrace(n)},traceDump:function(n,t){var i=this._traceDump(n,t,!0)},_traceDump:function(n,t,i,r,u){var e,o,f,c,s,h;if(t=t?t:"traceDump",r=r?r:"",n===null){this.trace(r+t+": null");return}switch(typeof n){case"undefined":this.trace(r+t+": Undefined");break;case"number":case"string":case"boolean":this.trace(r+t+": "+n);break;default:if(Date.isInstanceOfType(n)||RegExp.isInstanceOfType(n)){this.trace(r+t+": "+n.toString());break}if(u){if(Array.contains(u,n)){this.trace(r+t+": ...");return}}else u=[];if(Array.add(u,n),n==window||n===document||window.HTMLElement&&n instanceof HTMLElement||typeof n.nodeName=="string")e=n.tagName?n.tagName:"DomElement",n.id&&(e+=" - "+n.id),this.trace(r+t+" {"+e+"}");else if(o=Object.getTypeName(n),this.trace(r+t+(typeof o=="string"?" {"+o+"}":"")),r===""||i)if(r+="    ",Array.isInstanceOfType(n))for(c=n.length,f=0;f<c;f++)this._traceDump(n[f],"["+f+"]",i,r,u);else for(s in n)h=n[s],Function.isInstanceOfType(h)||this._traceDump(h,s,i,r,u);Array.remove(u,n)}}};Sys._Debug.registerClass("Sys._Debug");Sys.Debug=new Sys._Debug;Sys.Debug.isDebug=!1;Type.prototype.registerEnum=function(n,t){Sys.__upperCaseTypes[n.toUpperCase()]=this;for(var i in this.prototype)this[i]=this.prototype[i];this.__typeName=n;this.parse=Sys$Enum$parse;this.__string=this.toString();this.toString=Sys$Enum$toString;this.__flags=t;this.__enum=!0};Type.isEnum=function(n){return typeof n=="undefined"||n===null?!1:!!n.__enum};Type.isFlags=function(n){return typeof n=="undefined"||n===null?!1:!!n.__flags};Sys.EventHandlerList=function(){this._list={}};Sys.EventHandlerList.prototype={addHandler:function(n,t){Array.add(this._getEvent(n,!0),t)},removeHandler:function(n,t){var i=this._getEvent(n);i&&Array.remove(i,t)},getHandler:function(n){var t=this._getEvent(n);return!t||t.length===0?null:(t=Array.clone(t),function(n,i){for(var r=0,u=t.length;r<u;r++)t[r](n,i)})},_getEvent:function(n,t){if(!this._list[n]){if(!t)return null;this._list[n]=[]}return this._list[n]}};Sys.EventHandlerList.registerClass("Sys.EventHandlerList");Sys.EventArgs=function(){};Sys.EventArgs.registerClass("Sys.EventArgs");Sys.EventArgs.Empty=new Sys.EventArgs;Sys.CancelEventArgs=function(){Sys.CancelEventArgs.initializeBase(this);this._cancel=!1};Sys.CancelEventArgs.prototype={get_cancel:function(){return this._cancel},set_cancel:function(n){this._cancel=n}};Sys.CancelEventArgs.registerClass("Sys.CancelEventArgs",Sys.EventArgs);Sys.INotifyPropertyChange=function(){};Sys.INotifyPropertyChange.prototype={};Sys.INotifyPropertyChange.registerInterface("Sys.INotifyPropertyChange");Sys.PropertyChangedEventArgs=function(n){Sys.PropertyChangedEventArgs.initializeBase(this);this._propertyName=n};Sys.PropertyChangedEventArgs.prototype={get_propertyName:function(){return this._propertyName}};Sys.PropertyChangedEventArgs.registerClass("Sys.PropertyChangedEventArgs",Sys.EventArgs);Sys.INotifyDisposing=function(){};Sys.INotifyDisposing.prototype={};Sys.INotifyDisposing.registerInterface("Sys.INotifyDisposing");Sys.Component=function(){Sys.Application&&Sys.Application.registerDisposableObject(this)};Sys.Component.prototype={_id:null,_initialized:!1,_updating:!1,get_events:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},get_id:function(){return this._id},set_id:function(n){this._id=n},get_isInitialized:function(){return this._initialized},get_isUpdating:function(){return this._updating},add_disposing:function(n){this.get_events().addHandler("disposing",n)},remove_disposing:function(n){this.get_events().removeHandler("disposing",n)},add_propertyChanged:function(n){this.get_events().addHandler("propertyChanged",n)},remove_propertyChanged:function(n){this.get_events().removeHandler("propertyChanged",n)},beginUpdate:function(){this._updating=!0},dispose:function(){if(this._events){var n=this._events.getHandler("disposing");n&&n(this,Sys.EventArgs.Empty)}delete this._events;Sys.Application.unregisterDisposableObject(this);Sys.Application.removeComponent(this)},endUpdate:function(){this._updating=!1;this._initialized||this.initialize();this.updated()},initialize:function(){this._initialized=!0},raisePropertyChanged:function(n){if(this._events){var t=this._events.getHandler("propertyChanged");t&&t(this,new Sys.PropertyChangedEventArgs(n))}},updated:function(){}};Sys.Component.registerClass("Sys.Component",null,Sys.IDisposable,Sys.INotifyPropertyChange,Sys.INotifyDisposing);$create=Sys.Component.create=function(n,t,i,r,u){var f=u?new n(u):new n,e=Sys.Application,s=e.get_isCreatingComponents(),o;if(f.beginUpdate(),t&&Sys$Component$_setProperties(f,t),i)for(o in i)f["add_"+o](i[o]);return f.get_id()&&e.addComponent(f),s?(e._createdComponents[e._createdComponents.length]=f,r?e._addComponentToSecondPass(f,r):f.endUpdate()):(r&&Sys$Component$_setReferences(f,r),f.endUpdate()),f};Sys.UI.MouseButton=function(){throw Error.notImplemented();};Sys.UI.MouseButton.prototype={leftButton:0,middleButton:1,rightButton:2};Sys.UI.MouseButton.registerEnum("Sys.UI.MouseButton");Sys.UI.Key=function(){throw Error.notImplemented();};Sys.UI.Key.prototype={backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:127};Sys.UI.Key.registerEnum("Sys.UI.Key");Sys.UI.Point=function(n,t){this.x=n;this.y=t};Sys.UI.Point.registerClass("Sys.UI.Point");Sys.UI.Bounds=function(n,t,i,r){this.x=n;this.y=t;this.height=r;this.width=i};Sys.UI.Bounds.registerClass("Sys.UI.Bounds");Sys.UI.DomEvent=function(n){var t=n,i,r;this.rawEvent=t;this.altKey=t.altKey;typeof t.button!="undefined"&&(this.button=typeof t.which!="undefined"?t.button:t.button===4?Sys.UI.MouseButton.middleButton:t.button===2?Sys.UI.MouseButton.rightButton:Sys.UI.MouseButton.leftButton);t.type==="keypress"?this.charCode=t.charCode||t.keyCode:this.keyCode=t.keyCode&&t.keyCode===46?127:t.keyCode;this.clientX=t.clientX;this.clientY=t.clientY;this.ctrlKey=t.ctrlKey;this.target=t.target?t.target:t.srcElement;typeof t.offsetX!="undefined"&&typeof t.offsetY!="undefined"?(this.offsetX=t.offsetX,this.offsetY=t.offsetY):this.target&&this.target.nodeType!==3&&typeof t.clientX=="number"&&(i=Sys.UI.DomElement.getLocation(this.target),r=Sys.UI.DomElement._getWindow(this.target),this.offsetX=(r.pageXOffset||0)+t.clientX-i.x,this.offsetY=(r.pageYOffset||0)+t.clientY-i.y);this.screenX=t.screenX;this.screenY=t.screenY;this.shiftKey=t.shiftKey;this.type=t.type};Sys.UI.DomEvent.prototype={preventDefault:function(){this.rawEvent.preventDefault?this.rawEvent.preventDefault():window.event&&(this.rawEvent.returnValue=!1)},stopPropagation:function(){this.rawEvent.stopPropagation?this.rawEvent.stopPropagation():window.event&&(this.rawEvent.cancelBubble=!0)}};Sys.UI.DomEvent.registerClass("Sys.UI.DomEvent");var $addHandler=Sys.UI.DomEvent.addHandler=function(n,t,i){var r,u;n._events||(n._events={});r=n._events[t];r||(n._events[t]=r=[]);n.addEventListener?(u=function(t){return i.call(n,new Sys.UI.DomEvent(t))},n.addEventListener(t,u,!1)):n.attachEvent&&(u=function(){var t={};try{t=Sys.UI.DomElement._getWindow(n).event}catch(r){}return i.call(n,new Sys.UI.DomEvent(t))},n.attachEvent("on"+t,u));r[r.length]={handler:i,browserHandler:u}},$addHandlers=Sys.UI.DomEvent.addHandlers=function(n,t,i){var u,r;for(u in t)r=t[u],i&&(r=Function.createDelegate(i,r)),$addHandler(n,u,r)},$clearHandlers=Sys.UI.DomEvent.clearHandlers=function(n){var i,r,u,t;if(n._events){i=n._events;for(r in i)for(u=i[r],t=u.length-1;t>=0;t--)$removeHandler(n,r,u[t].handler);n._events=null}},$removeHandler=Sys.UI.DomEvent.removeHandler=function(n,t,i){for(var f=null,u=n._events[t],r=0,e=u.length;r<e;r++)if(u[r].handler===i){f=u[r].browserHandler;break}n.removeEventListener?n.removeEventListener(t,f,!1):n.detachEvent&&n.detachEvent("on"+t,f);u.splice(r,1)};Sys.UI.DomElement=function(){};Sys.UI.DomElement.registerClass("Sys.UI.DomElement");Sys.UI.DomElement.addCssClass=function(n,t){Sys.UI.DomElement.containsCssClass(n,t)||(n.className===""?n.className=t:n.className+=" "+t)};Sys.UI.DomElement.containsCssClass=function(n,t){return Array.contains(n.className.split(" "),t)};Sys.UI.DomElement.getBounds=function(n){var t=Sys.UI.DomElement.getLocation(n);return new Sys.UI.Bounds(t.x,t.y,n.offsetWidth||0,n.offsetHeight||0)};$get=Sys.UI.DomElement.getElementById=function(n,t){var u,f,r,i;if(!t)return document.getElementById(n);if(t.getElementById)return t.getElementById(n);for(u=[],f=t.childNodes,r=0;r<f.length;r++)i=f[r],i.nodeType==1&&(u[u.length]=i);while(u.length){if(i=u.shift(),i.id==n)return i;for(f=i.childNodes,r=0;r<f.length;r++)i=f[r],i.nodeType==1&&(u[u.length]=i)}return null};switch(Sys.Browser.agent){case Sys.Browser.InternetExplorer:Sys.UI.DomElement.getLocation=function(n){var t,i,r;if(n.self||n.nodeType===9||(t=n.getBoundingClientRect(),!t))return new Sys.UI.Point(0,0);var u=n.ownerDocument.documentElement,f=t.left-2+u.scrollLeft,e=t.top-2+u.scrollTop;try{i=n.ownerDocument.parentWindow.frameElement||null;i&&(r=i.frameBorder==="0"||i.frameBorder==="no"?2:0,f+=r,e+=r)}catch(o){}return new Sys.UI.Point(f,e)};break;case Sys.Browser.Safari:Sys.UI.DomElement.getLocation=function(n){var r,o,t,s;if(n.window&&n.window===n||n.nodeType===9)return new Sys.UI.Point(0,0);var u=0,f=0,h=null,e=null,i;for(t=n;t;h=t,e=i,t=t.offsetParent)i=Sys.UI.DomElement._getCurrentStyle(t),r=t.tagName,(t.offsetLeft||t.offsetTop)&&(r!=="BODY"||!e||e.position!=="absolute")&&(u+=t.offsetLeft,f+=t.offsetTop);if(i=Sys.UI.DomElement._getCurrentStyle(n),o=i?i.position:null,!o||o!=="absolute")for(t=n.parentNode;t;t=t.parentNode)if(r=t.tagName,r!=="BODY"&&r!=="HTML"&&(t.scrollLeft||t.scrollTop)&&(u-=t.scrollLeft||0,f-=t.scrollTop||0),i=Sys.UI.DomElement._getCurrentStyle(t),s=i?i.position:null,s&&s==="absolute")break;return new Sys.UI.Point(u,f)};break;case Sys.Browser.Opera:Sys.UI.DomElement.getLocation=function(n){var i,e,r,t,o;if(n.window&&n.window===n||n.nodeType===9)return new Sys.UI.Point(0,0);var u=0,f=0,s=null;for(t=n;t;s=t,t=t.offsetParent)i=t.tagName,u+=t.offsetLeft||0,f+=t.offsetTop||0;for(e=n.style.position,r=e&&e!=="static",t=n.parentNode;t;t=t.parentNode)i=t.tagName,i!=="BODY"&&i!=="HTML"&&(t.scrollLeft||t.scrollTop)&&r&&(t.style.overflow==="scroll"||t.style.overflow==="auto")&&(u-=t.scrollLeft||0,f-=t.scrollTop||0),o=t&&t.style?t.style.position:null,r=r||o&&o!=="static";return new Sys.UI.Point(u,f)};break;default:Sys.UI.DomElement.getLocation=function(n){var r,o,t;if(n.window&&n.window===n||n.nodeType===9)return new Sys.UI.Point(0,0);var u=0,f=0,s=null,e=null,i=null;for(t=n;t;s=t,e=i,t=t.offsetParent)r=t.tagName,i=Sys.UI.DomElement._getCurrentStyle(t),!(t.offsetLeft||t.offsetTop)||r==="BODY"&&(!e||e.position!=="absolute")||(u+=t.offsetLeft,f+=t.offsetTop),s!==null&&i&&(r!=="TABLE"&&r!=="TD"&&r!=="HTML"&&(u+=parseInt(i.borderLeftWidth)||0,f+=parseInt(i.borderTopWidth)||0),r==="TABLE"&&(i.position==="relative"||i.position==="absolute")&&(u+=parseInt(i.marginLeft)||0,f+=parseInt(i.marginTop)||0));if(i=Sys.UI.DomElement._getCurrentStyle(n),o=i?i.position:null,!o||o!=="absolute")for(t=n.parentNode;t;t=t.parentNode)r=t.tagName,r!=="BODY"&&r!=="HTML"&&(t.scrollLeft||t.scrollTop)&&(u-=t.scrollLeft||0,f-=t.scrollTop||0,i=Sys.UI.DomElement._getCurrentStyle(t),i&&(u+=parseInt(i.borderLeftWidth)||0,f+=parseInt(i.borderTopWidth)||0));return new Sys.UI.Point(u,f)}}Sys.UI.DomElement.removeCssClass=function(n,t){var i=" "+n.className+" ",r=i.indexOf(" "+t+" ");r>=0&&(n.className=(i.substr(0,r)+" "+i.substring(r+t.length+1,i.length)).trim())};Sys.UI.DomElement.setLocation=function(n,t,i){var r=n.style;r.position="absolute";r.left=t+"px";r.top=i+"px"};Sys.UI.DomElement.toggleCssClass=function(n,t){Sys.UI.DomElement.containsCssClass(n,t)?Sys.UI.DomElement.removeCssClass(n,t):Sys.UI.DomElement.addCssClass(n,t)};Sys.UI.DomElement.getVisibilityMode=function(n){return n._visibilityMode===Sys.UI.VisibilityMode.hide?Sys.UI.VisibilityMode.hide:Sys.UI.VisibilityMode.collapse};Sys.UI.DomElement.setVisibilityMode=function(n,t){Sys.UI.DomElement._ensureOldDisplayMode(n);n._visibilityMode!==t&&(n._visibilityMode=t,Sys.UI.DomElement.getVisible(n)===!1&&(n.style.display=n._visibilityMode===Sys.UI.VisibilityMode.hide?n._oldDisplayMode:"none"),n._visibilityMode=t)};Sys.UI.DomElement.getVisible=function(n){var t=n.currentStyle||Sys.UI.DomElement._getCurrentStyle(n);return t?t.visibility!=="hidden"&&t.display!=="none":!0};Sys.UI.DomElement.setVisible=function(n,t){t!==Sys.UI.DomElement.getVisible(n)&&(Sys.UI.DomElement._ensureOldDisplayMode(n),n.style.visibility=t?"visible":"hidden",n.style.display=t||n._visibilityMode===Sys.UI.VisibilityMode.hide?n._oldDisplayMode:"none")};Sys.UI.DomElement._ensureOldDisplayMode=function(n){if(!n._oldDisplayMode){var t=n.currentStyle||Sys.UI.DomElement._getCurrentStyle(n);if(n._oldDisplayMode=t?t.display:null,!n._oldDisplayMode||n._oldDisplayMode==="none")switch(n.tagName.toUpperCase()){case"DIV":case"P":case"ADDRESS":case"BLOCKQUOTE":case"BODY":case"COL":case"COLGROUP":case"DD":case"DL":case"DT":case"FIELDSET":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HR":case"IFRAME":case"LEGEND":case"OL":case"PRE":case"TABLE":case"TD":case"TH":case"TR":case"UL":n._oldDisplayMode="block";break;case"LI":n._oldDisplayMode="list-item";break;default:n._oldDisplayMode="inline"}}};Sys.UI.DomElement._getWindow=function(n){var t=n.ownerDocument||n.document||n;return t.defaultView||t.parentWindow};Sys.UI.DomElement._getCurrentStyle=function(n){var t,i,f,e,r,u;if(n.nodeType===3)return null;if(t=Sys.UI.DomElement._getWindow(n),n.documentElement&&(n=n.documentElement),i=t&&n!==t&&t.getComputedStyle?t.getComputedStyle(n,null):n.currentStyle||n.style,!i&&Sys.Browser.agent===Sys.Browser.Safari&&n.style){f=n.style.display;e=n.style.position;n.style.position="absolute";n.style.display="block";r=t.getComputedStyle(n,null);n.style.display=f;n.style.position=e;i={};for(u in r)i[u]=r[u];i.display="none"}return i};Sys.IContainer=function(){};Sys.IContainer.prototype={};Sys.IContainer.registerInterface("Sys.IContainer");Sys._ScriptLoader=function(){this._scriptsToLoad=null;this._scriptLoadedDelegate=Function.createDelegate(this,this._scriptLoadedHandler)};Sys._ScriptLoader.prototype={dispose:function(){this._stopLoading();this._events&&delete this._events;this._scriptLoadedDelegate=null},loadScripts:function(n,t,i,r){this._loading=!0;this._allScriptsLoadedCallback=t;this._scriptLoadFailedCallback=i;this._scriptLoadTimeoutCallback=r;n>0&&(this._timeoutCookie=window.setTimeout(Function.createDelegate(this,this._scriptLoadTimeoutHandler),n*1e3));this._loadScriptsInternal()},notifyScriptLoaded:function(){this._loading&&(this._currentTask._notified++,Sys.Browser.agent===Sys.Browser.Safari&&this._currentTask._notified===1&&window.setTimeout(Function.createDelegate(this,function(){this._scriptLoadedHandler(this._currentTask.get_scriptElement(),!0)}),0))},queueCustomScriptTag:function(n){this._scriptsToLoad||(this._scriptsToLoad=[]);Array.add(this._scriptsToLoad,n)},queueScriptBlock:function(n){this._scriptsToLoad||(this._scriptsToLoad=[]);Array.add(this._scriptsToLoad,{text:n})},queueScriptReference:function(n){this._scriptsToLoad||(this._scriptsToLoad=[]);Array.add(this._scriptsToLoad,{src:n})},_createScriptElement:function(n){var t=document.createElement("SCRIPT"),i;t.type="text/javascript";for(i in n)t[i]=n[i];return t},_loadScriptsInternal:function(){var t,n,r,i;this._scriptsToLoad&&this._scriptsToLoad.length>0?(t=Array.dequeue(this._scriptsToLoad),n=this._createScriptElement(t),n.text&&Sys.Browser.agent===Sys.Browser.Safari&&(n.innerHTML=n.text,delete n.text),typeof t.src=="string"?(this._currentTask=new Sys._ScriptLoaderTask(n,this._scriptLoadedDelegate),this._currentTask.execute()):(document.getElementsByTagName("HEAD")[0].appendChild(n),r=this,window.setTimeout(function(){Sys._ScriptLoader._clearScript(n);r._loadScriptsInternal()},0))):(i=this._allScriptsLoadedCallback,this._stopLoading(),i&&i(this))},_raiseError:function(n){var t=this._scriptLoadFailedCallback,i=this._currentTask.get_scriptElement();if(this._stopLoading(),t)t(this,i,n);else throw Sys._ScriptLoader._errorScriptLoadFailed(i.src,n);},_scriptLoadedHandler:function(n,t){t&&this._currentTask._notified?this._currentTask._notified>1?this._raiseError(!0):(Array.add(Sys._ScriptLoader._getLoadedScripts(),n.src),this._currentTask.dispose(),this._currentTask=null,this._loadScriptsInternal()):this._raiseError(!1)},_scriptLoadTimeoutHandler:function(){var n=this._scriptLoadTimeoutCallback;this._stopLoading();n&&n(this)},_stopLoading:function(){this._timeoutCookie&&(window.clearTimeout(this._timeoutCookie),this._timeoutCookie=null);this._currentTask&&(this._currentTask.dispose(),this._currentTask=null);this._scriptsToLoad=null;this._loading=null;this._allScriptsLoadedCallback=null;this._scriptLoadFailedCallback=null;this._scriptLoadTimeoutCallback=null}};Sys._ScriptLoader.registerClass("Sys._ScriptLoader",null,Sys.IDisposable);Sys._ScriptLoader.getInstance=function(){var n=Sys._ScriptLoader._activeInstance;return n||(n=Sys._ScriptLoader._activeInstance=new Sys._ScriptLoader),n};Sys._ScriptLoader.isScriptLoaded=function(n){var t=document.createElement("script");return t.src=n,Array.contains(Sys._ScriptLoader._getLoadedScripts(),t.src)};Sys._ScriptLoader.readLoadedScripts=function(){var t,r,u,n;if(!Sys._ScriptLoader._referencedScripts)for(t=Sys._ScriptLoader._referencedScripts=[],r=document.getElementsByTagName("SCRIPT"),i=r.length-1;i>=0;i--)u=r[i],n=u.src,n.length&&(Array.contains(t,n)||Array.add(t,n))};Sys._ScriptLoader._clearScript=function(n){Sys.Debug.isDebug||n.parentNode.removeChild(n)};Sys._ScriptLoader._errorScriptLoadFailed=function(n,t){var r,u,i;return r=t?Sys.Res.scriptLoadMultipleCallbacks:Sys.Res.scriptLoadFailed,u="Sys.ScriptLoadFailedException: "+String.format(r,n),i=Error.create(u,{name:"Sys.ScriptLoadFailedException",scriptUrl:n}),i.popStackFrame(),i};Sys._ScriptLoader._getLoadedScripts=function(){return Sys._ScriptLoader._referencedScripts||(Sys._ScriptLoader._referencedScripts=[],Sys._ScriptLoader.readLoadedScripts()),Sys._ScriptLoader._referencedScripts};Sys._ScriptLoaderTask=function(n,t){this._scriptElement=n;this._completedCallback=t;this._notified=0};Sys._ScriptLoaderTask.prototype={get_scriptElement:function(){return this._scriptElement},dispose:function(){this._disposed||(this._disposed=!0,this._removeScriptElementHandlers(),Sys._ScriptLoader._clearScript(this._scriptElement),this._scriptElement=null)},execute:function(){this._addScriptElementHandlers();document.getElementsByTagName("HEAD")[0].appendChild(this._scriptElement)},_addScriptElementHandlers:function(){this._scriptLoadDelegate=Function.createDelegate(this,this._scriptLoadHandler);Sys.Browser.agent!==Sys.Browser.InternetExplorer?(this._scriptElement.readyState="loaded",$addHandler(this._scriptElement,"load",this._scriptLoadDelegate)):$addHandler(this._scriptElement,"readystatechange",this._scriptLoadDelegate);this._scriptElement.addEventListener&&(this._scriptErrorDelegate=Function.createDelegate(this,this._scriptErrorHandler),this._scriptElement.addEventListener("error",this._scriptErrorDelegate,!1))},_removeScriptElementHandlers:function(){if(this._scriptLoadDelegate){var n=this.get_scriptElement();Sys.Browser.agent!==Sys.Browser.InternetExplorer?$removeHandler(n,"load",this._scriptLoadDelegate):$removeHandler(n,"readystatechange",this._scriptLoadDelegate);this._scriptErrorDelegate&&(this._scriptElement.removeEventListener("error",this._scriptErrorDelegate,!1),this._scriptErrorDelegate=null);this._scriptLoadDelegate=null}},_scriptErrorHandler:function(){this._disposed||this._completedCallback(this.get_scriptElement(),!1)},_scriptLoadHandler:function(){var n,t;this._disposed||(n=this.get_scriptElement(),n.readyState==="loaded"||n.readyState==="complete")&&(t=this,window.setTimeout(function(){t._completedCallback(n,!0)},0))}};Sys._ScriptLoaderTask.registerClass("Sys._ScriptLoaderTask",null,Sys.IDisposable);Sys.ApplicationLoadEventArgs=function(n,t){Sys.ApplicationLoadEventArgs.initializeBase(this);this._components=n;this._isPartialLoad=t};Sys.ApplicationLoadEventArgs.prototype={get_components:function(){return this._components},get_isPartialLoad:function(){return this._isPartialLoad}};Sys.ApplicationLoadEventArgs.registerClass("Sys.ApplicationLoadEventArgs",Sys.EventArgs);Sys._Application=function(){Sys._Application.initializeBase(this);this._disposableObjects=[];this._components={};this._createdComponents=[];this._secondPassComponents=[];this._unloadHandlerDelegate=Function.createDelegate(this,this._unloadHandler);this._loadHandlerDelegate=Function.createDelegate(this,this._loadHandler);Sys.UI.DomEvent.addHandler(window,"unload",this._unloadHandlerDelegate);Sys.UI.DomEvent.addHandler(window,"load",this._loadHandlerDelegate)};Sys._Application.prototype={_creatingComponents:!1,_disposing:!1,get_isCreatingComponents:function(){return this._creatingComponents},add_load:function(n){this.get_events().addHandler("load",n)},remove_load:function(n){this.get_events().removeHandler("load",n)},add_init:function(n){this._initialized?n(this,Sys.EventArgs.Empty):this.get_events().addHandler("init",n)},remove_init:function(n){this.get_events().removeHandler("init",n)},add_unload:function(n){this.get_events().addHandler("unload",n)},remove_unload:function(n){this.get_events().removeHandler("unload",n)},addComponent:function(n){this._components[n.get_id()]=n},beginCreateComponents:function(){this._creatingComponents=!0},dispose:function(){var t,i,n,u,r;if(!this._disposing){for(this._disposing=!0,window.pageUnload&&window.pageUnload(this,Sys.EventArgs.Empty),t=this.get_events().getHandler("unload"),t&&t(this,Sys.EventArgs.Empty),i=Array.clone(this._disposableObjects),n=0,u=i.length;n<u;n++)i[n].dispose();Array.clear(this._disposableObjects);Sys.UI.DomEvent.removeHandler(window,"unload",this._unloadHandlerDelegate);this._loadHandlerDelegate&&(Sys.UI.DomEvent.removeHandler(window,"load",this._loadHandlerDelegate),this._loadHandlerDelegate=null);r=Sys._ScriptLoader.getInstance();r&&r.dispose();Sys._Application.callBaseMethod(this,"dispose")}},endCreateComponents:function(){for(var i,t=this._secondPassComponents,n=0,r=t.length;n<r;n++)i=t[n].component,Sys$Component$_setReferences(i,t[n].references),i.endUpdate();this._secondPassComponents=[];this._creatingComponents=!1},findComponent:function(n,t){return t?Sys.IContainer.isInstanceOfType(t)?t.findComponent(n):t[n]||null:Sys.Application._components[n]||null},getComponents:function(){var n=[],t=this._components;for(var i in t)n[n.length]=t[i];return n},initialize:function(){this._initialized||this._initializing||(this._initializing=!0,window.setTimeout(Function.createDelegate(this,this._doInitialize),0))},notifyScriptLoaded:function(){var n=Sys._ScriptLoader.getInstance();n&&n.notifyScriptLoaded()},registerDisposableObject:function(n){this._disposing||(this._disposableObjects[this._disposableObjects.length]=n)},raiseLoad:function(){var n=this.get_events().getHandler("load"),t=new Sys.ApplicationLoadEventArgs(Array.clone(this._createdComponents),!this._initializing);n&&n(this,t);window.pageLoad&&window.pageLoad(this,t);this._createdComponents=[]},removeComponent:function(n){var t=n.get_id();t&&delete this._components[t]},unregisterDisposableObject:function(n){this._disposing||Array.remove(this._disposableObjects,n)},_addComponentToSecondPass:function(n,t){this._secondPassComponents[this._secondPassComponents.length]={component:n,references:t}},_doInitialize:function(){Sys._Application.callBaseMethod(this,"initialize");var n=this.get_events().getHandler("init");n&&(this.beginCreateComponents(),n(this,Sys.EventArgs.Empty),this.endCreateComponents());this.raiseLoad();this._initializing=!1},_loadHandler:function(){this._loadHandlerDelegate&&(Sys.UI.DomEvent.removeHandler(window,"load",this._loadHandlerDelegate),this._loadHandlerDelegate=null);this.initialize()},_unloadHandler:function(){this.dispose()}};Sys._Application.registerClass("Sys._Application",Sys.Component,Sys.IContainer);Sys.Application=new Sys._Application;$find=Sys.Application.findComponent;Type.registerNamespace("Sys.Net");Sys.Net.WebRequestExecutor=function(){this._webRequest=null;this._resultObject=null};Sys.Net.WebRequestExecutor.prototype={get_webRequest:function(){return this._webRequest},_set_webRequest:function(n){this._webRequest=n},get_started:function(){throw Error.notImplemented();},get_responseAvailable:function(){throw Error.notImplemented();},get_timedOut:function(){throw Error.notImplemented();},get_aborted:function(){throw Error.notImplemented();},get_responseData:function(){throw Error.notImplemented();},get_statusCode:function(){throw Error.notImplemented();},get_statusText:function(){throw Error.notImplemented();},get_xml:function(){throw Error.notImplemented();},get_object:function(){return this._resultObject||(this._resultObject=Sys.Serialization.JavaScriptSerializer.deserialize(this.get_responseData())),this._resultObject},executeRequest:function(){throw Error.notImplemented();},abort:function(){throw Error.notImplemented();},getResponseHeader:function(){throw Error.notImplemented();},getAllResponseHeaders:function(){throw Error.notImplemented();}};Sys.Net.WebRequestExecutor.registerClass("Sys.Net.WebRequestExecutor");Sys.Net.XMLDOM=function(n){var r,i,u,t,f;if(window.DOMParser)try{return f=new window.DOMParser,f.parseFromString(n,"text/xml")}catch(e){}else for(r=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument"],i=0,u=r.length;i<u;i++)try{return t=new ActiveXObject(r[i]),t.async=!1,t.loadXML(n),t.setProperty("SelectionLanguage","XPath"),t}catch(e){}return null};Sys.Net.XMLHttpExecutor=function(){Sys.Net.XMLHttpExecutor.initializeBase(this);var n=this;this._xmlHttpRequest=null;this._webRequest=null;this._responseAvailable=!1;this._timedOut=!1;this._timer=null;this._aborted=!1;this._started=!1;this._onReadyStateChange=function(){if(n._xmlHttpRequest.readyState===4){try{if(typeof n._xmlHttpRequest.status=="undefined")return}catch(t){return}n._clearTimer();n._responseAvailable=!0;n._webRequest.completed(Sys.EventArgs.Empty);n._xmlHttpRequest!=null&&(n._xmlHttpRequest.onreadystatechange=Function.emptyMethod,n._xmlHttpRequest=null)}};this._clearTimer=function(){n._timer!=null&&(window.clearTimeout(n._timer),n._timer=null)};this._onTimeout=function(){n._responseAvailable||(n._clearTimer(),n._timedOut=!0,n._xmlHttpRequest.onreadystatechange=Function.emptyMethod,n._xmlHttpRequest.abort(),n._webRequest.completed(Sys.EventArgs.Empty),n._xmlHttpRequest=null)}};Sys.Net.XMLHttpExecutor.prototype={get_timedOut:function(){return this._timedOut},get_started:function(){return this._started},get_responseAvailable:function(){return this._responseAvailable},get_aborted:function(){return this._aborted},executeRequest:function(){var t,n,i,r,u,f;if(this._webRequest=this.get_webRequest(),t=this._webRequest.get_body(),n=this._webRequest.get_headers(),this._xmlHttpRequest=new XMLHttpRequest,this._xmlHttpRequest.onreadystatechange=this._onReadyStateChange,i=this._webRequest.get_httpVerb(),this._xmlHttpRequest.open(i,this._webRequest.getResolvedUrl(),!0),n)for(r in n)u=n[r],typeof u!="function"&&this._xmlHttpRequest.setRequestHeader(r,u);i.toLowerCase()==="post"&&(n!==null&&n["Content-Type"]||this._xmlHttpRequest.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),t||(t=""));f=this._webRequest.get_timeout();f>0&&(this._timer=window.setTimeout(Function.createDelegate(this,this._onTimeout),f));this._xmlHttpRequest.send(t);this._started=!0},getResponseHeader:function(n){var t;try{t=this._xmlHttpRequest.getResponseHeader(n)}catch(i){}return t||(t=""),t},getAllResponseHeaders:function(){return this._xmlHttpRequest.getAllResponseHeaders()},get_responseData:function(){return this._xmlHttpRequest.responseText},get_statusCode:function(){var n=0;try{n=this._xmlHttpRequest.status}catch(t){}return n},get_statusText:function(){return this._xmlHttpRequest.statusText},get_xml:function(){var n=this._xmlHttpRequest.responseXML;if(n&&n.documentElement)navigator.userAgent.indexOf("MSIE")!==-1&&n.setProperty("SelectionLanguage","XPath");else if(n=Sys.Net.XMLDOM(this._xmlHttpRequest.responseText),!n||!n.documentElement)return null;return n.documentElement.namespaceURI==="http://www.mozilla.org/newlayout/xml/parsererror.xml"&&n.documentElement.tagName==="parsererror"?null:n.documentElement.firstChild&&n.documentElement.firstChild.tagName==="parsererror"?null:n},abort:function(){this._aborted||this._responseAvailable||this._timedOut||(this._aborted=!0,this._clearTimer(),this._xmlHttpRequest&&!this._responseAvailable&&(this._xmlHttpRequest.onreadystatechange=Function.emptyMethod,this._xmlHttpRequest.abort(),this._xmlHttpRequest=null,this._webRequest.completed(Sys.EventArgs.Empty)))}};Sys.Net.XMLHttpExecutor.registerClass("Sys.Net.XMLHttpExecutor",Sys.Net.WebRequestExecutor);Sys.Net._WebRequestManager=function(){this._this=this;this._defaultTimeout=0;this._defaultExecutorType="Sys.Net.XMLHttpExecutor"};Sys.Net._WebRequestManager.prototype={add_invokingRequest:function(n){this._get_eventHandlerList().addHandler("invokingRequest",n)},remove_invokingRequest:function(n){this._get_eventHandlerList().removeHandler("invokingRequest",n)},add_completedRequest:function(n){this._get_eventHandlerList().addHandler("completedRequest",n)},remove_completedRequest:function(n){this._get_eventHandlerList().removeHandler("completedRequest",n)},_get_eventHandlerList:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},get_defaultTimeout:function(){return this._defaultTimeout},set_defaultTimeout:function(n){this._defaultTimeout=n},get_defaultExecutorType:function(){return this._defaultExecutorType},set_defaultExecutorType:function(n){this._defaultExecutorType=n},executeRequest:function(n){var t=n.get_executor(),u,f,i,r;if(!t){u=!1;try{f=eval(this._defaultExecutorType);t=new f}catch(e){u=!0}n.set_executor(t)}t.get_aborted()||(i=new Sys.Net.NetworkRequestEventArgs(n),r=this._get_eventHandlerList().getHandler("invokingRequest"),r&&r(this,i),i.get_cancel()||t.executeRequest())}};Sys.Net._WebRequestManager.registerClass("Sys.Net._WebRequestManager");Sys.Net.WebRequestManager=new Sys.Net._WebRequestManager;Sys.Net.NetworkRequestEventArgs=function(n){Sys.Net.NetworkRequestEventArgs.initializeBase(this);this._webRequest=n};Sys.Net.NetworkRequestEventArgs.prototype={get_webRequest:function(){return this._webRequest}};Sys.Net.NetworkRequestEventArgs.registerClass("Sys.Net.NetworkRequestEventArgs",Sys.CancelEventArgs);Sys.Net.WebRequest=function(){this._url="";this._headers={};this._body=null;this._userContext=null;this._httpVerb=null;this._executor=null;this._invokeCalled=!1;this._timeout=0};Sys.Net.WebRequest.prototype={add_completed:function(n){this._get_eventHandlerList().addHandler("completed",n)},remove_completed:function(n){this._get_eventHandlerList().removeHandler("completed",n)},completed:function(n){var t=Sys.Net.WebRequestManager._get_eventHandlerList().getHandler("completedRequest");t&&t(this._executor,n);t=this._get_eventHandlerList().getHandler("completed");t&&t(this._executor,n)},_get_eventHandlerList:function(){return this._events||(this._events=new Sys.EventHandlerList),this._events},get_url:function(){return this._url},set_url:function(n){this._url=n},get_headers:function(){return this._headers},get_httpVerb:function(){return this._httpVerb===null?this._body===null?"GET":"POST":this._httpVerb},set_httpVerb:function(n){this._httpVerb=n},get_body:function(){return this._body},set_body:function(n){this._body=n},get_userContext:function(){return this._userContext},set_userContext:function(n){this._userContext=n},get_executor:function(){return this._executor},set_executor:function(n){this._executor=n;this._executor._set_webRequest(this)},get_timeout:function(){return this._timeout===0?Sys.Net.WebRequestManager.get_defaultTimeout():this._timeout},set_timeout:function(n){this._timeout=n},getResolvedUrl:function(){return Sys.Net.WebRequest._resolveUrl(this._url)},invoke:function(){Sys.Net.WebRequestManager.executeRequest(this);this._invokeCalled=!0}};Sys.Net.WebRequest._resolveUrl=function(n,t){var i,r,u,f,e;return n&&n.indexOf("://")!==-1?n:(t&&t.length!==0||(i=document.getElementsByTagName("base")[0],t=i&&i.href&&i.href.length>0?i.href:document.URL),r=t.indexOf("?"),r!==-1&&(t=t.substr(0,r)),t=t.substr(0,t.lastIndexOf("/")+1),!n||n.length===0)?t:n.charAt(0)==="/"?(u=t.indexOf("://"),f=t.indexOf("/",u+3),t.substr(0,f)+n):(e=t.lastIndexOf("/"),t.substr(0,e+1)+n)};Sys.Net.WebRequest._createQueryString=function(n,t){var i,r,u,f,e;t||(t=encodeURIComponent);i=new Sys.StringBuilder;r=0;for(u in n)(f=n[u],typeof f!="function")&&(e=Sys.Serialization.JavaScriptSerializer.serialize(f),r!==0&&i.append("&"),i.append(u),i.append("="),i.append(t(e)),r++);return i.toString()};Sys.Net.WebRequest._createUrl=function(n,t){var i,r;return t?(i=Sys.Net.WebRequest._createQueryString(t),i.length>0?(r="?",n&&n.indexOf("?")!==-1&&(r="&"),n+r+i):n):n};Sys.Net.WebRequest.registerClass("Sys.Net.WebRequest");Sys.Net.WebServiceProxy=function(){};Sys.Net.WebServiceProxy.prototype={get_timeout:function(){return this._timeout},set_timeout:function(n){if(n<0)throw Error.argumentOutOfRange("value",n,Sys.Res.invalidTimeout);this._timeout=n},get_defaultUserContext:function(){return this._userContext},set_defaultUserContext:function(n){this._userContext=n},get_defaultSucceededCallback:function(){return this._succeeded},set_defaultSucceededCallback:function(n){this._succeeded=n},get_defaultFailedCallback:function(){return this._failed},set_defaultFailedCallback:function(n){this._failed=n},get_path:function(){return this._path},set_path:function(n){this._path=n},_invoke:function(n,t,i,r,u,f,e){return(u===null||typeof u=="undefined")&&(u=this.get_defaultSucceededCallback()),(f===null||typeof f=="undefined")&&(f=this.get_defaultFailedCallback()),(e===null||typeof e=="undefined")&&(e=this.get_defaultUserContext()),Sys.Net.WebServiceProxy.invoke(n,t,i,r,u,f,e,this.get_timeout())}};Sys.Net.WebServiceProxy.registerClass("Sys.Net.WebServiceProxy");Sys.Net.WebServiceProxy.invoke=function(n,t,i,r,u,f,e,o){function l(n){var r,i,o,h,s,c;if(n.get_responseAvailable()){r=n.get_statusCode();i=null;try{o=n.getResponseHeader("Content-Type");i=o.startsWith("application/json")?n.get_object():o.startsWith("text/xml")?n.get_xml():n.get_responseData()}catch(l){}h=n.getResponseHeader("jsonerror");s=h==="true";s?i&&(i=new Sys.Net.WebServiceError(!1,i.Message,i.StackTrace,i.ExceptionType)):o.startsWith("application/json")&&(i=i.d);r<200||r>=300||s?f&&(i&&s||(i=new Sys.Net.WebServiceError(!1,String.format(Sys.Res.webServiceFailedNoMsg,t),"","")),i._statusCode=r,f(i,e,t)):u&&u(i,e,t)}else c=n.get_timedOut()?String.format(Sys.Res.webServiceTimedOut,t):String.format(Sys.Res.webServiceFailedNoMsg,t),f&&f(new Sys.Net.WebServiceError(n.get_timedOut(),c,"",""),e,t)}var s=new Sys.Net.WebRequest,c,h;return s.get_headers()["Content-Type"]="application/json; charset=utf-8",r||(r={}),c=r,i&&c||(c={}),s.set_url(Sys.Net.WebRequest._createUrl(n+"/"+encodeURIComponent(t),c)),h=null,i||(h=Sys.Serialization.JavaScriptSerializer.serialize(r),h==="{}"&&(h="")),s.set_body(h),s.add_completed(l),o&&o>0&&s.set_timeout(o),s.invoke(),s};Sys.Net.WebServiceProxy._generateTypedConstructor=function(n){return function(t){if(t)for(var i in t)this[i]=t[i];this.__type=n}};Sys.Net.WebServiceError=function(n,t,i,r){this._timedOut=n;this._message=t;this._stackTrace=i;this._exceptionType=r;this._statusCode=-1};Sys.Net.WebServiceError.prototype={get_timedOut:function(){return this._timedOut},get_statusCode:function(){return this._statusCode},get_message:function(){return this._message},get_stackTrace:function(){return this._stackTrace},get_exceptionType:function(){return this._exceptionType}};Sys.Net.WebServiceError.registerClass("Sys.Net.WebServiceError");Type.registerNamespace("Sys.Services");Sys.Services._ProfileService=function(){Sys.Services._ProfileService.initializeBase(this);this.properties={}};Sys.Services._ProfileService.DefaultWebServicePath="";Sys.Services._ProfileService.prototype={_defaultLoadCompletedCallback:null,_defaultSaveCompletedCallback:null,_path:"",_timeout:0,get_defaultLoadCompletedCallback:function(){return this._defaultLoadCompletedCallback},set_defaultLoadCompletedCallback:function(n){this._defaultLoadCompletedCallback=n},get_defaultSaveCompletedCallback:function(){return this._defaultSaveCompletedCallback},set_defaultSaveCompletedCallback:function(n){this._defaultSaveCompletedCallback=n},get_path:function(){return this._path||""},load:function(n,t,i,r){var u,f;n?(f="GetPropertiesForCurrentUser",u={properties:this._clonePropertyNames(n),authenticatedUserOnly:!1}):(f="GetAllPropertiesForCurrentUser",u={authenticatedUserOnly:!1});this._invoke(this._get_path(),f,!1,u,Function.createDelegate(this,this._onLoadComplete),Function.createDelegate(this,this._onLoadFailed),[t,i,r])},save:function(n,t,i,r){var u=this._flattenProperties(n,this.properties);this._invoke(this._get_path(),"SetPropertiesForCurrentUser",!1,{values:u.value,authenticatedUserOnly:!1},Function.createDelegate(this,this._onSaveComplete),Function.createDelegate(this,this._onSaveFailed),[t,i,r,u.count])},_clonePropertyNames:function(n){for(var t,r=[],u={},i=0;i<n.length;i++)t=n[i],u[t]||(Array.add(r,t),u[t]=!0);return r},_flattenProperties:function(n,t,i){var r={},u,f,o=0,e,s,h,c,l;if(n&&n.length===0)return{value:r,count:0};for(e in t)if(u=t[e],f=i?i+"."+e:e,Sys.Services.ProfileGroup.isInstanceOfType(u)){s=this._flattenProperties(n,u,f);h=s.value;o+=s.count;for(c in h)l=h[c],r[c]=l}else n&&Array.indexOf(n,f)===-1||(r[f]=u,o++);return{value:r,count:o}},_get_path:function(){var n=this.get_path();if(n.length||(n=Sys.Services._ProfileService.DefaultWebServicePath),!n||!n.length)throw Error.invalidOperation(Sys.Res.servicePathNotSet);return n},_onLoadComplete:function(n,t,i){var r,u,f,e;if(typeof n!="object")throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Object"));r=this._unflattenProperties(n);for(u in r)this.properties[u]=r[u];f=t[0]||this.get_defaultLoadCompletedCallback()||this.get_defaultSucceededCallback();f&&(e=t[2]||this.get_defaultUserContext(),f(n.length,e,"Sys.Services.ProfileService.load"))},_onLoadFailed:function(n,t){var i=t[1]||this.get_defaultFailedCallback(),r;i&&(r=t[2]||this.get_defaultUserContext(),i(n,r,"Sys.Services.ProfileService.load"))},_onSaveComplete:function(n,t,i){var r=t[3],u,f;if(n!==null)if(n instanceof Array)r-=n.length;else if(typeof n=="number")r=n;else throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Array"));u=t[0]||this.get_defaultSaveCompletedCallback()||this.get_defaultSucceededCallback();u&&(f=t[2]||this.get_defaultUserContext(),u(r,f,"Sys.Services.ProfileService.save"))},_onSaveFailed:function(n,t){var i=t[1]||this.get_defaultFailedCallback(),r;i&&(r=t[2]||this.get_defaultUserContext(),i(n,r,"Sys.Services.ProfileService.save"))},_unflattenProperties:function(n){var r={},u,f,o=0,t,e,i;for(t in n)o++,f=n[t],u=t.indexOf("."),u!==-1?(e=t.substr(0,u),t=t.substr(u+1),i=r[e],i&&Sys.Services.ProfileGroup.isInstanceOfType(i)||(i=new Sys.Services.ProfileGroup,r[e]=i),i[t]=f):r[t]=f;return n.length=o,r}};Sys.Services._ProfileService.registerClass("Sys.Services._ProfileService",Sys.Net.WebServiceProxy);Sys.Services.ProfileService=new Sys.Services._ProfileService;Sys.Services.ProfileGroup=function(n){if(n)for(var t in n)this[t]=n[t]};Sys.Services.ProfileGroup.registerClass("Sys.Services.ProfileGroup");Sys.Services._AuthenticationService=function(){Sys.Services._AuthenticationService.initializeBase(this)};Sys.Services._AuthenticationService.DefaultWebServicePath="";Sys.Services._AuthenticationService.prototype={_defaultLoginCompletedCallback:null,_defaultLogoutCompletedCallback:null,_path:"",_timeout:0,_authenticated:!1,get_defaultLoginCompletedCallback:function(){return this._defaultLoginCompletedCallback},set_defaultLoginCompletedCallback:function(n){this._defaultLoginCompletedCallback=n},get_defaultLogoutCompletedCallback:function(){return this._defaultLogoutCompletedCallback},set_defaultLogoutCompletedCallback:function(n){this._defaultLogoutCompletedCallback=n},get_isLoggedIn:function(){return this._authenticated},get_path:function(){return this._path||""},login:function(n,t,i,r,u,f,e,o){this._invoke(this._get_path(),"Login",!1,{userName:n,password:t,createPersistentCookie:i},Function.createDelegate(this,this._onLoginComplete),Function.createDelegate(this,this._onLoginFailed),[n,t,i,r,u,f,e,o])},logout:function(n,t,i,r){this._invoke(this._get_path(),"Logout",!1,{},Function.createDelegate(this,this._onLogoutComplete),Function.createDelegate(this,this._onLogoutFailed),[n,t,i,r])},_get_path:function(){var n=this.get_path();if(n.length||(n=Sys.Services._AuthenticationService.DefaultWebServicePath),!n||!n.length)throw Error.invalidOperation(Sys.Res.servicePathNotSet);return n},_onLoginComplete:function(n,t,i){if(typeof n!="boolean")throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Boolean"));var u=t[4],f=t[7]||this.get_defaultUserContext(),r=t[5]||this.get_defaultLoginCompletedCallback()||this.get_defaultSucceededCallback();n?(this._authenticated=!0,r&&r(!0,f,"Sys.Services.AuthenticationService.login"),typeof u!="undefined"&&u!==null&&(window.location.href=u)):r&&r(!1,f,"Sys.Services.AuthenticationService.login")},_onLoginFailed:function(n,t){var i=t[6]||this.get_defaultFailedCallback(),r;i&&(r=t[7]||this.get_defaultUserContext(),i(n,r,"Sys.Services.AuthenticationService.login"))},_onLogoutComplete:function(n,t,i){if(n!==null)throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"null"));var r=t[0],f=t[3]||this.get_defaultUserContext(),u=t[1]||this.get_defaultLogoutCompletedCallback()||this.get_defaultSucceededCallback();this._authenticated=!1;u&&u(null,f,"Sys.Services.AuthenticationService.logout");r?window.location.href=r:window.location.reload()},_onLogoutFailed:function(n,t){var i=t[2]||this.get_defaultFailedCallback();i&&i(n,t[3],"Sys.Services.AuthenticationService.logout")},_setAuthenticated:function(n){this._authenticated=n}};Sys.Services._AuthenticationService.registerClass("Sys.Services._AuthenticationService",Sys.Net.WebServiceProxy);Sys.Services.AuthenticationService=new Sys.Services._AuthenticationService;Sys.Services._RoleService=function(){Sys.Services._RoleService.initializeBase(this);this._roles=[]};Sys.Services._RoleService.DefaultWebServicePath="";Sys.Services._RoleService.prototype={_defaultLoadCompletedCallback:null,_rolesIndex:null,_timeout:0,_path:"",get_defaultLoadCompletedCallback:function(){return this._defaultLoadCompletedCallback},set_defaultLoadCompletedCallback:function(n){this._defaultLoadCompletedCallback=n},get_path:function(){return this._path||""},get_roles:function(){return Array.clone(this._roles)},isUserInRole:function(n){var t=this._get_rolesIndex()[n.trim().toLowerCase()];return!!t},load:function(n,t,i){Sys.Net.WebServiceProxy.invoke(this._get_path(),"GetRolesForCurrentUser",!1,{},Function.createDelegate(this,this._onLoadComplete),Function.createDelegate(this,this._onLoadFailed),[n,t,i],this.get_timeout())},_get_path:function(){var n=this.get_path();if(n&&n.length||(n=Sys.Services._RoleService.DefaultWebServicePath),!n||!n.length)throw Error.invalidOperation(Sys.Res.servicePathNotSet);return n},_get_rolesIndex:function(){var t,n;if(!this._rolesIndex){for(t={},n=0;n<this._roles.length;n++)t[this._roles[n].toLowerCase()]=!0;this._rolesIndex=t}return this._rolesIndex},_onLoadComplete:function(n,t,i){var r,u,f;if(n&&!(n instanceof Array))throw Error.invalidOperation(String.format(Sys.Res.webServiceInvalidReturnType,i,"Array"));this._roles=n;this._rolesIndex=null;r=t[0]||this.get_defaultLoadCompletedCallback()||this.get_defaultSucceededCallback();r&&(u=t[2]||this.get_defaultUserContext(),f=Array.clone(n),r(f,u,"Sys.Services.RoleService.load"))},_onLoadFailed:function(n,t){var i=t[1]||this.get_defaultFailedCallback(),r;i&&(r=t[2]||this.get_defaultUserContext(),i(n,r,"Sys.Services.RoleService.load"))}};Sys.Services._RoleService.registerClass("Sys.Services._RoleService",Sys.Net.WebServiceProxy);Sys.Services.RoleService=new Sys.Services._RoleService;Type.registerNamespace("Sys.Serialization");Sys.Serialization.JavaScriptSerializer=function(){};Sys.Serialization.JavaScriptSerializer.registerClass("Sys.Serialization.JavaScriptSerializer");Sys.Serialization.JavaScriptSerializer._serverTypeFieldName="__type";Sys.Serialization.JavaScriptSerializer._stringRegEx=new RegExp('["\\b\\f\\n\\r\\t\\\\\\x00-\\x1F]',"i");Sys.Serialization.JavaScriptSerializer._dateRegEx=new RegExp('(^|[^\\\\])\\"\\\\/Date\\((-?[0-9]+)(?:[a-zA-Z]|(?:\\+|-)[0-9]{4})?\\)\\\\/\\"',"g");Sys.Serialization.JavaScriptSerializer._jsonRegEx=new RegExp("[^,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]","g");Sys.Serialization.JavaScriptSerializer._jsonStringRegEx=new RegExp('"(\\\\.|[^"\\\\])*"',"g");Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder=function(n,t){t.append(n.toString())};Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder=function(n,t){if(isFinite(n))t.append(String(n));else throw Error.invalidOperation(Sys.Res.cannotSerializeNonFiniteNumbers);};Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder=function(n,t){var u,r;if(t.append('"'),Sys.Serialization.JavaScriptSerializer._stringRegEx.test(n))for(u=n.length,i=0;i<u;++i)if(r=n.charAt(i),r>=" ")(r==="\\"||r==='"')&&t.append("\\"),t.append(r);else switch(r){case"\b":t.append("\\b");break;case"\f":t.append("\\f");break;case"\n":t.append("\\n");break;case"\r":t.append("\\r");break;case"\t":t.append("\\t");break;default:t.append("\\u00");r.charCodeAt()<16&&t.append("0");t.append(r.charCodeAt().toString(16))}else t.append(n);t.append('"')};Sys.Serialization.JavaScriptSerializer._serializeWithBuilder=function(n,t,i,r){var u,f,e,o,h,s;switch(typeof n){case"object":if(n)if(Number.isInstanceOfType(n))Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(n,t);else if(Boolean.isInstanceOfType(n))Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(n,t);else if(String.isInstanceOfType(n))Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(n,t);else if(Array.isInstanceOfType(n)){for(t.append("["),u=0;u<n.length;++u)u>0&&t.append(","),Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(n[u],t,!1,r);t.append("]")}else{if(Date.isInstanceOfType(n)){t.append('"\\/Date(');t.append(n.getTime());t.append(')\\/"');break}f=[];e=0;for(o in n)o.startsWith("$")||(o===Sys.Serialization.JavaScriptSerializer._serverTypeFieldName&&e!==0?(f[e++]=f[0],f[0]=o):f[e++]=o);for(i&&f.sort(),t.append("{"),h=!1,u=0;u<e;u++)s=n[f[u]],typeof s!="undefined"&&typeof s!="function"&&(h?t.append(","):h=!0,Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(f[u],t,i,r),t.append(":"),Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(s,t,i,r));t.append("}")}else t.append("null");break;case"number":Sys.Serialization.JavaScriptSerializer._serializeNumberWithBuilder(n,t);break;case"string":Sys.Serialization.JavaScriptSerializer._serializeStringWithBuilder(n,t);break;case"boolean":Sys.Serialization.JavaScriptSerializer._serializeBooleanWithBuilder(n,t);break;default:t.append("null")}};Sys.Serialization.JavaScriptSerializer.serialize=function(n){var t=new Sys.StringBuilder;return Sys.Serialization.JavaScriptSerializer._serializeWithBuilder(n,t,!1),t.toString()};Sys.Serialization.JavaScriptSerializer.deserialize=function(n,t){if(n.length===0)throw Error.argument("data",Sys.Res.cannotDeserializeEmptyString);try{var i=n.replace(Sys.Serialization.JavaScriptSerializer._dateRegEx,"$1new Date($2)");if(t&&Sys.Serialization.JavaScriptSerializer._jsonRegEx.test(i.replace(Sys.Serialization.JavaScriptSerializer._jsonStringRegEx,"")))throw null;return eval("("+i+")")}catch(r){throw Error.argument("data",Sys.Res.cannotDeserializeInvalidJson);}};Sys.CultureInfo=function(n,t,i){this.name=n;this.numberFormat=t;this.dateTimeFormat=i};Sys.CultureInfo.prototype={_getDateTimeFormats:function(){if(!this._dateTimeFormats){var n=this.dateTimeFormat;this._dateTimeFormats=[n.MonthDayPattern,n.YearMonthPattern,n.ShortDatePattern,n.ShortTimePattern,n.LongDatePattern,n.LongTimePattern,n.FullDateTimePattern,n.RFC1123Pattern,n.SortableDateTimePattern,n.UniversalSortableDateTimePattern]}return this._dateTimeFormats},_getMonthIndex:function(n){return this._upperMonths||(this._upperMonths=this._toUpperArray(this.dateTimeFormat.MonthNames)),Array.indexOf(this._upperMonths,this._toUpper(n))},_getAbbrMonthIndex:function(n){return this._upperAbbrMonths||(this._upperAbbrMonths=this._toUpperArray(this.dateTimeFormat.AbbreviatedMonthNames)),Array.indexOf(this._upperAbbrMonths,this._toUpper(n))},_getDayIndex:function(n){return this._upperDays||(this._upperDays=this._toUpperArray(this.dateTimeFormat.DayNames)),Array.indexOf(this._upperDays,this._toUpper(n))},_getAbbrDayIndex:function(n){return this._upperAbbrDays||(this._upperAbbrDays=this._toUpperArray(this.dateTimeFormat.AbbreviatedDayNames)),Array.indexOf(this._upperAbbrDays,this._toUpper(n))},_toUpperArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i[t]=this._toUpper(n[t]);return i},_toUpper:function(n){return n.split(" ").join(" ").toUpperCase()}};Sys.CultureInfo._parse=function(n){var t=Sys.Serialization.JavaScriptSerializer.deserialize(n);return new Sys.CultureInfo(t.name,t.numberFormat,t.dateTimeFormat)};Sys.CultureInfo.registerClass("Sys.CultureInfo");Sys.CultureInfo.InvariantCulture=Sys.CultureInfo._parse('{"name":"","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":".","IsReadOnly":true,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":",","CurrencySymbol":"¤","NaNSymbol":"NaN","CurrencyNegativePattern":0,"NumberNegativePattern":1,"PercentPositivePattern":0,"PercentNegativePattern":0,"NegativeInfinitySymbol":"-Infinity","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":".","NumberGroupSeparator":",","CurrencyPositivePattern":0,"PositiveInfinitySymbol":"Infinity","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":".","PercentGroupSeparator":",","PercentSymbol":"%","PerMilleSymbol":"‰","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"AM","Calendar":{"MinSupportedDateTime":"@-62135568000000@","MaxSupportedDateTime":"@253402300799999@","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":true},"DateSeparator":"/","FirstDayOfWeek":0,"CalendarWeekRule":0,"FullDateTimePattern":"dddd, dd MMMM yyyy HH:mm:ss","LongDatePattern":"dddd, dd MMMM yyyy","LongTimePattern":"HH:mm:ss","MonthDayPattern":"MMMM dd","PMDesignator":"PM","RFC1123Pattern":"ddd, dd MMM yyyy HH\':\'mm\':\'ss \'GMT\'","ShortDatePattern":"MM/dd/yyyy","ShortTimePattern":"HH:mm","SortableDateTimePattern":"yyyy\'-\'MM\'-\'dd\'T\'HH\':\'mm\':\'ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy\'-\'MM\'-\'dd HH\':\'mm\':\'ss\'Z\'","YearMonthPattern":"yyyy MMMM","AbbreviatedDayNames":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"ShortestDayNames":["Su","Mo","Tu","We","Th","Fr","Sa"],"DayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"AbbreviatedMonthNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"IsReadOnly":true,"NativeCalendarName":"Gregorian Calendar","AbbreviatedMonthGenitiveNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthGenitiveNames":["January","February","March","April","May","June","July","August","September","October","November","December",""]}}');typeof __cultureInfo=="undefined"&&(__cultureInfo='{"name":"en-US","numberFormat":{"CurrencyDecimalDigits":2,"CurrencyDecimalSeparator":".","IsReadOnly":false,"CurrencyGroupSizes":[3],"NumberGroupSizes":[3],"PercentGroupSizes":[3],"CurrencyGroupSeparator":",","CurrencySymbol":"$","NaNSymbol":"NaN","CurrencyNegativePattern":0,"NumberNegativePattern":1,"PercentPositivePattern":0,"PercentNegativePattern":0,"NegativeInfinitySymbol":"-Infinity","NegativeSign":"-","NumberDecimalDigits":2,"NumberDecimalSeparator":".","NumberGroupSeparator":",","CurrencyPositivePattern":0,"PositiveInfinitySymbol":"Infinity","PositiveSign":"+","PercentDecimalDigits":2,"PercentDecimalSeparator":".","PercentGroupSeparator":",","PercentSymbol":"%","PerMilleSymbol":"‰","NativeDigits":["0","1","2","3","4","5","6","7","8","9"],"DigitSubstitution":1},"dateTimeFormat":{"AMDesignator":"AM","Calendar":{"MinSupportedDateTime":"@-62135568000000@","MaxSupportedDateTime":"@253402300799999@","AlgorithmType":1,"CalendarType":1,"Eras":[1],"TwoDigitYearMax":2029,"IsReadOnly":false},"DateSeparator":"/","FirstDayOfWeek":0,"CalendarWeekRule":0,"FullDateTimePattern":"dddd, MMMM dd, yyyy h:mm:ss tt","LongDatePattern":"dddd, MMMM dd, yyyy","LongTimePattern":"h:mm:ss tt","MonthDayPattern":"MMMM dd","PMDesignator":"PM","RFC1123Pattern":"ddd, dd MMM yyyy HH\':\'mm\':\'ss \'GMT\'","ShortDatePattern":"M/d/yyyy","ShortTimePattern":"h:mm tt","SortableDateTimePattern":"yyyy\'-\'MM\'-\'dd\'T\'HH\':\'mm\':\'ss","TimeSeparator":":","UniversalSortableDateTimePattern":"yyyy\'-\'MM\'-\'dd HH\':\'mm\':\'ss\'Z\'","YearMonthPattern":"MMMM, yyyy","AbbreviatedDayNames":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"ShortestDayNames":["Su","Mo","Tu","We","Th","Fr","Sa"],"DayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"AbbreviatedMonthNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthNames":["January","February","March","April","May","June","July","August","September","October","November","December",""],"IsReadOnly":false,"NativeCalendarName":"Gregorian Calendar","AbbreviatedMonthGenitiveNames":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""],"MonthGenitiveNames":["January","February","March","April","May","June","July","August","September","October","November","December",""]}}');Sys.CultureInfo.CurrentCulture=Sys.CultureInfo._parse(__cultureInfo);delete __cultureInfo;Sys.UI.Behavior=function(n){Sys.UI.Behavior.initializeBase(this);this._element=n;var t=n._behaviors;t?t[t.length]=this:n._behaviors=[this]};Sys.UI.Behavior.prototype={_name:null,get_element:function(){return this._element},get_id:function(){var n=Sys.UI.Behavior.callBaseMethod(this,"get_id");return n?n:!this._element||!this._element.id?"":this._element.id+"$"+this.get_name()},get_name:function(){if(this._name)return this._name;var n=Object.getTypeName(this),t=n.lastIndexOf(".");return t!=-1&&(n=n.substr(t+1)),this.get_isInitialized()||(this._name=n),n},set_name:function(n){this._name=n},initialize:function(){Sys.UI.Behavior.callBaseMethod(this,"initialize");var n=this.get_name();n&&(this._element[n]=this)},dispose:function(){if(Sys.UI.Behavior.callBaseMethod(this,"dispose"),this._element){var n=this.get_name();n&&(this._element[n]=null);Array.remove(this._element._behaviors,this);delete this._element}}};Sys.UI.Behavior.registerClass("Sys.UI.Behavior",Sys.Component);Sys.UI.Behavior.getBehaviorByName=function(n,t){var i=n[t];return i&&Sys.UI.Behavior.isInstanceOfType(i)?i:null};Sys.UI.Behavior.getBehaviors=function(n){return n._behaviors?Array.clone(n._behaviors):[]};Sys.UI.Behavior.getBehaviorsByType=function(n,t){var r=n._behaviors,u=[],i,f;if(r)for(i=0,f=r.length;i<f;i++)t.isInstanceOfType(r[i])&&(u[u.length]=r[i]);return u};Sys.UI.VisibilityMode=function(){throw Error.notImplemented();};Sys.UI.VisibilityMode.prototype={hide:0,collapse:1};Sys.UI.VisibilityMode.registerEnum("Sys.UI.VisibilityMode");Sys.UI.Control=function(n){Sys.UI.Control.initializeBase(this);this._element=n;n.control=this};Sys.UI.Control.prototype={_parent:null,_visibilityMode:Sys.UI.VisibilityMode.hide,get_element:function(){return this._element},get_id:function(){return this._element?this._element.id:""},set_id:function(){throw Error.invalidOperation(Sys.Res.cantSetId);},get_parent:function(){if(this._parent)return this._parent;if(!this._element)return null;for(var n=this._element.parentNode;n;){if(n.control)return n.control;n=n.parentNode}return null},set_parent:function(n){this._parent=n},get_visibilityMode:function(){return Sys.UI.DomElement.getVisibilityMode(this._element)},set_visibilityMode:function(n){Sys.UI.DomElement.setVisibilityMode(this._element,n)},get_visible:function(){return Sys.UI.DomElement.getVisible(this._element)},set_visible:function(n){Sys.UI.DomElement.setVisible(this._element,n)},addCssClass:function(n){Sys.UI.DomElement.addCssClass(this._element,n)},dispose:function(){Sys.UI.Control.callBaseMethod(this,"dispose");this._element&&(this._element.control=undefined,delete this._element);this._parent&&delete this._parent},onBubbleEvent:function(){return!1},raiseBubbleEvent:function(n,t){for(var i=this.get_parent();i;){if(i.onBubbleEvent(n,t))return;i=i.get_parent()}},removeCssClass:function(n){Sys.UI.DomElement.removeCssClass(this._element,n)},toggleCssClass:function(n){Sys.UI.DomElement.toggleCssClass(this._element,n)}};Sys.UI.Control.registerClass("Sys.UI.Control",Sys.Component);Type.registerNamespace("Sys");Sys.Res={argumentInteger:"Value must be an integer.",scriptLoadMultipleCallbacks:"The script '{0}' contains multiple calls to Sys.Application.notifyScriptLoaded(). Only one is allowed.",invokeCalledTwice:"Cannot call invoke more than once.",webServiceFailed:"The server method '{0}' failed with the following error: {1}",webServiceInvalidJsonWrapper:"The server method '{0}' returned invalid data. The 'd' property is missing from the JSON wrapper.",argumentType:"Object cannot be converted to the required type.",argumentNull:"Value cannot be null.",controlCantSetId:"The id property can't be set on a control.",formatBadFormatSpecifier:"Format specifier was invalid.",webServiceFailedNoMsg:"The server method '{0}' failed.",argumentDomElement:"Value must be a DOM element.",invalidExecutorType:"Could not create a valid Sys.Net.WebRequestExecutor from: {0}.",cannotCallBeforeResponse:"Cannot call {0} when responseAvailable is false.",actualValue:"Actual value was {0}.",enumInvalidValue:"'{0}' is not a valid value for enum {1}.",scriptLoadFailed:"The script '{0}' could not be loaded.",parameterCount:"Parameter count mismatch.",cannotDeserializeEmptyString:"Cannot deserialize empty string.",formatInvalidString:"Input string was not in a correct format.",invalidTimeout:"Value must be greater than or equal to zero.",cannotAbortBeforeStart:"Cannot abort when executor has not started.",argument:"Value does not fall within the expected range.",cannotDeserializeInvalidJson:"Cannot deserialize. The data does not correspond to valid JSON.",invalidHttpVerb:"httpVerb cannot be set to an empty or null string.",nullWebRequest:"Cannot call executeRequest with a null webRequest.",eventHandlerInvalid:"Handler was not added through the Sys.UI.DomEvent.addHandler method.",cannotSerializeNonFiniteNumbers:"Cannot serialize non finite numbers.",argumentUndefined:"Value cannot be undefined.",webServiceInvalidReturnType:"The server method '{0}' returned an invalid type. Expected type: {1}",servicePathNotSet:"The path to the web service has not been set.",argumentTypeWithTypes:"Object of type '{0}' cannot be converted to type '{1}'.",cannotCallOnceStarted:"Cannot call {0} once started.",badBaseUrl1:"Base URL does not contain ://.",badBaseUrl2:"Base URL does not contain another /.",badBaseUrl3:"Cannot find last / in base URL.",setExecutorAfterActive:"Cannot set executor after it has become active.",paramName:"Parameter name: {0}",cannotCallOutsideHandler:"Cannot call {0} outside of a completed event handler.",cannotSerializeObjectWithCycle:"Cannot serialize object with cyclic reference within child properties.",format:"One of the identified items was in an invalid format.",assertFailedCaller:"Assertion Failed: {0}\r\nat {1}",argumentOutOfRange:"Specified argument was out of the range of valid values.",webServiceTimedOut:"The server method '{0}' timed out.",notImplemented:"The method or operation is not implemented.",assertFailed:"Assertion Failed: {0}",invalidOperation:"Operation is not valid due to the current state of the object.",breakIntoDebugger:"{0}\r\n\r\nBreak into debugger?"};typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();window.getComputedStyle||(window.getComputedStyle=function(n){return n.currentStyle});var getInnerText=function(n){return n.textContent||n.innerText||n.innerHTML||""},getInnerTextFromHtml=function(n){var t=document.createElement("div");return t.innerHTML=n,getInnerText(t)},getEnumValueName=function(n,t){for(var i in n)if(n[i]==t)return i;return""},areObjectsEqual=function(n,t){return JSON.stringify(n)==JSON.stringify(t)};Function.createExclusiveAsyncDelegate=function(n,t,i){var u=Function._validateParams(arguments,[{name:"instance",mayBeNull:!0},{name:"method",type:Function},{name:"delay",type:Number,optional:!0}]);if(u)throw u;var r=null,f=function(){e();var u=arguments;r=setTimeout(function(){t.apply(n,u);r=null},i||0)},e=function(){r&&(clearTimeout(r),r=null)};return f.cancel=e,f};Function.createAsyncDelegate=function(n,t,i){var r=Function._validateParams(arguments,[{name:"instance",mayBeNull:!0},{name:"method",type:Function},{name:"delay",type:Number,optional:!0}]);if(r)throw r;return function(){var r=arguments;setTimeout(function(){t.apply(n,r)},i||0)}};Array.prototype.forEach==null&&(Array.prototype.forEach=function(n){for(var t=0;t<this.length;t++)n.apply(this,[this[t],t,this])});var __BROWSER_IS_TOUCH_ENABLED="ontouchstart"in window,__BROWSER_IS_MOBILE_TABLET=navigator.userAgent.indexOf("Mobile")!=-1||navigator.userAgent.indexOf("Android")!=-1,__BROWSER_EVENT_MOUSEDOWN=__BROWSER_IS_TOUCH_ENABLED?"touchstart":"mousedown",__BROWSER_EVENT_MOUSEMOVE=__BROWSER_IS_TOUCH_ENABLED?"touchmove":"mousemove",__BROWSER_EVENT_MOUSEUP=__BROWSER_IS_TOUCH_ENABLED?"touchend":"mouseup",__BROWSER_EVENT_DOUBLECLICK="dblclick",__BROWSER_EVENT_SELECTSTART="selectstart",__BROWSER_EVENT_DRAGSTART="dragstart",__BROWSER_EVENT_FULLSCREEN_CHANGE="onfullscreenchange"in document?"fullscreenchange":"onmozfullscreenchange"in document?"mozfullscreenchange":"onwebkitfullscreenchange"in document?"webkitfullscreenchange":"onmsfullscreenchange"in document?"MSFullscreenChange":null,__BROWSER_HAS_FULLSCREEN_API=!!__BROWSER_EVENT_FULLSCREEN_CHANGE,__IS_IPAD=navigator.platform.indexOf("iPad")!=-1,__IS_IOS=navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),__DOUBLETAP_DURATION=400,DeviceOrientation={Landscape:1,Portrait:2};Type.registerNamespace("Assima.Controls");Assima$Controls$Splitter.prototype.add_startMoving=function(n){this.get_events().addHandler("startMoving",n)};Assima$Controls$Splitter.prototype.remove_startMoving=function(n){this.get_events().removeHandler("startMoving",n)};Assima$Controls$Splitter.prototype.raiseStartMoving=function(){var n=this.get_events().getHandler("startMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$Splitter.prototype.add_splitterMoved=function(n){this.get_events().addHandler("splitterMoved",n)};Assima$Controls$Splitter.prototype.remove_splitterMoved=function(n){this.get_events().removeHandler("splitterMoved",n)};Assima$Controls$Splitter.prototype.raiseSplitterMoved=function(n,t){var i=this.get_events().getHandler("splitterMoved");i&&i(this,new Assima$Controls$SplitterEventArgs(n,t))};Assima$Controls$Splitter.prototype.add_endMoving=function(n){this.get_events().addHandler("endMoving",n)};Assima$Controls$Splitter.prototype.remove_endMoving=function(n){this.get_events().removeHandler("endMoving",n)};Assima$Controls$Splitter.prototype.raiseEndMoving=function(){var n=this.get_events().getHandler("endMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$Splitter.prototype.initialize=function(){Assima$Controls$Splitter.callBaseMethod(this,"initialize");$addHandler(this._element,"mousedown",this._mouseDownHandler);$addHandler(this._element,"touchstart",this._mouseDownHandler);$addHandler(this._element,"dragStart",this._dragStartHandler);$addHandler(this._element,"selectstart",this._selectStartHandler)};Assima$Controls$Splitter.prototype.dispose=function(){this._element&&($removeHandler(this._element,"mousedown",this._mouseDownHandler),$removeHandler(this._element,"touchstart",this._mouseDownHandler),$removeHandler(this._element,"dragStart",this._dragStartHandler),$removeHandler(this._element,"selectstart",this._selectStartHandler));delete this._mouseDownHandler;delete this._mouseMoveHandler;delete this._mouseUpHandler;delete this._dragStartHandler;delete this._selectStartHandler;Assima$Controls$Splitter.callBaseMethod(this,"dispose")};Assima$Controls$Splitter.prototype._onMouseDown=function(n){this.raiseStartMoving();this._moving=!1;n.type.startsWith("touch")||n.preventDefault();$addHandler(document,"touchmove",this._mouseMoveHandler);$addHandler(document,"mousemove",this._mouseMoveHandler);$addHandler(document,"touchend",this._mouseUpHandler);$addHandler(document,"mouseup",this._mouseUpHandler);this._element.setCapture&&this._element.setCapture();n.stopPropagation()};Assima$Controls$Splitter.prototype._onMouseMove=function(n){if(this._moving||(this._moving=!0,this._overlay=_createOverlay(),document.body.appendChild(this._overlay)),n.type.startsWith("touch")){var t=n.rawEvent;this.raiseSplitterMoved(t.touches[0].pageX,t.touches[0].pageY)}else this.raiseSplitterMoved(n.clientX,n.clientY);n.stopPropagation();n.preventDefault()};Assima$Controls$Splitter.prototype._onMouseUp=function(){this._moving&&(document.body.removeChild(this._overlay),this._overlay=null,this._moving=!1);this._element.releaseCapture&&this._element.releaseCapture();this.raiseEndMoving();$removeHandler(document,"mousemove",this._mouseMoveHandler);$removeHandler(document,"touchmove",this._mouseMoveHandler);$removeHandler(document,"mouseup",this._mouseUpHandler);$removeHandler(document,"touchend",this._mouseUpHandler)};Assima$Controls$Splitter.prototype._onDragStart=function(n){n.stopPropagation();n.preventDefault()};Assima$Controls$Splitter.prototype._onSelectStart=function(n){n.stopPropagation();n.preventDefault()};_createOverlay=function(){var n=document.createElement("div");return n.className="overlay",n.unselectable="on",n};Assima.Controls.Splitter=Assima$Controls$Splitter;Assima$Controls$Splitter.registerClass("Assima.Controls.Splitter",Sys.UI.Control);Assima$Controls$SplitterEventArgs=function(n,t){Assima$Controls$SplitterEventArgs.initializeBase(this);this.posX=n;this.posY=t};Assima.Controls.SplitterEventArgs=Assima$Controls$SplitterEventArgs;Assima$Controls$SplitterEventArgs.registerClass("Assima.Controls.SplitterEventArgs",Sys.EventArgs);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();Type.registerNamespace("Assima.Controls");Assima$Controls$TouchPad.prototype.add_startMoving=function(n){this.get_events().addHandler("startMoving",n)};Assima$Controls$TouchPad.prototype.remove_startMoving=function(n){this.get_events().removeHandler("startMoving",n)};Assima$Controls$TouchPad.prototype._raiseStartMoving=function(){var n=this.get_events().getHandler("startMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$TouchPad.prototype.add_padMoving=function(n){this.get_events().addHandler("padMoving",n)};Assima$Controls$TouchPad.prototype.remove_padMoving=function(n){this.get_events().removeHandler("padMoving",n)};Assima$Controls$TouchPad.prototype._raisePadMoving=function(n,t){var i=this.get_events().getHandler("padMoving");i&&i(this,new Assima$Controls$TouchpadEventArgs(n,t))};Assima$Controls$TouchPad.prototype.add_endMoving=function(n){this.get_events().addHandler("endMoving",n)};Assima$Controls$TouchPad.prototype.remove_endMoving=function(n){this.get_events().removeHandler("endMoving",n)};Assima$Controls$TouchPad.prototype._raiseEndMoving=function(){var n=this.get_events().getHandler("endMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$TouchPad.prototype.add_singletap=function(n){this.get_events().addHandler("singletap",n)};Assima$Controls$TouchPad.prototype.remove_singletap=function(n){this.get_events().removeHandler("singletap",n)};Assima$Controls$TouchPad.prototype._raisesingletap=function(){var n=this.get_events().getHandler("singletap");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$TouchPad.prototype.add_rightClick=function(n){this.get_events().addHandler("rightclick",n)};Assima$Controls$TouchPad.prototype.remove_rightClick=function(n){this.get_events().removeHandler("rightclick",n)};Assima$Controls$TouchPad.prototype._raiseRightClick=function(){var n=this.get_events().getHandler("rightclick");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$TouchPad.prototype.add_doubletap=function(n){this.get_events().addHandler("doubletap",n)};Assima$Controls$TouchPad.prototype.remove_doubletap=function(n){this.get_events().removeHandler("doubletap",n)};Assima$Controls$TouchPad.prototype._raisedoubletap=function(){var n=this.get_events().getHandler("doubletap");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$TouchPad.prototype.add_padScrolling=function(n){this.get_events().addHandler("padScrolling",n)};Assima$Controls$TouchPad.prototype.remove_padScrolling=function(n){this.get_events().removeHandler("padScrolling",n)};Assima$Controls$TouchPad.prototype._raisePadScrolling=function(n,t){var i=this.get_events().getHandler("padScrolling");i&&i(this,new Assima$Controls$TouchpadEventArgs(n,t))};Assima$Controls$TouchPad.prototype.add_gestureForward=function(n){this.get_events().addHandler("gestureforward",n)};Assima$Controls$TouchPad.prototype.remove_gestureForward=function(n){this.get_events().removeHandler("gestureforward",n)};Assima$Controls$TouchPad.prototype._raiseGestureForward=function(n){var t=this.get_events().getHandler("gestureforward");t&&t(this,n)};Assima$Controls$TouchPad.prototype.add_pinchPixels=function(n){this.get_events().addHandler("pinchpixels",n)};Assima$Controls$TouchPad.prototype.remove_pinchPixels=function(n){this.get_events().removeHandler("pinchpixels",n)};Assima$Controls$TouchPad.prototype._raisePinchPixels=function(n){var t=this.get_events().getHandler("pinchpixels");t&&t(this,n)};Assima$Controls$TouchPad.prototype.get_enabled=function(){return this._enabled};Assima$Controls$TouchPad.prototype.set_enabled=function(n){this._enabled!==n&&(this._enabled=n,!n&&this._moving&&(Sys.UI.DomElement.removeCssClass(this._element,"overlay"),$removeHandler(document,"mousemove",this._mouseMoveHandler),$removeHandler(document,"touchmove",this._mouseMoveHandler),$removeHandler(document,"touchend",this._mouseUpHandler),$removeHandler(document,"mouseup",this._mouseUpHandler),this._moving=!1),this.raisePropertyChanged("enabled"))};Assima$Controls$TouchPad.prototype.initialize=function(){Assima$Controls$TouchPad.callBaseMethod(this,"initialize");$addHandler(this._element,"mousedown",this._mouseDownHandler);$addHandler(this._element,"touchstart",this._mouseDownHandler);$addHandler(this._element,"gesturestart",this._gestureForwardHandler);$addHandler(this._element,"gesturechange",this._gestureForwardHandler);$addHandler(this._element,"gestureend",this._gestureForwardHandler);$addHandler(document,"dblclick",this._dblclickHandler)};Assima$Controls$TouchPad.prototype.dispose=function(){this._element&&($removeHandler(this._element,"mousedown",this._mouseDownHandler),$removeHandler(this._element,"touchstart",this._mouseDownHandler),$removeHandler(this._element,"gesturestart",this._gestureForwardHandler),$removeHandler(this._element,"gesturechange",this._gestureForwardHandler),$removeHandler(this._element,"gestureend",this._gestureForwardHandler),$removeHandler(document,"dblclick",this._dblclickHandler));delete this._currentTouchPos;delete this._isSinglePress;delete this._mouseDownHandler;delete this._mouseMoveHandler;delete this._mouseUpHandler;delete this._dblclickHandler;delete this._gestureForwardHandler;delete this._dragStartHandler;delete this._selectStartHandler;delete this._longPressTimeout;delete this._longPressHandler;Assima$Controls$TouchPad.callBaseMethod(this,"dispose")};Assima$Controls$TouchPad.prototype.onMouseDown=function(n){var i,t;if(this._enabled){if(this._rightClicking=n.button==2,this._rightClicking){this._raiseRightClick();return}this._raiseStartMoving();this._moving=!1;i=n.type.startsWith("touch");i?(t=n.rawEvent,this._isSinglePress=t.touches.length==1,this._currentTouchPos.posX=t.touches[0].pageX,this._currentTouchPos.posY=t.touches[0].pageY,this._isGestureSupported||(this._distanceFingers=t.touches.length>1?Math.sqrt(Math.pow(t.touches[1].pageX-t.touches[0].pageX,2)+Math.pow(t.touches[1].pageY-t.touches[0].pageY,2)):0)):(n.preventDefault(),this._isSinglePress=!0,this._currentTouchPos.posX=n.clientX,this._currentTouchPos.posY=n.clientY);$addHandler(document,"touchmove",this._mouseMoveHandler);$addHandler(document,"mousemove",this._mouseMoveHandler);$addHandler(document,"touchend",this._mouseUpHandler);$addHandler(document,"mouseup",this._mouseUpHandler);this._element.setCapture&&this._element.setCapture();n.stopPropagation();i&&(this._longPressDone=!1,this._longPressTimeout=setTimeout(this._longPressHandler,1100))}};Assima$Controls$TouchPad.prototype._onMouseMove=function(n){var i,r,t,u;this._enabled&&!this._rightClicking&&(this._moving||(this._moving=!0,Sys.UI.DomElement.addCssClass(this._element,"overlay")),i=0,r=0,n.type.startsWith("touch")?(t=n.rawEvent,i=t.touches[0].pageX-this._currentTouchPos.posX,r=t.touches[0].pageY-this._currentTouchPos.posY,t.touches.length==1?this._raisePadMoving(i,r):t.touches.length==2&&this._raisePadScrolling(i,r),this._currentTouchPos.posX=t.touches[0].pageX,this._currentTouchPos.posY=t.touches[0].pageY,this._raiseGestureForward(n),!this._isGestureSupported&&t.touches.length>1&&(u=Math.sqrt(Math.pow(t.touches[1].pageX-t.touches[0].pageX,2)+Math.pow(t.touches[1].pageY-t.touches[0].pageY,2)),this._distanceFingers&&this._raisePinchPixels(u-this._distanceFingers),this._distanceFingers=u)):(i=n.clientX-this._currentTouchPos.posX,r=n.clientY-this._currentTouchPos.posY,this._raisePadMoving(i,r),this._currentTouchPos.posX=n.clientX,this._currentTouchPos.posY=n.clientY),(this._isSinglePress&&i!=0||r!=0)&&(this._moveTolerance?((Math.abs(i)>=3||Math.abs(r)>=3)&&(this._isSinglePress=!1),this._moveTolerance=!1):this._isSinglePress=!1),n.preventDefault())};Assima$Controls$TouchPad.prototype.onMouseUp=function(n){var t=n.target==this._element;t&&n.type.startsWith("touch")&&n.rawEvent.touches.length>0||(this._moveTolerance=!0,this._longPressTimeout&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._moving&&(Sys.UI.DomElement.removeCssClass(this._element,"overlay"),this._moving=!1),this._element.releaseCapture&&this._element.releaseCapture(),t&&this._isSinglePress&&!this._longPressDone&&this._raisesingletap(),this._raiseEndMoving(),$removeHandler(document,"mousemove",this._mouseMoveHandler),$removeHandler(document,"touchmove",this._mouseMoveHandler),$removeHandler(document,"touchend",this._mouseUpHandler),$removeHandler(document,"mouseup",this._mouseUpHandler))};Assima$Controls$TouchPad.prototype._onDblClick=function(){this._enabled&&this._raisedoubletap()};Assima$Controls$TouchPad.prototype._onLongPress=function(){this._isSinglePress&&(this._raiseRightClick(),this._longPressDone=!0)};Assima$Controls$TouchPad.prototype._onDragStart=function(n){n.stopPropagation();n.preventDefault()};Assima$Controls$TouchPad.prototype._onSelectStart=function(n){n.stopPropagation();n.preventDefault()};Assima.Controls.TouchPad=Assima$Controls$TouchPad;Assima$Controls$TouchPad.registerClass("Assima.Controls.TouchPad",Sys.UI.Control);Assima$Controls$TouchpadEventArgs=function(n,t){Assima$Controls$TouchpadEventArgs.initializeBase(this);this.offsetX=n;this.offsetY=t};Assima.Controls.TouchpadEventArgs=Assima$Controls$TouchpadEventArgs;Assima$Controls$TouchpadEventArgs.registerClass("Assima.Controls.TouchpadEventArgs",Sys.EventArgs);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();Type.registerNamespace("Assima.Controls");Assima$Controls$ElementMoving.prototype.add_startMoving=function(n){this.get_events().addHandler("startMoving",n)};Assima$Controls$ElementMoving.prototype.remove_startMoving=function(n){this.get_events().removeHandler("startMoving",n)};Assima$Controls$ElementMoving.prototype.raiseStartMoving=function(n){var i=this.get_events().getHandler("startMoving"),t;return i?(t=new Assima.Controls.MoveCancelEventArgs,t.target=n,i(this,t),!t.get_cancel()):!0};Assima$Controls$ElementMoving.prototype.add_elementMoved=function(n){this.get_events().addHandler("elementMoved",n)};Assima$Controls$ElementMoving.prototype.remove_elementMoved=function(n){this.get_events().removeHandler("elementMoved",n)};Assima$Controls$ElementMoving.prototype.raiseElementMoved=function(n,t){var i=this.get_events().getHandler("elementMoved");i&&i(this,new Assima$Controls$ElementMovingEventArgs(n,t))};Assima$Controls$ElementMoving.prototype.add_endMoving=function(n){this.get_events().addHandler("endMoving",n)};Assima$Controls$ElementMoving.prototype.remove_endMoving=function(n){this.get_events().removeHandler("endMoving",n)};Assima$Controls$ElementMoving.prototype.raiseEndMoving=function(){var n=this.get_events().getHandler("endMoving");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$ElementMoving.prototype.add_elementDblClicked=function(n){this.get_events().addHandler("dblclick",n)};Assima$Controls$ElementMoving.prototype.remove_elementDblClicked=function(n){this.get_events().removeHandler("dblclick",n)};Assima$Controls$ElementMoving.prototype.raiseElementDblClicked=function(){var n=this.get_events().getHandler("dblclick");n&&n(this,Sys.EventArgs.Empty)};Assima$Controls$ElementMoving.prototype.initialize=function(){Assima$Controls$ElementMoving.callBaseMethod(this,"initialize");$addHandler(this._element,"touchstart",this._mouseDownHandler);$addHandler(this._element,"mousedown",this._mouseDownHandler);$addHandler(this._element,"dragStart",this._dragStartHandler);$addHandler(this._element,"selectstart",this._selectStartHandler);$addHandler(this._element,__BROWSER_EVENT_DOUBLECLICK,this._dblClickHandler)};Assima$Controls$ElementMoving.prototype.dispose=function(){this._element&&($removeHandler(this._element,"touchstart",this._mouseDownHandler),$removeHandler(this._element,"mousedown",this._mouseDownHandler),$removeHandler(this._element,"dragStart",this._dragStartHandler),$removeHandler(this._element,"selectstart",this._selectStartHandler),$removeHandler(this._element,__BROWSER_EVENT_DOUBLECLICK,this._dblClickHandler));delete this._currentTouchPos;delete this._mouseDownHandler;delete this._mouseMoveHandler;delete this._mouseUpHandler;delete this._dblClickHandler;delete this._dragStartHandler;delete this._selectStartHandler;Assima$Controls$ElementMoving.callBaseMethod(this,"dispose")};Assima$Controls$ElementMoving.prototype._onMouseDown=function(n){var i=this.raiseStartMoving(n.target),t;(n.type.startsWith("touch")?(t=n.rawEvent,this._currentTouchPos.posX=t.touches[0].pageX,this._currentTouchPos.posY=t.touches[0].pageY):(n.preventDefault(),this._currentTouchPos.posX=n.clientX,this._currentTouchPos.posY=n.clientY),this._moving=!1,i)&&($addHandler(document,"touchmove",this._mouseMoveHandler),$addHandler(document,"mousemove",this._mouseMoveHandler),$addHandler(document,"touchend",this._mouseUpHandler),$addHandler(document,"mouseup",this._mouseUpHandler),this._element.setCapture&&this._element.setCapture(),n.stopPropagation())};Assima$Controls$ElementMoving.prototype._onDblClick=function(n){n.preventDefault();this.raiseEndMoving();$removeHandler(document,"touchmove",this._mouseMoveHandler);$removeHandler(document,"mousemove",this._mouseMoveHandler);$removeHandler(document,"touchend",this._mouseUpHandler);$removeHandler(document,"mouseup",this._mouseUpHandler);this.raiseElementDblClicked()};Assima$Controls$ElementMoving.prototype._onMouseMove=function(n){var t,r,i;this._moving||(this._moving=!0,this._overlay=_createOverlay(),document.body.appendChild(this._overlay));t={x:0,y:0};n.type.startsWith("touch")?(r=n.rawEvent,t.x=r.touches[0].pageX,t.y=r.touches[0].pageY):(t.x=n.clientX,t.y=n.clientY);i={x:this._currentTouchPos.posX-t.x,y:this._currentTouchPos.posY-t.y};(i.x!=0||i.y!=0)&&this.raiseElementMoved(i.x,i.y);this._currentTouchPos.posX=t.x;this._currentTouchPos.posY=t.y;n.stopPropagation();n.preventDefault()};Assima$Controls$ElementMoving.prototype._onMouseUp=function(){this._moving&&(document.body.removeChild(this._overlay),this._overlay=null,this._moving=!1);this._element.releaseCapture&&this._element.releaseCapture();this.raiseEndMoving();$removeHandler(document,"mousemove",this._mouseMoveHandler);$removeHandler(document,"touchmove",this._mouseMoveHandler);$removeHandler(document,"mouseup",this._mouseUpHandler);$removeHandler(document,"touchend",this._mouseUpHandler)};Assima$Controls$ElementMoving.prototype._onDragStart=function(n){n.stopPropagation();n.preventDefault()};Assima$Controls$ElementMoving.prototype._onSelectStart=function(n){n.stopPropagation();n.preventDefault()};_createOverlay=function(){var n=document.createElement("div");return n.className="overlay",n.unselectable="on",n};Assima.Controls.ElementMoving=Assima$Controls$ElementMoving;Assima$Controls$ElementMoving.registerClass("Assima.Controls.ElementMoving",Sys.UI.Control);Assima$Controls$ElementMovingEventArgs=function(n,t){Assima$Controls$ElementMovingEventArgs.initializeBase(this);this.offsetX=n;this.offsetY=t};Assima.Controls.ElementMovingEventArgs=Assima$Controls$ElementMovingEventArgs;Assima$Controls$ElementMovingEventArgs.registerClass("Assima.Controls.ElementMovingEventArgs",Sys.EventArgs);typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded();Controller||(Controller={_player:null,_simulator:null,_state:null,_log:[],Actions:{Hints:1,Camera:2,HistoryBack:3,HistoryForward:4,TrackPad_LeftClick:5,TrackPad_DoubleLeftClick:6,TrackPad_RightClick:7},States:{Visible:1,Hidden:2,Disabled:3},MessageTypes:{Default:1,Modal:2,Timer:3,Statement:4,Hints:5,Camera:6,Trigger_OnInfo:7,Trigger_OnError:8,Trigger_OnMouseOver:9},SoundPlayTypes:{StartPlayingEveryTimeMessageIsShown:1,StartPlayingFirstTimeMessageIsShown:2,StartPlayingEveryTimeMessageIsShownStopWhenHidden:3,StartPlayingFirstTimeMessageIsShownStopWhenHidden:4},MousePointerTypes:{Pointer:1,SingleLeftClick:2,DoubleLeftClick:3,RightClick:4,KeyPress:5,TabletScrollHorizontal:6,TabletScrollVertical:7,LeftDown:8,LeftMove:9,LeftUp:10},LogEventTypes:{State:1,Message:2,TriggerMessage:3,ScoreMessage:4,ControllerAction:5,Focus:6,Zoom:7,KeyDown:8,GoTo:9,SimulatorEvent:10},NavigationModes:{NavigateHistory:1,FreeNavigation:2,NoNavigation:3},MousePointerAnimationDuration:2500,registerPlayer:function(n){this._player=n},registerSimulator:function(n){if(this._simulator=n,this._player)this._player.onRegisterSimulator(n)},getZoomState:function(){return this._player.getZoomState()},setState:function(n){this._state=n;this._player.update(n);this._logEvent(Controller.LogEventTypes.State,n)},showMessage:function(n){this._player.showMessage(n);this._logEvent(Controller.LogEventTypes.Message,n)},showTriggerMessage:function(n){this._player.showTriggerMessage(n);this._logEvent(Controller.LogEventTypes.TriggerMessage,n)},showScoreMessage:function(n){this._player.showScoreMessage(n);this._logEvent(Controller.LogEventTypes.ScoreMessage,n)},setTaskBarFocus:function(n){this._player.setTaskBarFocus(n)},showMousePointer:function(n){this._player.showMousePointer(n)},moveMouseTo:function(n,t){this._player.moveMousePointerTo(n,t)},setMousePointerType:function(n){return this._player.setMousePointerType(n),Controller.MousePointerAnimationDuration},notifyCameraState:function(n){return this._player.cameraStateChanged(n)},notifyOnScrollResize:function(){this._player.simulationScrollResize()},notifySimulationInputFocused:function(n){this._player.simulationInputFocused(n)},notifySimulationInputBlurred:function(n){this._player.simulationInputBlurred(n)},getLaserStartPoint:function(){return this._player.getLaserStartPoint()},isBusy:function(){return this._player.isBusy()},getResumeData:function(){return this._player.getWebIntResumeData()},notifyHistoryState:function(n){this._player.historyUpdated(n)},notifyOnActionRectangleChanged:function(n){this._player.onActionRectangleChanged(n)},notifyLogEvent:function(n,t){this._logEvent(Controller.LogEventTypes.SimulatorEvent,{Type:n,Data:t});n=="InvalidAction"&&this._player.showInvalidAction()},notifyWait:function(n,t){this._player.wait(n,t)},getUserName:function(){return this._player.getUserName()},execute:function(n){this._logEvent(Controller.LogEventTypes.ControllerAction,n);this._simulator.NotifyControllerAction(n)},setFocus:function(n){this._logEvent(Controller.LogEventTypes.Focus,n);this._simulator.NotifyControllerSetFocus(n)},getScore:function(){return this._simulator.NotifyControllerGetScore()},setZoomState:function(n){this._logEvent(Controller.LogEventTypes.Zoom,n);this._simulator.NotifyControllerSetZoomState(n)},setMousePosition:function(n){this._player.hideElementsAboveSimulator();var t=this._simulator.NotifyControllerMousePosition(n);return this._player.restoreElementsAboveSimulator(),t},executeKeyDown:function(n){this._logEvent(Controller.LogEventTypes.KeyDown,n);this._simulator.NotifyControllerKeyPress(n)},notifyKeyDown:function(n){this._simulator.NotifyControllerKeyDown(n)},requestTriggerData:function(n){return this._simulator.NotifyControllerRequestTriggerData(n)},requestResumeData:function(){return this._simulator.NotifyControllerRequestResumeData()},moveToIndex:function(n){this._logEvent(Controller.LogEventTypes.GoTo,n);this._simulator.NotifyMoveToIndex(n)},isQA:function(){return this._simulator.NotifyControllerRequestIsQA()},blockUserInteraction:function(n){this._simulator.BlockUserInteraction(n)},isUserInteractionBlocked:function(){this._simulator.UserInteractionBlocked()},rearrangeForms:function(n){this._simulator.NotifyControllerRequestRearrangeForms(n)},resizeForm:function(n,t,i,r,u){this._simulator.NotifyControllerRequestResizeForm(n,t,i,r,u)},getSimulationDisplayRect:function(n){return this._simulator.Position_GetDisplayRect(n)},getScreenIdForObjectId:function(n){return this._simulator.GetScreenIdForObjectId(n)},getSimulatorDisplayPanel:function(){return this._simulator.GetDisplayPanel()},forwardGestureEvent:function(n){this._simulator.ForwardGestureEvent(n)},forwardZoomPixels:function(n){this._simulator.ForwardZoomPixels(n)},_logEvent:function(n,t){this._log.push(this._createLogEvent(n,t))},getLog:function(){return this._log},createTrackPadInfo:function(){return trackPadInfo={HorizontalScrollHTML:!1,VerticalScrollHTML:!1}},createZoomState:function(){return zoomState={FitToWindow:!0,Scale:1}},createState:function(){return newState={MessageButton:this.States.Hidden,HintsButton:this.States.Hidden,CameraButton:this.States.Hidden,CameraPauseButton:this.States.Hidden,StatementButton:this.States.Hidden,InformationButton:this.States.Hidden,AudioButton:this.States.Hidden,ActualSizeButton:this.States.Visible,MouseButton:this.States.Hidden,KeyboardButton:this.States.Hidden,SettingsButton:this.States.Visible,ExitButton:this.States.Visible,PreviousButton:this.States.Hidden,NextButton:this.States.Hidden,EditButton:this.States.Hidden,FullScreenButton:__BROWSER_HAS_FULLSCREEN_API?this.States.Visible:this.States.Hidden,TaskBar:this.States.Visible,TaskBarCaptions:[],TaskBarFocusedId:-1,ShowSlider:!1,ProgressBarCurrent:0,ProgressBarMax:0,ScreenMessages:[],StatementMessage:!1,BlockControl:!1,KeyboardShortCuts:[],TriggersData:{},IsSandboxBehavior:!1,NavigationMode:this.NavigationModes.NavigateHistory,IsMovieMode:!1,SimId:"",SimStateUID:"",TutId:"",CaptureInformation:{browserName:"",browserUserAgent:"",browserVersion:""}}},createMsg:function(){var n=function(){return msgCopy={Id:this.Id,HTMLText:this.HTMLText,Type:this.Type,TimeToDisplay:this.TimeToDisplay,SoundFile:this.SoundFile,SoundFilePlayType:this.SoundFilePlayType,Positioning:this.Positioning,Referential:this.Referential,Location:this.Location,Size:this.Size,Clone:this.Clone}};return newMessage={Id:"",HTMLText:"",Type:this.MessageTypes.Default,TimeToDisplay:0,SoundFile:!1,SoundFilePlayType:this.SoundPlayTypes.StartPlayingEveryTimeMessageIsShown,Positioning:"Follow",Referential:"TopLeft",Location:{x:-1,y:-1},Size:{w:-1,h:-1},Clone:n}},createTriggerMsg:function(){return newTriggerMessage={Message:null,DisplayRect:null,TriggerData:null,ClickPoint:null}},getCameraParameters:function(){return{OverlayTime:900,OverlayHighlightTime:700,OverlayColourData:"#222222",OverlayColourAction:"#222222",OverlayColourError:"#222222",OverlayColourMouseOver:"#222222",OverlayColourInfo:"#222222",OverlayOpacity:80,LaserThickness:3,LaserSpeed:360,LaserBlinks:2,LaserHighlightTime:2e3,LaserColourData:"#0267C1",LaserColourAction:"#0267C1",LaserColourError:"#00C90A",LaserColourMouseOver:"#0267C1",LaserColourInfo:"#0267C1",MouseSpeed:360}},createScoreData:function(){return data={CorrectActionsCount:0,ErrorsCount:0,HintsRequestsCount:0,CameraRequestsCount:0,ScoreCalculated:0,ScoreRaw:0,States_Current:0,States_Count:0,States_Total:0,LessonTime:0,LessonCompleted:!1}},createHistoryData:function(){return data={CurrentStateIndex:0,MaxStateIndex:0,StartIndex:0,LastLoadedStateIndex:0,MessageList:[]}},_createLogEvent:function(n,t){return{Date:new Date,Type:n||0,Data:t||null}}});Player||(Player={});Sys.Application.add_init(function(){var r=document.getElementsByName("viewport")[0],n,t,i;if(r.setAttribute("content","initial-scale=1, maximum-scale=1, user-scalable=0"),n="",t="",Sys.Browser.agent){switch(Sys.Browser.agent){case Sys.Browser.InternetExplorer:n="ie";break;case Sys.Browser.Firefox:n="firefox";break;case Sys.Browser.Safari:n="safari";break;case Sys.Browser.Opera:n="opera"}t=n+Sys.Browser.version}else n="ie",t="ie11";i=document.documentElement;i.className+=" "+n+" "+t+" "+navigator.platform;__IS_IOS&&(i.className+=" iOS");__BROWSER_IS_MOBILE_TABLET&&(i.className+=" mobile_tablet")});Sys.Application.add_load(function(){document.body.className+=" text medium";document.body.className+=__BROWSER_IS_TOUCH_ENABLED?" touch":" notouch";Controller.registerPlayer(Player);Player.initialize()});Player.Views={Loading:1,NotStarted:2,Suspended:3,Started:4,Running:5,Saving:6,Finished:7,Initializing:8};Player.Resources={AudioInstructionsTouch:"There is audio available on this screen. Each time you encounter a blinking audio icon, you can tap it to start playing.",Back:"Back",CannotPlay:"The lesson cannot be played in the current environment. Please contact your administrator.\r\n\r\nUser-Agent: {0}\r\nURL: {1}",Comment:"Comment",DoIt:"Do it",ExitConfirmMsg:"This will close the lesson.\r\nAre you sure you want to continue?",InvalidAction:"The action cannot be played. Please make sure it is valid.",Key_LButton:"Left Button",Key_RButton:"Right Button",Key_MButton:"Middle Button",Key_Cancel:"Cancel",Key_Backspace:"Backspace",Key_Tab:"Tab",Key_Clear:"Clear",Key_Enter:"Enter",Key_Shift:"Shift",Key_Control:"Ctrl",Key_Alt:"Alt",Key_PAUSE:"Pause",Key_CapsLock:"Caps Lock",Key_Escape:"Escape",Key_SPACEBAR:"Spacebar",Key_PgUp:"Page Up",Key_PgDown:"Page Down",Key_End:"End",Key_Home:"Home",Key_Left:"Left arrow",Key_Up:"Up arrow",Key_Right:"Right arrow",Key_Down:"Down arrow",Key_Select:"Select",Key_PrintScreen:"Print Screen",Key_Execute:"Execute",Key_Snapshot:"Snapshot",Key_Insert:"Insert",Key_Delete:"Delete",Key_Help:"Help",Key_LWin:"Windows (Left)",Key_RWin:"Windows (Right)",Key_Apps:"Apps",Key_Multiply:"*",Key_Add:"+",Key_Separator:"|",Key_Subtract:"gSimulationTutorial_Key_Subtract",Key_Decimal:"Decimal",Key_Divide:"/",Key_NumLock:"Num Lock",Key_ScrollLock:"Scroll Lock",Key_OEM_Plus:"+",Key_OEM_Comma:",",Key_OEM_Minus:"gSimulationTutorial_Key_Subtract",Key_OEM_Period:".",Key_ProcessKey:"Process Key",Message:"Message",NoMessage:"No message",OK:"OK",Overview:"Overview",PlayPauseAudio:"Play / Pause audio",PlayPauseCamera:"Play / Pause the camera",Screen:"Screen {0}",ScreenProgress:"Screen {0} of {1}",ShowMe:"Show me",Statement:"Lesson Overview",StatusPassed:"Passed",StatusFailed:"Failed",UnspecifiedError:"An unspecified error occured.",SoundPlaying:"Sound Playing",SoundStopped:"Sound Paused",ScreenOptimizedForChrome:"This screen is optimized for Google Chrome.",ScreenOptimizedForFirefox:"This screen is optimized for Mozilla Firefox.",ScreenOptimizedForMsEdge:"This screen is optimized for Microsoft Edge.",ExperienceDegraded:"The experience might be degraded in other browsers."};Player.URL_PARAM_STARTID="startid";Player.URL_PARAM_STARTINDEX="startindex";Player.URL_PARAM_SCORE="score";Player.URL_PARAM_RESUME="resume";Player.URL_PARAM_STEP="step";Player.URL_PARAM_REVIEWMODE="reviewmode";Player.URL_PARAM_EDIT="edit";Player.URL_PARAM_FULLNAVIGATION="fullnavigation";Player.THRESHOLD_UNLOCK_MS=1500;Player.TRIGGER_OBJECT_ID_PREFIX="triggerObj";TriggerTypes={OnInfo:0,OnMouseOver:1,OnError:2,Count:3};Player.MESSAGEPOPUP_MIN_WIDTH=140;Player.MESSAGEPOPUP_MIN_HEIGHT=100;Player.MESSAGEBOX_MIN_WIDTH=100;Player.MESSAGEBOX_MIN_HEIGHT=100;Player.MESSAGE_OPACITY=85;Player.MESSAGE_OPACITY_RESET_TIME=5;Player.MESSAGE_OPACITY_ANIMATION_SPEED=30;Player.DISPLAY_TRIGGERS_IN_PLACE=!0;Player.SMALL_RESOLUTION_WIDTH=768;Player.TRIGGER_ARROW_SIZE=5;Player.TRIGGER_POSITION_OBJECT_SIZE_THRESHOLD=200;TutorialMessageInfo=function(){this.Type=null;this.Message=null;this.Clear=function(){this.Type=null;this.Message=null}};ElementOpacityAnimationInfo=function(n){this.element=n;this.timeoutid=null;this.resetOpacityHandler=null;this.userMouseOutside=!0;this.elementmoving=!1;this.resetOpacityHandler=Function.createDelegate(this,function(){Player._resetElementOpacity(this)});__IS_IOS||($addHandler(n,"mouseover",Function.createDelegate(this,function(){Player._onMouseOverMessage(this)})),$addHandler(n,"mouseout",Function.createDelegate(this,function(){Player._onMouseOutMessage(this)})))};Player.initialize=function(){this._url=Assima.Url.parseString(window.location);this._initializeDomElements();this._initializeControls();this._initializeUserSelections();this._initializeState();this._initializeSession()};Player._initializeSession=function(){var u=!1,i,n;try{i=window.opener||window.parent;u=i&&i!=window&&!i.closed&&(i.DoTerminateScore||i.ShowHTMLScore)}catch(o){}if(this._lessonLocation=null,!u)if(n=Scorm2004.getApi(),n){if(n.Initialize("").toString()=="true"){this._scorm=n;var r=Scorm2004.Cmi,f=Scorm2004.CmiVocabulary,t=null,e=n.GetValue(r.Entry);if(!0&&e==f.Entry.Resume){if(t=n.GetValue(r.SuspendData),t)try{t=JSON.parse(LZString.decompressFromUTF16(t))}catch(o){t=null}window.ResumeData=this._resumeData=t}if(this._resumeData){this._setView(Player.Views.Suspended);return}}}else if(n=Scorm12.getApi(),n&&n.LMSInitialize("").toString()=="true"){this._scorm=n;var r=Scorm12.Cmi,f=Scorm12.CmiVocabulary,t=null,e=n.LMSGetValue(r.Core.Entry);if(!0&&e==f.Entry.Resume){if(t=n.LMSGetValue(r.SuspendData),t)try{t=JSON.parse(LZString.decompressFromEncodedURIComponent(t))}catch(o){t=null}window.ResumeData=this._resumeData=t}if(this._resumeData){this._setView(Player.Views.Suspended);return}}this._url.getParam(Player.URL_PARAM_STARTID)?this._lessonLocation={screenId:this._url.getParam(Player.URL_PARAM_STARTID),stepCount:parseInt(this._url.getParam(Player.URL_PARAM_STARTINDEX))||0,rawScore:parseInt(this._url.getParam(Player.URL_PARAM_SCORE))||0}:this._url.getParam(Player.URL_PARAM_RESUME)&&(this._lessonLocation={screenId:this._url.getParam(Player.URL_PARAM_RESUME),stepCount:parseInt(this._url.getParam(Player.URL_PARAM_STEP))||0,rawScore:this._url.getParam(Player.URL_PARAM_SCORE)||0});this._lessonLocation?this.play(this._lessonLocation):this.start()};Player._finalizeSession=function(n,t,i,r,u,f,e,o,s,h,c,l,a){var w,k,d,tt,it,v,b,ot,rt,ut,nt,y,p,g;try{if(w=window.opener||window.parent,w&&w!=window&&!w.closed&&(k=w.DoTerminateScore,k&&k(n,i,r,u,f,h?-1:e,o,s,h,c,l,a),d=w.ShowHTMLScore,d&&d(n,i,r,u,f,h?-1:e,o,s,h,c,l,a),tt=w.ApplyLiveEditorChanges,tt&&(it=this._formatEditorChanges(),it&&tt(it)),k||d)){this._setView(Player.Views.Finished);return}}catch(st){}if(v=this._scorm,v){if(v==Scorm2004.api){this._setView(Player.Views.Saving);var y=Scorm2004.Cmi,p=Scorm2004.CmiVocabulary,ft=v.GetValue(y.Interactions.Count),et=this._logToScormInteractions(a,ft);for(b=0,ot=et.length;b<ot;b++){rt=et[b];for(ut in rt)v.SetValue(String.format(ut,ft+b),rt[ut])}if(h)v.GetValue(y.Credit)==p.Credit.Credit&&(!0&&(v.SetValue(y.Score.Min,0),v.SetValue(y.Score.Max,100),v.SetValue(y.Score.Raw,+t.toFixed(7)),v.SetValue(y.Score.Scaled,+(t/100).toFixed(7))),!0&&(g=t>=v.GetValue(y.ScaledPassingScore)*100,v.SetValue(y.SuccessStatus,g?p.SuccessStatus.Passed:p.SuccessStatus.Failed))),!0&&(v.SetValue(y.CompletionStatus,p.CompletionStatus.Completed),v.SetValue(y.ProgressMeasure,1)),!0&&v.SetValue(y.SuspendData,""),v.SetValue(y.Exit,p.Exit.Normal);else{if(1){if(l)try{l=LZString.compressToUTF16(l)}catch(st){}v.SetValue(y.SuspendData,l)}!0&&(v.SetValue(y.CompletionStatus,p.CompletionStatus.Incomplete),v.SetValue(y.ProgressMeasure,+(o/c).toFixed(7)));v.SetValue(y.Exit,p.Exit.Suspend)}!0&&(nt=s.split(":"),v.SetValue(y.SessionTime,"PT"+nt[0]+"H"+nt[1]+"M"+nt[2]+"S"));!0&&v.SetValue("adl.nav.request","exit");this._closeScormSession()}else if(v==Scorm12.api){if(this._setView(Player.Views.Saving),y=Scorm12.Cmi,p=Scorm12.CmiVocabulary,h)v.LMSGetValue(y.Core.Credit)==p.Credit.Credit?(!0&&(v.LMSSetValue(y.Core.Score.Min,0),v.LMSSetValue(y.Core.Score.Max,100),v.LMSSetValue(y.Core.Score.Raw,Math.round(t))),g=t>=v.LMSGetValue(y.StudentData.MasteryScore),v.LMSSetValue(y.Core.LessonStatus,g?p.LessonStatus.Passed:p.LessonStatus.Failed)):!0&&v.LMSSetValue(y.Core.LessonStatus,p.LessonStatus.Completed),!0&&v.LMSSetValue(y.SuspendData,""),v.LMSSetValue(y.Core.Exit,p.Exit.Empty);else{if(1){if(l)try{l=LZString.compressToEncodedURIComponent(l)}catch(st){}v.LMSSetValue(y.SuspendData,l&&l.length<=4096?l:"")}!0&&v.LMSSetValue(y.Core.LessonStatus,p.LessonStatus.Incomplete);v.LMSSetValue(y.Core.Exit,p.Exit.Suspend)}!0&&v.LMSSetValue(y.Core.SessionTime,s);this._closeScormSession()}}else window==window.top?this._setView(Player.Views.Finished):this._setView(h?Player.Views.NotStarted:Player.Views.Suspended)};Player._closeScormSession=function(){var n=this._scorm;n&&(n==Scorm2004.api?(n.Commit(""),n.Terminate("")):(n.LMSCommit(""),n.LMSFinish("")),delete this._scorm,delete this._lessonLocation,this._setView(Player.Views.Finished))};Player._logToScormInteractions=function(n,t){for(var r,k,l,c,tt,ot,g,ct,e,y,d,h,vt,p=Controller.LogEventTypes,yt=Scorm2004.CmiVocabulary,pt=Scorm2004.Cmi,wt=pt.Interactions,s=wt.N,w=[],v=0,f=null,ut=null,a=0,ft=n.length;a<ft;a++){r=n[a];switch(r.Type){case p.State:var et="",b=r.Data,nt=b.TaskBarCaptions,bt=b.TaskBarFocusedId;for(e=nt.length;e--;)if(nt[e].Id==bt){et=nt[e].Name;break}f[s.Id]+="-"+et.replace(/\s/g,"_");k=b.ScreenMessages[b.ScreenMessages.length-1];h=k&&k.HTMLText&&getInnerTextFromHtml(k.HTMLText);h&&(f[s.Description]+=" - "+h);break;case p.ControllerAction:this._addUniqueLearnerResponseToScormInteraction(f,r.Date,getEnumValueName(Controller.Actions,r.Data));break;case p.GoTo:this._addUniqueLearnerResponseToScormInteraction(f,r.Date,"GoTo "+r.Data);break;case p.SimulatorEvent:l=r.Data;c=l.Data;switch(l.Type){case"StateEntering":for(f={},f[s.Id]=t+v+1,f[s.Type]=yt.Interactions.N.Type.Performance,f[s.Timestamp]=Scorm2004.dateToTimeString(r.Date),f[s.Description]=String.format(Player.Resources.Screen,c.StateNumber),tt=c.Data,e=0,ot=tt.length;e<ot;e++){var it=tt[e],d=it.DesignerName||"UnidentifiedObject",st=it.EventName||"UnknownEvent",h=String.format("{0}.{1}",d,st),ht=it.UserDatas,rt=[];for(g=0,ct=ht.length;g<ct;g++){var lt=ht[g],o=lt.DesignerName||"UnidentifiedObject",at=lt.ExpectedRule,i=at.RuleData,u="";switch(at.RuleComparison){case 0:u=String.format("{0} = {1}",o,i.join(", "));break;case 1:u=String.format("{0} <= {1}",o,i.join(", "));break;case 2:u=String.format("{0} < {1}",o,i.join(", "));break;case 3:u=String.format("{0} >= {1}",o,i.join(", "));break;case 4:u=String.format("{0} > {1}",o,i.join(", "));break;case 5:u=String.format("{0} != {1}",o,i.join(", "));break;case 6:u=String.format("{1} <= {0} <= {2}",o,i[0],i[1]);break;case 7:u=String.format("{1} < {0} < {2}",o,i[0],i[1]);break;case 8:u=String.format("{0} <= {1} || {0} >= {2}",o,i[0],i[1]);break;case 9:u=String.format("{0} < {1} || {0} > {2}",o,i[0],i[1]);break;case 10:u=String.format("{0} in {1}",o,i.join(", "));break;case 11:u=String.format("{0} = {1}",o,i.join(", "));break;case 12:u=String.format("{0} contains {1}",o,i.join(", "));break;case 13:u=String.format("{0} does not contain {1}",o,i.join(", "))}rt.push(u)}rt.length&&(h=String.format("{0}[{1}]",h,rt.join(" && ")));f[String.format(s.CorrectResponses.N.Pattern,"{0}",e)]="[.]"+h}w[v++]=f;ut=r.Date;break;case"UserEnteredData":for(e=a+1;e<ft;e++){if(y=n[e],y.Type!=r.Type||y.Data.Type!=l.Type||y.Data.Data.Name!=c.Name)break;a=e;r=y;l=r.Data;c=l.Data}d=c.Name||"UnidentifiedObject";h=String.format("{0} = {1}",d,c.Data);this._addUniqueLearnerResponseToScormInteraction(f,r.Date,h);break;case"ActionCorrect":case"ActionBadData":case"TriggerPenalty":case"TriggerError":case"TriggerInfo":case"TriggerMouseOver":var d=c.DesignerName||"UnidentifiedObject",st=c.EventName||"UnknownEvent",h=String.format("{1}.{2} => {0}",l.Type,d,st);this._addUniqueLearnerResponseToScormInteraction(f,r.Date,h);break;case"HintsTriggered":case"PlaybackTriggered":this._addUniqueLearnerResponseToScormInteraction(f,r.Date,l.Type);break;case"StateLeaving":v>0&&(vt=r.Date.getTime()-ut.getTime(),w[v-1][s.Latency]=Scorm2004.millisecondsToTimeIntervalString(vt),w[v-1][s.Result]=this._getPreviousInteractionResultFromLog(n,a))}}}return w};Player._usedScormIds={};Player._scormIdFromDate=function(n){for(var i=Scorm2004.dateToTimeString(n),t=i,r=0;this._usedScormIds[t];r++)t=i+"_"+(r+1);return this._usedScormIds[t]=!0,t};Player._addUniqueLearnerResponseToScormInteraction=function(n,t,i){Player._addLearnerResponseToScormInteraction(n,Player._scormIdFromDate(t),i)};Player._addLearnerResponseToScormInteraction=function(n,t,i){var u=Scorm2004.Cmi.Interactions.N.LearnerResponse,r=n[u]||"";r&&(r+="[,]");r+=(t||"")+"[.]"+(i||"");n[u]=r};Player._getPreviousInteractionResultFromLog=function(n,t){for(var i=t;i--;)switch(n[i].Type){case Controller.LogEventTypes.ControllerAction:switch(n[i].Data){case Controller.Actions.Camera:return Scorm2004.CmiVocabulary.Interactions.N.Result.Incorrect;case Controller.Actions.HistoryBack:case Controller.Actions.HistoryForward:return Scorm2004.CmiVocabulary.Interactions.N.Result.Neutral}break;case Controller.LogEventTypes.GoTo:return Scorm2004.CmiVocabulary.Interactions.N.Result.Neutral;case Controller.LogEventTypes.Message:switch(n[i].Data.Type){case Controller.MessageTypes.Camera:return Scorm2004.CmiVocabulary.Interactions.N.Result.Incorrect}break;case Controller.LogEventTypes.State:return Scorm2004.CmiVocabulary.Interactions.N.Result.Correct}return Scorm2004.CmiVocabulary.Interactions.N.Result.Unanticipated};Player._initializeDomElements=function(){this._actualSizeButton=$get("actualSizeButton");this._audioBar=$get("audioBar");this._audioButton=$get("audioButton");this.audioButtonENoteUndocked=$get("speakerIconPopup");this.audioButtonENoteDocked=$get("messageBoxSpeaker");this._audioInstructions=$get("audioInstructions");this._cameraActionButton=$get("cameraActionButton");this._cancelCommentEditLink=$get("cancelCommentEditLink");this._closeCommentButton=$get("closeCommentButton");this._comment=$get("comment");this._commentArrow=$get("commentArrow");this._cursorSimulation=$get("cursorSimulation");this._dockingCheckbox=$get("dockingCheckbox");this._editButton=$get("editButton");this._editComment=$get("editComment");this._exitButton=$get("exitButton");this._editor=$get("editor");this._fontList=$get("fontList");this._fullScreenButton=$get("fullScreenButton");this._glassPane=$get("glassPane");this._groupSettings=$get("groupSettings");this._keyboard=$get("keyboard");this._keyboardButton=$get("keyboardButton");this._keyboardMouseGrip=$get("grip");this._messageBox=$get("messageBox");this._messageBoxFooter=$get("messageBoxFooter");this._messageBoxText=$get("messageBoxText");this._messageBoxTitleBar=$get("messageBoxTitleBar");this._messageBoxTitleText=$get("messageBoxTitleText");this._messageButton=$get("messageButton");this._messageContent=$get("messageContent");this._messagePopup=$get("messagePopup");this._messagePopupTransparency=$get("messagePopupTransparency");this._messagePopupWindow=$get("messagePopupWindow");this._messageSplitter=$get("messageSplitter");this._messageTutorialPaneText=$get("messageTutorialPaneText");this._mouseButton=$get("mouseButton");this._navigationBar=$get("navigationBar");this._navigationScreen=$get("navigationScreen");this._nextButton=$get("nextButton");this._nextButtonMessageBox=$get("nextButtonMessageBox");this._nextTriggerMessage=$get("nextTriggerMessage");this._notificationBar=$get("notificationBar");this._notificationText=$get("notificationText");this._notificationClose=$get("notificationClose");this._okButtonPopup=$get("okButtonPopup");this._popupTitleBar=$get("popupTitleBar");this._playbackButton=$get("playbackButton");this._popupText=$get("popupText");this._previousButton=$get("previousButton");this._previousButtonMessageBox=$get("previousButtonMessageBox");this._previousTriggerMessage=$get("previousTriggerMessage");this._progressBar=$get("progressBar");this._resizeMessageBoxSE=$get("resizeMessageBoxSE");this._resizePopupWindowNE=$get("resizePopupWindowNE");this._resizePopupWindowNW=$get("resizePopupWindowNW");this._resizePopupWindowSE=$get("resizePopupWindowSE");this._resizePopupWindowSW=$get("resizePopupWindowSW");this._reviewButton=$get("reviewButton");this._saveCommentLink=$get("saveCommentLink");this._settingsButton=$get("settingsButton");this._settingsPane=$get("settingsPane");this._statementButton=$get("statementButton");this._simulation=$get("simulation");this._taskbar=$get("taskbar");this._tasks=$get("tasks");this._textComment=$get("textComment");this._tipsButton=$get("tipsButton");this._titleComment=$get("titleComment");this._toolbar=$get("toolbar");this._touchpad=$get("touchpad");this._touchPadInstructions=$get("touchPadInstructions");this._triggerCloseButton=$get("triggerCloseButton");this._triggerMessage=$get("triggerMessage");this._triggerMessageArrow=$get("triggerMessageArrow");this._triggerMessageContent=$get("triggerMessageContent");this._triggersObject=$get("triggersObject");this._tutorialPane=$get("tutorialPane");this._tutorialPaneButtonPlayback=$get("tutorialPaneButtonPlayback");this._tutorialPaneButtonTips=$get("tutorialPaneButtonTips");this._validateAudioInstructions=$get("validateAudioInstructions");this._validateTouchPadInstructions=$get("validateTouchPadInstructions");this._virtualkeyboard=$get("virtualkeyboard");this._wheel=$get("wheel");this._simulationFrame=this._createSimulationFrame();this._views={};this._views[Player.Views.Loading]=$get("loading");this._views[Player.Views.NotStarted]=$get("notStarted");this._views[Player.Views.Suspended]=$get("suspended");this._views[Player.Views.Started]=$get("started");this._views[Player.Views.Running]=$get("running");this._views[Player.Views.Saving]=$get("saving");this._views[Player.Views.Finished]=$get("finished");this._views[Player.Views.Initializing]=$get("initializing");this._buttonsToUpdateWithCameraActive=[{Name:"MessageButton",Element:this._messageButton},{Name:"HintsButton",Element:this._tipsButton},{Name:"CameraButton",Element:this._playbackButton},{Name:"StatementButton",Element:this._statementButton},{Name:"ActualSizeButton",Element:this._actualSizeButton},{Name:"MouseButton",Element:this._mouseButton},{Name:"KeyboardButton",Element:this._keyboardButton},{Name:"SettingsButton",Element:this._settingsButton},{Name:"AudioButton",Element:this._audioButton}];this._tutorialDockedButtonsMap={};this._tutorialDockedButtonsMap[this._messageButton.id]={Element:this._messageButton,Type:Controller.MessageTypes.Default};this._tutorialDockedButtonsMap[this._tipsButton.id]={Element:this._tipsButton,Type:Controller.MessageTypes.Hints};this._tutorialDockedButtonsMap[this._playbackButton.id]={Element:this._playbackButton,Type:Controller.MessageTypes.Camera};this._tutorialDockedButtonsMap[this._statementButton.id]={Element:this._statementButton,Type:Controller.MessageTypes.Statement};$addHandler(document.body,"touchmove",Function.createDelegate(this,this._onTouchMove));$addHandler(document.body,"mousemove",Function.createDelegate(this,this._onMouseMove));$addHandler(document.body,"touchstart",Function.createDelegate(this,this._onMouseDown));$addHandler(document.body,"mousedown",Function.createDelegate(this,this._onMouseDown));$addHandler(document.body,"touchend",Function.createDelegate(this,this._onMouseUp));$addHandler(document.body,"mouseup",Function.createDelegate(this,this._onMouseUp));$addHandler(document.body,"click",Function.createDelegate(this,this._onClick));this._simulationBlurHandler=Function.createExclusiveAsyncDelegate(this,this._onSimulationFocusLost);var n=Function.createDelegate(this,this._onUnload);$addHandler(window,"beforeunload",n);$addHandler(window,"unload",n);$addHandler(window,"scroll",Function.createDelegate(this,this._onScroll));$addHandler(window,"resize",Function.createDelegate(this,this._onResize));$addHandler(document.documentElement,"keydown",Function.createDelegate(this,this._onKeydown));$addHandler(this._editComment,"focusin",Function.createDelegate(this,this._onCommentEditorFocus));"onfocusout"in document?$addHandler(this._editComment,"focusout",Function.createDelegate(this,this._onCommentEditorBlur)):this._editComment.addEventListener&&this._editComment.addEventListener("blur",Function.createDelegate(this,this._onCommentEditorBlur),!0);$addHandler(this._editComment,"keyup",Function.createDelegate(this,this._onCommentChanged));__BROWSER_EVENT_FULLSCREEN_CHANGE&&$addHandler(document,__BROWSER_EVENT_FULLSCREEN_CHANGE,Function.createDelegate(this,this._onFullScreenChanged))};Player._createSimulationFrame=function(){this._mouseMoveInSimulationHandler||(this._mouseMoveInSimulationHandler=Function.createDelegate(Player,Player._onMouseMoveInSimulation));this._simulationFrame&&($removeHandler(this._simulationFrame.contentWindow,"mousemove",this._mouseMoveInSimulationHandler),this._simulation.removeChild(this._simulationFrame));var n=document.createElement("iframe");return n.id="simulationFrame"+Math.floor(Math.random()*(new Date).getTime()),n.src="about:blank",n.frameBorder="0",n.className="simulation frame",n.allowTransparency="true",this._simulation.insertBefore(n,this._glassPane),this._focusSimAfterStateInit=!0,n};Player._initializeControls=function(){this._splitterControl=this._createSplitterControl();this._touchpadControl=this._createTouchPadControl();this._keyboardMouseMovingControl=this._createkeyboardMouseMovingControl();this._messagePopupOffsetDelta=null;this._createMessagePopupMovingControl();this._createMessagePopupResizeControls();this._messageBoxOffsetDelta=null;this._createMessageBoxMovingControl();this._createMessageBoxResizeControl();this._autoResizeMessageBoxDelegate=Function.createAsyncDelegate(this,this._autoResizeMessageBox);this._autoResizeModalDelegate=Function.createAsyncDelegate(this,this._autoResizeModal);this._progressbarControl=null;this._wheelControl=null;this._timerInterval=null;this._resumeTimerValue=0;this._cameraMessageTimer=null;this._zoomState=Controller.createZoomState();this._keepMouseShowing=!1;this._touchpadopen=!1;this._cameraActive=!1;this._trackPadInfo=Controller.createTrackPadInfo();this._simulationScrollRange={horizontal:0,vertical:0};this._currentTriggerObjectRect=null;this._unlockTriggerMessageTimeout=null;this._unlockTriggerMessageDelegate=Function.createDelegate(this,this._unlockTriggerMessage);this._isBusy=!1;this._currentScreen=-1;this._maxScreen=-1;this._mouseCoordinates={x:0,y:0};this._audioControls={};this._currentAudio=null;this._currentAudioVolume=.5;this._currentAudioMuted=!1;this._audioControlInstanceCount=0;this._onPlaySoundHandler=Function.createDelegate(this,this._onPlaySound);this._onPauseSoundHandler=Function.createDelegate(this,this._onPauseSound);this._onEndedSoundHandler=Function.createDelegate(this,this._onEndedSound);this._onVolumeChangeSoundHandler=Function.createDelegate(this,this._onVolumeChangedSound);this._onIEPlayStateChangeHandler=Function.createDelegate(this,this._onIEPlayStateChange);this._isAudioSupported=!!document.createElement("audio").play||this._checkIE8WindowsMediaPlugin();this._mouseOutTimeoutMessage=null;this._messageBoxOpacityAnimationInfo=new ElementOpacityAnimationInfo(this._messageBox);this._messagePopupOpacityAnimationInfo=new ElementOpacityAnimationInfo(this._messagePopupWindow);this._url.getParam(Player.URL_PARAM_EDIT)&&(this._editorControl=this._createEditorControl(),this._editorChanges={});this._taskbarScrollExtender=$create(Assima.Controls.ScrollExtender,{checkVertical:!1,scrollersContainer:this._taskbar},null,null,this._tasks)};Player._checkIE8WindowsMediaPlugin=function(){var n,t,i;return Sys.UI.DomElement.containsCssClass(document.documentElement,"ie8")?(n=document.createElement("div"),t="<object classid='clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6'><param name='autoStart' value='false' /><\/object>",n.innerHTML=t,i=n.firstChild,i.controls):!1};Player._initializeUserSelections=function(){var n=Sys.UI.DomElement,t;this._currentTutorialMessage=new TutorialMessageInfo;this._previousTutorialMessage=new TutorialMessageInfo;this._settingsPushedButtons={actualSize:!this._zoomState.FitToWindow,mouse:!1,keyboard:!1,settings:!1,audio:!1,edit:!1,fullScreen:!1};this._settingsPushedButtons.actualSize&&n.addCssClass(this._actualSizeButton,"pushed");t=!0||!1&&__BROWSER_IS_MOBILE_TABLET;this._layoutsDocking=["bottomRight","bottomLeft","topLeft","topRight","bottomTop","topBottom"];this._currentLayout={undocked:!t,name:"BottomTop".charAt(0).toLowerCase()+"BottomTop".slice(1),selector:$get("layoutBottomTopSelector")};n.addCssClass(this._currentLayout.selector,"selected");this._textSizeList=["largest","larger","medium","smaller","smallest"];this._currentTextSize={name:"medium",selector:$get("fontMediumSelector")};this._currentSelectedTask=null;this._currentCameraTipsType=null;n.addCssClass(this._settingsPane,"no-docking-change");!0&&n.addCssClass(this._settingsPane,"no-layout-change")};Player._initializeState=function(){this._currentState=Controller.createState();this._messageDisplayProgressIndex=0;this._historyData=Controller.createHistoryData();this._enabledStepCount=0;this._tutorialPaneOpen=!1;this._triggersLive={DisplayTriggerType:[!1,!1,!1],TriggerObjectMessageShown:!1};this._visibleTriggers=[];this._isTriggerMessageDisplayed=!1;this._handleSpecialParams();this.update(this._currentState,!0)};Player._handleSpecialParams=function(){this._scorm||(this._url.getParam(Player.URL_PARAM_EDIT)&&(this._canEditLesson=!0,this._screensComment=this._getOpenerScreenComments()),this._canEditLesson&&Sys.UI.DomElement.addCssClass(this._reviewButton,"visible"),this._url.getParam(Player.URL_PARAM_FULLNAVIGATION)&&(this._fullNavigation=!0))};Player._getOpenerScreenComments=function(){var t=null,n,i,r;try{if(n=window.opener||window.parent,n&&n.ScreensComment){i=n.ScreensComment;t={};for(r in i)t[r]=i[r]}}catch(u){}return t};Player._setView=function(n){var t=this._views;for(var i in t)i==n?Sys.UI.DomElement.removeCssClass(t[i],"hidden"):Sys.UI.DomElement.addCssClass(t[i],"hidden");this._view=n};Player.resume=function(){Player.play(this._lessonLocation,this._resumeData)};Player.start=function(){delete this._lessonLocation;Player.play()};Player.play=function(n,t){var i=Assima.Url.parseString(window.location),r;n?(i.setParam(Player.URL_PARAM_STARTID,n.screenId),i.setParam(Player.URL_PARAM_STARTINDEX,n.stepCount),i.setParam(Player.URL_PARAM_SCORE,n.rawScore)):t||(i.removeParam(Player.URL_PARAM_STARTID),i.removeParam(Player.URL_PARAM_STARTINDEX),i.removeParam(Player.URL_PARAM_SCORE),window.ResumeData=null);this._simulationFrame.onload=Player._attachSimulationEvents;r="Files/index.html";this._simulationFrame.src=r+(r.indexOf("?")!=-1?"&"+Assima.Url.combineParams(i.params):i.getSearch());this._setView(Player.Views.Initializing)};Player._attachSimulationEvents=function(){try{var n=Player._simulationFrame.contentWindow;$addHandler(n.document,"focusin",Function.createDelegate(Player,Player._saveSimulationActiveElement));"onfocusout"in document?$addHandler(n.document,"focusout",Player._simulationBlurHandler):n.document.addEventListener&&n.document.addEventListener("blur",Player._simulationBlurHandler,!0);$addHandler(n,"mousemove",Player._mouseMoveInSimulationHandler)}catch(t){alert(String.format(Player.Resources.CannotPlay,navigator.userAgent,location.href))}};Player._isRunning=function(){return this._view==Player.Views.Running};Player.terminate=function(){if(this._isRunning()){var n=Controller.getScore(),t={WebInt:Controller.requestResumeData(),MessageBoxRect:this._currentLayout.undocked&&!this._smallResolution&&this._isMessageBoxDisplayed()?this._getMessageBoxRect():null};this._finalizeSession(n.ScoreRaw,data.ScoreCalculated,n.HintsRequestsCount,n.CameraRequestsCount,n.ErrorsCount,n.CorrectActionsCount,n.States_Current,n.States_Count-1,n.LessonTime,n.LessonCompleted,n.States_Total-1,JSON.stringify(t),Controller.getLog())}else this._closeScormSession()};Player._isButtonOfGroupType=function(n,t){for(;t.parentNode;t=t.parentNode)if(Sys.UI.DomElement.containsCssClass(t,"group")&&Sys.UI.DomElement.containsCssClass(t,n))return!0;return!1};Player._getElementByClassName=function(n,t){for(;n.parentNode;n=n.parentNode)if(Sys.UI.DomElement.containsCssClass(n,t))return n;return null};Player._getButton=function(n){return this._getElementByClassName(n,"button")};Player._getTask=function(n){return this._getElementByClassName(n,"task")};Player._getLayoutItem=function(n){return this._getElementByClassName(n,"item_layout")};Player._getFontItem=function(n){return this._getElementByClassName(n,"item_font")};Player._getKey=function(n){return this._getElementByClassName(n,"key")};Player._getTriggerObject=function(n){return this._getElementByClassName(n,"trigger_object")};Player._isGlassPane=function(n){return n==this._glassPane};Player._getTriggerMessageLeftArrow=function(n){return this._getElementByClassName(n,"previous_message")};Player._getTriggerMessageRightArrow=function(n){return this._getElementByClassName(n,"next_message")};Player._getSpeaker=function(n){return this._getElementByClassName(n,"speaker")};Player._getComment=function(n){return this._getElementByClassName(n,"comment")};Player._isOkButtonPopup=function(n){return n==this._okButtonPopup};Player._isNotificationButtonClose=function(n){return n==this._notificationClose};Player._isNotificationBar=function(n){return n==this._notificationBar};Player._getMessageBoxNavigation=function(n){return n==this._previousButtonMessageBox||n==this._nextButtonMessageBox};Player._isTutorialPaneActionButton=function(n){return n==this._tutorialPaneButtonTips||n==this._tutorialPaneButtonPlayback};Player.getPad=function(){return this._pad};Player._messageTypeToCssClass=function(n){var t=Controller.MessageTypes;switch(n){case t.Modal:return"modal";case t.Timer:return"timer";case t.Default:return"standard";case t.Statement:return"statement";case t.Hints:return"tips";case t.Camera:return"playback";case t.Trigger_OnInfo:return"oninfo";case t.Trigger_OnMouseOver:return"onmouseover";case t.Trigger_OnError:return"onerror";default:return""}};Player._isTriggerMessageType=function(n){var t=Controller.MessageTypes;return n==t.Trigger_OnInfo||n==t.Trigger_OnMouseOver||n==t.Trigger_OnError};Player._getElementOffsetDelta=function(n){var t=n.style,i={width:t.width,height:t.height},r;return n.style.width=0,n.style.height=0,r={width:n.offsetWidth,height:n.offsetHeight},t.width=i.width,t.height=i.height,r};Player._checkBounds=function(n,t,i,r){var u={x:n.x,y:n.y,width:t.width,height:t.height};return t.width<i.width&&(t.width=i.width),t.height<i.height&&(t.height=i.height),n.x<0?n.x=0:n.x+t.width>r.offsetWidth&&(n.x=Math.max(0,r.offsetWidth-t.width)),n.y<0?n.y=0:n.y+t.height>r.offsetHeight&&(n.y=Math.max(0,r.offsetHeight-t.height)),n.x+t.width>r.offsetWidth&&(t.width=Math.max(r.offsetWidth,i.width)),n.y+t.height>r.offsetHeight&&(t.height=Math.max(r.offsetHeight,i.height)),u.x!=n.x||u.y!=n.y||u.width!=t.width||u.height!=t.height};Player._setElementEnabled=function(n,t){t?(Sys.UI.DomElement.removeCssClass(n,"disabled"),n.disabled=!1):(Sys.UI.DomElement.addCssClass(n,"disabled"),n.disabled=!0)};Player._isElementDisabled=function(n){return n.disabled||Sys.UI.DomElement.containsCssClass(n,"disabled")};Player._refreshFontIconsIE=function(){Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version==8&&(Sys.UI.DomElement.addCssClass(document.body,"ie8refresh"),setTimeout(function(){Sys.UI.DomElement.removeCssClass(document.body,"ie8refresh")},1))};Player._resetElementPos=function(n){var t=n.style;t.left="";t.right="";t.top="";t.bottom=""};Player._resetElementSize=function(n){var t=n.style;t.width="";t.height=""};Player._resetElementPosAndSize=function(n){this._resetElementPos(n);this._resetElementSize(n)};Player._onUnload=function(){Player.terminate()};Player._saveSimulationActiveElement=function(){var n=this._getSimulationActiveElement();n&&n!=this._simulationFrame.contentWindow.document.body&&(this._simulationActiveElement=n);this._focusSimAfterStateInit&&(n.blur&&n.blur(),document.documentElement.focus())};Player._getSimulationActiveElement=function(){if(!Player._simulationFrame||Player._simulationFrame.src=="about:blank")return null;var n=Player._simulationFrame.contentWindow;return n?n.document.activeElement:null};Player._onSimulationFocusLost=function(){Player._simulationActiveElement=Player._simulationActiveElement||Player._getSimulationActiveElement()};Player._stateFocusOnSimActiveElement=function(){this._focusSimAfterStateInit&&(this._focusSimAfterStateInit=!1,Player._setFocusOnSimulationElement(Player._simulationActiveElement))};Player._setFocusOnSimulationElement=function(n){var i,r,t,u,f;if(n&&n&&n.focus){if(i=Player._simulationFrame.contentWindow,n==i.document.body)return;try{for(r=[],t=n;t;)(t.scrollTop!=null||t.scrollLeft!=null)&&r.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;u=i.document.documentElement;f={left:i.pageXOffset||u.scrollLeft,top:i.pageYOffset||u.scrollTop};n.focus();setTimeout(function(){for(var n,t=r.length;t--;)n=r[t],n.element.scrollLeft=n.scrollLeft,n.element.scrollTop=n.scrollTop;i.scrollTo(f.left,f.top)},0)}catch(e){}}};Player._onClick=function(n){var i=n.target,r,t;if(this._updateMouseCoordinates(n),this._cameraActive||!__BROWSER_IS_MOBILE_TABLET||this._focusSimAfterStateInit||this._touchpadopen||(r=this._getSimulationActiveElement(),r&&r.blur&&r.blur()),this._isElementDisabled(i)){n.stopPropagation();n.preventDefault();return}if(t=this._getButton(i),t){this._processButtonClick(n,t);return}if(this._currentLayout.undocked&&this._getMessageBoxNavigation(i)){this._processMessageBoxNavigation(n,i);return}if(t=this._getTask(i),t){this._processTaskClick(n,t);return}if(this._isGlassPane(i)){this._processGlassPaneClick(n);return}if(t=this._getLayoutItem(i),t){this._processLayoutItemClick(n,t,i);return}if(t=this._getFontItem(i),t){this._processFontItemClick(n,t,i);return}if(this._isOkButtonPopup(i)){this._processOkButtonPopupClick(n);return}if(t=this._getTriggerObject(i),t){this._processTriggerObjectClick(n,t);return}if(this._isNotificationButtonClose(i)){this._processNotificationCloseClick(n,i);return}if(t=this._getKey(i),t){this._processKeyPressed(n,t);return}if(t=this._getTriggerMessageLeftArrow(i),t){this._processTriggerMessageNavigate(n,t,!0);return}if(t=this._getTriggerMessageRightArrow(i),t){this._processTriggerMessageNavigate(n,t,!1);return}if(t=this._getSpeaker(i),!t){if(this._isTutorialPaneActionButton(i)){this._processTutorialPaneActionButtonClick(n);return}if(n.type.startsWith("touch")&&this._isNotificationBar(i)){this._processNotificationCloseClick(n,n.target);return}if(i==this._taskbar){this._processTaskBarClick();return}if(i==this._triggerCloseButton){this._processTriggerMessageClosing(n);return}if(i==this._validateTouchPadInstructions){this._processValidateTouchPadInstructions();return}if(i==this._validateAudioInstructions){this._processValidateAudioInstructions();return}if(t=this._getComment(i),t){if(n.stopPropagation(),n.preventDefault(),this._isElementDisabled(t))return;if(i==this._closeCommentButton||i==this._cancelCommentEditLink){this._closeCommentEditor();return}if(i==this._saveCommentLink){this._saveComment();return}this._processCommentClick(n);return}}};Player._onScroll=function(){var s,n,t,f,e,o,h,u,i,r;__IS_IPAD&&!this._currentLayout.undocked&&Player._simulationFrame&&Player._simulationFrame.src!="about:blank"&&(s=Player._simulationFrame.contentWindow,s)&&(n=this._currentLayout.name,n!="bottomTop"&&n!="topBottom")&&(this._tutorialPane.style.top="",this._tutorialPane.style.bottom="",this._toolbar.style.top="",this._toolbar.style.bottom="",t=window.pageYOffset,t&&(f=this._simulationFrame.contentWindow.document.activeElement,f&&(e=f.tagName.toLowerCase(),(e=="input"||e=="textarea")&&(o=Sys.UI.DomElement.getLocation(this._toolbar).y,n=="bottomRight"||n=="bottomLeft"?(i=o+t,r=parseInt(getComputedStyle(this._toolbar).bottom)-t,this._toolbar.style.top=this._tutorialPane.style.top=i+"px",this._toolbar.style.bottom=this._tutorialPane.style.bottom=r+"px"):(h=this._navigationBar.offsetHeight,u=t-h,u>0&&(i=o+u,r=parseInt(getComputedStyle(this._toolbar).bottom)-u,this._toolbar.style.top=this._tutorialPane.style.top=i+"px",this._toolbar.style.bottom=this._tutorialPane.style.bottom=r+"px"))))))};Player._onResize=function(){this._applyResponsiveLayout()};Player._onFullScreenChanged=function(){switch(__BROWSER_EVENT_FULLSCREEN_CHANGE){case"fullscreenchange":this._updateFullScreenButtonState(document.fullscreen);break;case"mozfullscreenchange":this._updateFullScreenButtonState(document.mozFullScreen);break;case"webkitfullscreenchange":this._updateFullScreenButtonState(document.webkitIsFullScreen);break;case"MSFullscreenChange":this._updateFullScreenButtonState(document.msFullscreenElement)}};Player._onKeydown=function(n){if(n.target!=this._editComment){if(this._isModalDisplayed()){(n.charCode==13||n.keyCode==13)&&this._closeMessagePopup();return}Controller.notifyKeyDown(n)}};Player._isElementDisplayed=function(n){return getComputedStyle(n).display!="none"};Player._adjustElementPosAndSize=function(n,t,i,r){var u=Sys.UI.DomElement.getLocation(n),f={width:n.offsetWidth,height:n.offsetHeight};this._checkBounds(u,f,r,i)&&(n.style.left=u.x+"px",n.style.right="auto",n.style.top=u.y+"px",n.style.bottom="auto",n.style.width=f.width-(t?t.width:0)+"px",n.style.height=f.height-(t?t.height:0)+"px")};Player._refreshProgressbarControl=function(){this._progressbarControl&&this._progressbarControl.refresh()};Player._updateMouseCoordinates=function(n){if(n.type.startsWith("touch")){var t=n.rawEvent;this._mouseCoordinates.x=t.touches[0].pageX;this._mouseCoordinates.y=t.touches[0].pageY}else this._mouseCoordinates.x=n.clientX,this._mouseCoordinates.y=n.clientY};Player._onMouseDown=function(n){var r=n.target,t,i;if(this._settingsPushedButtons.settings){t=this._getElementByClassName(r,"settings");t==this._settingsButton?n.stopPropagation():t&&t==this._settingsPane||this._manageSettingsDisplay(this._settingsButton,!1);return}if(this._settingsPushedButtons.audio){i=this._getElementByClassName(r,"sound");i==this._audioButton?n.stopPropagation():i&&i==this._audioBar||this._manageAudioBarDisplay(this._audioButton,!1);return}if(r==this._cursorSimulation&&this._touchpadControl.get_enabled())this._touchpadControl.onMouseDown(n)};Player._onMouseUp=function(n){var t=n.target;if(t==this._cursorSimulation){n.target=this._touchpad;this._touchpadControl.onMouseUp(n)}};Player._onTouchMove=function(n){var i=n.target,t;this._elementScrollable(i)||(t=this._getElementByClassName(i,"scrollable"),t&&this._elementScrollable(t)||n.preventDefault())};Player._onMouseMoveInSimulation=function(n){this._mouseCoordinates.x=this._simulationFrame.offsetLeft+n.clientX;this._mouseCoordinates.y=this._simulationFrame.offsetTop+n.clientY;this._currentTriggerObjectRect&&!this._isMovieMode()&&this._onMouseMoveWhileTriggerMessageOpen({x:n.clientX,y:n.clientY})};Player._onMouseMove=function(n){this._mouseCoordinates.x=n.clientX;this._mouseCoordinates.y=n.clientY;this._getTriggerObject(n.target)&&this._handleTriggerObjectHovered();this._currentTriggerObjectRect&&!this._isMovieMode()&&this._onMouseMoveWhileTriggerMessageOpen({x:n.clientX-this._simulationFrame.offsetLeft,y:n.clientY-this._simulationFrame.offsetTop})};Player._elementScrollable=function(n){return n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight};Player._processButtonClick=function(n,t){if(n.stopPropagation(),n.preventDefault(),!this._isElementDisabled(t)){if(t==this._previousButton){Controller.execute(Controller.Actions.HistoryBack);return}if(t==this._nextButton){Controller.execute(Controller.Actions.HistoryForward);return}if(t==this._cameraActionButton){this._switchCameraPlayPauseState();return}if(t==this._exitButton){this._exitButtonClicked(t);return}if(this._isButtonOfGroupType("tutorial",t)){this._tutorialButtonClicked(t);return}if(this._isButtonOfGroupType("settings",t)){this._settingsButtonClicked(t);return}}};Player._processGlassPaneClick=function(n){n.stopPropagation();n.preventDefault();this._smallResolution&&this._tutorialPaneOpen&&!this._isMovieMode()&&this._closeTutorialPaneSmallResolution();this._triggersLive.TriggerObjectMessageShown===!1||this._isMovieMode()||this._hideTriggerMessage()};Player._processMessageBoxNavigation=function(n,t){if(n.stopPropagation(),n.preventDefault(),!this._isElementDisabled(t)){if(t==this._previousButtonMessageBox){Controller.execute(Controller.Actions.HistoryBack);return}if(t==this._nextButtonMessageBox){Controller.execute(Controller.Actions.HistoryForward);return}}};Player._processTaskBarClick=function(){this._smallResolution&&this._tutorialPaneOpen&&!this._isMovieMode()&&this._closeTutorialPaneSmallResolution()};Player._processTaskClick=function(n,t){n.stopPropagation();n.preventDefault();this._isElementDisabled(t.parentNode)||Controller.setFocus(t.id)};Player._focusTask=function(n){n&&!Sys.UI.DomElement.containsCssClass(n,"selected")&&(this._currentSelectedTask&&Sys.UI.DomElement.removeCssClass(this._currentSelectedTask,"selected"),Sys.UI.DomElement.addCssClass(n,"selected"),this._currentSelectedTask=n)};Player._findTask=function(n){for(var i=this._tasks.children,t=0,r=i.length;t<r;++t)if(i[t].id==n)return i[t];return null};Player._processKeyPressed=function(n,t){(n.stopPropagation(),n.preventDefault(),this._isElementDisabled(t))||Controller.executeKeyDown(t.id)};Player._processTouchPadLeftClick=function(n){var u=Sys.UI.DomElement.getLocation(this._cursorSimulation),t,i,r,f;if(this._triggersLive.TriggerObjectMessageShown!==!1&&Sys.UI.DomElement.containsCssClass(this._triggerMessage,"multiple")){if(this._isCursorInObject(u,this._previousTriggerMessage)){this._processTriggerMessageNavigate(domEvent,this._previousTriggerMessage,!0);return}if(this._isCursorInObject(u,this._nextTriggerMessage)){this._processTriggerMessageNavigate(domEvent,this._nextTriggerMessage,!1);return}}n?Controller.execute(Controller.Actions.TrackPad_DoubleLeftClick):Controller.execute(Controller.Actions.TrackPad_LeftClick);this._updateMousePosition(!0);this._touchpadopen&&__IS_IPAD&&(t=this._getSimulationActiveElement(),t&&(i=!1,r=t.tagName.toLowerCase(),r=="input"?(f=t.type.toLowerCase(),["text","password","email","number","search","url","date","datetime","month","tel","time","week"].indexOf(f)!=-1&&(i=!0)):r=="textarea"&&(i=!0),i&&(this._virtualkeyboard.style.top=0,this._virtualkeyboard.style.bottom="auto")))};Player._closeTutorialPaneSmallResolution=function(){this._currentCameraTipsType!=null&&this._stopCamera(this._currentCameraTipsType);this._closeTutorialPane();this._unPushTutorialPaneButtons();this._resetTutorialMessageInfo();this._stateFocusOnSimActiveElement()};Player._processTriggerObjectClick=function(n,t){if((n&&(n.stopPropagation(),n.preventDefault()),!this._isElementDisabled(t))&&this._triggersLive.TriggerObjectMessageShown!=t.id){var f=getComputedStyle(t).borderLeftWidth,o=f==""?0:parseInt(f),i=this._triggersLive[t.id],r=0,u,e;i.CurrentTriggerMessage.Type=this._triggerCssClassToType(t);i.CurrentTriggerMessage.Index=0;r=i.CurrentTriggerMessage.Type;u=i.Triggers[r][0];e=Controller.requestTriggerData([this._triggerIdToData[u]]);this._showTriggerMessage(e[u],t.trigger,r,!1,o)}};Player._processTriggerMessageClosing=function(n){n.stopPropagation();n.preventDefault();this._hideTriggerMessage()};Player._processOkButtonPopupClick=function(n){n.stopPropagation();n.preventDefault();Player._closeMessagePopup()};Player._processNotificationCloseClick=function(n){n.stopPropagation();n.preventDefault();this._notificationBar.style.display="none"};Player._processLayoutItemClick=function(n,t,i){if((n.stopPropagation(),n.preventDefault(),!this._isElementDisabled(t))&&(DomElement=Sys.UI.DomElement,!DomElement.containsCssClass(t,this._currentLayout.name))){DomElement.removeCssClass(this._currentLayout.selector,"selected");DomElement.removeCssClass(document.body,this._currentLayout.name);for(var r=0,u=this._layoutsDocking.length;r<u&&!DomElement.containsCssClass(t,this._layoutsDocking[r]);++r);this._currentLayout.name=this._layoutsDocking[r];this._currentLayout.selector=i;DomElement.addCssClass(document.body,this._currentLayout.name);DomElement.addCssClass(i,"selected");this._refreshLayout();this._applyResponsiveLayout()}};Player._processFontItemClick=function(n,t,i){if(n.stopPropagation(),n.preventDefault(),DomElement=Sys.UI.DomElement,!DomElement.containsCssClass(t,this._currentTextSize.name)){DomElement.removeCssClass(this._currentTextSize.selector,"selected");DomElement.removeCssClass(document.body,this._currentTextSize.name);for(var r=0,u=this._textSizeList.length;r<u&&!DomElement.containsCssClass(t,this._textSizeList[r]);++r);this._currentTextSize.name=this._textSizeList[r];this._currentTextSize.selector=i;DomElement.addCssClass(document.body,this._currentTextSize.name);DomElement.addCssClass(i,"selected");document.body.style.fontSize=""}};Player._tutorialButtonClicked=function(n){var t,i;Sys.UI.DomElement.containsCssClass(n,"pushed")?this._isMovieMode()?this._restorePreviousMessage():(this._currentCameraTipsType==null||this._isMovieMode()||this._stopCamera(this._currentCameraTipsType),this._closeTutorialPane(),this._dockedPushedButton=null,Sys.UI.DomElement.removeCssClass(n,"pushed"),this._resetTutorialMessageInfo(),this._stateFocusOnSimActiveElement()):(t=this._tutorialDockedButtonsMap[n.id].Type,t==Controller.MessageTypes.Hints||t==Controller.MessageTypes.Camera?(this._bUserAskedCamera=!0,this._currentCameraTipsType!=null&&(!this._isMovieMode()||this._bUserAskedCamera)&&this._stopCamera(this._currentCameraTipsType),this._currentCameraTipsType=t==Controller.MessageTypes.Hints?Controller.Actions.Hints:Controller.Actions.Camera,Controller.execute(this._currentCameraTipsType)):(i=t==Controller.MessageTypes.Statement?this._currentState.StatementMessage:this._getDefaultMessage(),this._updateTutorialPane(t,i,!0)))};Player._settingsButtonClicked=function(n){n==this._audioButton?this._manageAudioBarDisplay(n,!this._settingsPushedButtons.audio):n==this._actualSizeButton?this._manageActualSizeDisplay(n):n==this._mouseButton?this._manageVirtualMouseDisplay(n):n==this._keyboardButton?this._manageVirtualKeyboardDisplay(n):n==this._settingsButton?this._manageSettingsDisplay(n,!this._settingsPushedButtons.settings):n==this._editButton?this._manageWysiwygEdit(n,!this._settingsPushedButtons.edit):n==this._reviewButton?this._manageScreenReviewDisplay(n):n==this._fullScreenButton&&this._manageFullScreenDisplay(n)};Player._processSpeakerClick=function(n,t){(n.stopPropagation(),n.preventDefault(),this._isElementDisabled(t)||Sys.UI.DomElement.containsCssClass(t,"notplayable"))||(this._isAudioPlaying()?this._pauseAudio():this._startAudio())};Player._exitButtonClicked=function(){confirm(Player.Resources.ExitConfirmMsg)&&(Player.terminate(),window.parent==window&&setTimeout("window.close()",0))};Player._switchCameraPlayPauseState=function(){this._isMoviePaused?this._resumeCamera():this._pauseCamera()};Player._pauseCamera=function(){this._cameraMessageTimer&&(clearTimeout(this._cameraMessageTimer),this._cameraMessageTimer=null,this._remainingMessageTimer=Math.max(0,this._cameraMessageTimerEndTime-(new Date).getTime()));this._pauseAudio();this._timerInterval&&(clearInterval(this._timerInterval),this._timerInterval=null);this._isBusy=!0;this._isMoviePaused=!0;this._setCameraButtonStyle(!0);this._restoreElementsStateCameraNotActive()};Player._resumeCamera=function(){this._isAudioSuspended()&&this._startAudio();this._isMoviePaused=!1;this._setCameraButtonStyle(!1);this._isMovieMode()&&this._currentTutorialMessage.Type==Controller.MessageTypes.Statement&&this._restorePreviousMessage();this._unblockCamera()||(this._resumeTimerValue>0?this._resumeTimerMessage():this._remainingMessageTimer&&(this._launchCameraMessageTimer(this._remainingMessageTimer,this._cameraMessageTypeForTimer),this._remainingMessageTimer=null));this._updateElementsStateCameraActive()};Player._unblockCamera=function(){return this._resumeTimerValue==0&&this._remainingMessageTimer==null&&!this._isElementDisplayed(this._audioInstructions)&&!this._isMoviePaused?(this._isBusy=!1,!0):!1};Player._setCameraButtonStyle=function(n){var t,i;this._currentLayout.undocked?(t=this._wheelControl,t&&(i=t.get_centerButton(),i.className="camera "+(n?"play":"pause"),t.refreshCenter(),t.set_collapsed(!n))):(Sys.UI.DomElement.removeCssClass(this._cameraActionButton,n?"pause":"play"),Sys.UI.DomElement.addCssClass(this._cameraActionButton,n?"play":"pause"))};Player._manageActualSizeDisplay=function(n){var t=this._settingsPushedButtons.actualSize;Sys.UI.DomElement[t?"removeCssClass":"addCssClass"](n,"pushed");this._settingsPushedButtons.actualSize=!t;this._zoomState.FitToWindow=t;Controller.setZoomState(this._zoomState)};Player._manageScreenReviewDisplay=function(n){var t=Sys.UI.DomElement;t.containsCssClass(n,"pushed")?this._closeCommentEditor():this._openCommentEditor()};Player._manageFullScreenDisplay=function(){var t,n,i;__BROWSER_HAS_FULLSCREEN_API&&(this._settingsPushedButtons.fullScreen?(t=document.exitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen,t&&t.call(document)):(n=document.documentElement,i=n.requestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen||n.msRequestFullscreen,i&&i.call(n)))};Player._updateFullScreenButtonState=function(n){Sys.UI.DomElement[n?"addCssClass":"removeCssClass"](this._fullScreenButton,"pushed");this._settingsPushedButtons.fullScreen=n};Player._manageVirtualMouseDisplay=function(n){var t=Sys.UI.DomElement;this._settingsPushedButtons.mouse?(t.removeCssClass(n,"pushed"),this._settingsPushedButtons.mouse=!1,this._touchpad.style.display="none",this._touchpadopen=!1,this._keepMouseShowing||(this._cursorSimulation.style.display="none"),this._touchPadInstructions.style.display="none",this._updateMousePosition(!1)):(t.addCssClass(n,"pushed"),this._settingsPushedButtons.mouse=!0,this._touchPadInstructionsShown?this._startTouchPad():this._touchPadInstructions.style.display="")};Player._processValidateTouchPadInstructions=function(){this._touchPadInstructionsShown=!0;this._touchPadInstructions.style.display="none";this._startTouchPad()};Player._startTouchPad=function(){this._touchpadopen=!0;this._touchpad.style.display="";this._adjustTouchPadArea();this._touchpadControl.set_enabled(!0);this._showVirtualMouseCenter()};Player._manageVirtualKeyboardDisplay=function(n){var t=Sys.UI.DomElement;this._settingsPushedButtons.keyboard?(t.removeCssClass(n,"pushed"),this._settingsPushedButtons.keyboard=!1,this._virtualkeyboard.style.display="none",Sys.UI.DomElement.addCssClass(this._virtualkeyboard,"animate")):(t.addCssClass(n,"pushed"),this._settingsPushedButtons.keyboard=!0,this._virtualkeyboard.style.display="")};Player._showVirtualMouseCenter=function(){var n=Sys.UI.DomElement.getLocation(this._simulation);n.x=n.x+this._simulation.offsetWidth/2-this._cursorSimulation.offsetWidth/2;n.y=n.y+this._simulation.offsetHeight/2-this._cursorSimulation.offsetHeight/2;this._cursorSimulation.style.left=n.x+"px";this._cursorSimulation.style.top=n.y+"px";this._updateMousePosition(!0);this._cursorSimulation.style.display=""};Player._manageSettingsDisplay=function(n,t){t?(this._settingsPushedButtons.keyboard&&this._manageVirtualKeyboardDisplay(this._keyboardButton),Sys.UI.DomElement.addCssClass(n,"pushed"),this._settingsPane.style.display=""):(Sys.UI.DomElement.removeCssClass(n,"pushed"),this._settingsPane.style.display="none");this._settingsPushedButtons.settings=t;this._setGlassPaneEnabled(t)};Player._pushTutorialButtonMatchingMessageType=function(n){var i=Sys.UI.DomElement,r=this._tutorialDockedButtonsMap,u=null,t;for(var f in r)t=r[f],t.Type==n?(i.addCssClass(t.Element,"pushed"),u=t.Element):(i.removeCssClass(t.Element,"pushed"),i.removeCssClass(t.Element,"withpane"));return u};Player._unPushTutorialPaneButtons=function(){var t=Sys.UI.DomElement,i=this._tutorialDockedButtonsMap,r,n;for(r in i)n=i[r].Element,t.removeCssClass(n,"pushed"),t.removeCssClass(n,"withpane");this._dockedPushedButton=null};Player._isTutorialBarTipsButtonPushed=function(){return Sys.UI.DomElement.containsCssClass(this._tutorialDockedButtonsMap[this._tipsButton.id].Element,"pushed")};Player._unPushTutorialTipsButton=function(){Sys.UI.DomElement.removeCssClass(this._tutorialDockedButtonsMap[this._tipsButton.id].Element,"pushed")};Player._updateTutorialPane=function(n,t,i){var e=Sys.UI.DomElement,o=this._tutorialPane,u=this._isTriggerMessageType(n),r,f;Player.DISPLAY_TRIGGERS_IN_PLACE||(this._isTriggerMessageDisplayed=u);this._updateTutorialPaneCssClass(n,u,t.SoundFile);r=this._isMessageEmpty(t);this._messageTutorialPaneText.scrollLeft=this._messageTutorialPaneText.scrollTop=0;this._messageTutorialPaneText.innerHTML=r?String.format("<div class='emptyMessage'>{0}<\/div>",Player.Resources.NoMessage):t.HTMLText;this._setContentDirection(this._messageTutorialPaneText,r?null:t.IsRTL);this._dockedPushedButton=this._pushTutorialButtonMatchingMessageType(r&&!i&&!this._bUserAskedCamera?null:n);!r||u||i?(this._smallResolution&&this._currentCameraTipsType&&(this._isBusy=!0,this._cursorSimulation.style.display="none",Sys.UI.DomElement.addCssClass(o,"with_action"),f=this._getSimulationActiveElement(),f&&f.blur&&f.blur(),this._canPlayPauseCamera()&&this._updateElementState(this._cameraActionButton,Controller.States.Disabled)),this._openTutorialPane(),Sys.UI.DomElement.addCssClass(document.body,"messageshown"),this._dockedPushedButton&&e.addCssClass(this._dockedPushedButton,"withpane")):(this._closeTutorialPane(),this._dockedPushedButton&&e.removeCssClass(this._dockedPushedButton,"withpane"));this._spinnerMoving||this._handleNewMessageSound(t,this._tutorialPane,u,n);this._updateCurrentPreviousMessages(t,n)};Player._setContentDirection=function(n,t){var i=t==null?"auto":t?"rtl":"ltr";try{n.dir=i}catch(r){n.dir=""}};Player._processTutorialPaneActionButtonClick=function(n){n&&(n.stopPropagation(),n.preventDefault());this._keepMouseShowing&&(this._cursorSimulation.style.display="");this._canPlayPauseCamera()&&this._updateElementState(this._cameraActionButton,this._currentState.CameraPauseButton);this._closeTutorialPane();this._focusSimAfterStateInit=!1;this._setFocusOnSimulationElement(Player._simulationActiveElement);this._unblockCamera()};Player._resetTutorialDocking=function(){this._resetTutorialPaneClasses();this._unPushTutorialPaneButtons();this._closeTutorialPane()};Player._updateTutorialPaneCssClass=function(n,t,i){var r=Sys.UI.DomElement,u=this._tutorialPane;Player._resetTutorialPaneClasses();t&&r.addCssClass(u,"trigger");i&&r.addCssClass(u,"audio");r.addCssClass(u,this._messageTypeToCssClass(n))};Player._handleNewMessageSound=function(n,t,i,r){!1&&this._isAudioPlaying()&&this._pauseAudio();n&&n.SoundFile&&(Sys.UI.DomElement.addCssClass(t,"audio"),this._dockingSwitching?this._isAudioPlaying()&&n.SoundFile==this._currentAudio.initialSource?Sys.UI.DomElement.addCssClass(t,"playing"):this._isMovieMode()&&this._isTriggerMessageDisplayed&&Player.DISPLAY_TRIGGERS_IN_PLACE&&Sys.UI.DomElement.removeCssClass(t,"audio"):this._playAudio(n.SoundFile,i,r))};Player._resetTutorialPaneClasses=function(){this._tutorialPane.className="pane tutorial"};Player._resetTutorialMessageInfo=function(){this._currentTutorialMessage.Clear();this._previousTutorialMessage.Clear()};Player._openTutorialPane=function(){this._tutorialPane.style.display="";this._tutorialPaneOpen=!0;this._adjustTutorialPaneSize();this._smallResolution&&this._activateGlassPaneForTutorialPaneClosing()};Player._createMessageBoxFooter=function(n){for(var f,s,e,r,u,t;this._messageBoxFooter.firstChild;)this._messageBoxFooter.removeChild(this._messageBoxFooter.firstChild);f=$get("messageBoxSpeaker");f&&f.parentNode==this._messageBox&&this._messageBox.removeChild(f);var h=this._createMessageBoxLinkClickHandler(Controller.MessageTypes.Hints),c=this._createMessageBoxLinkClickHandler(Controller.MessageTypes.Camera),o=this._createMessageBoxLinkClickHandler(Controller.MessageTypes.Statement),i=this._isMovieMode();switch(n){case Controller.MessageTypes.Default:this._currentState.HintsButton!=Controller.States.Hidden&&this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxShowMeLink",Player.Resources.ShowMe,this._currentState.HintsButton==Controller.States.Disabled,h));this._currentState.CameraButton!=Controller.States.Hidden&&this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxDoItLink",Player.Resources.DoIt,this._currentState.CameraButton==Controller.States.Disabled,c));!0&&this._currentState.StatementButton!=Controller.States.Hidden&&(s=i?function(){Player._pauseCamera();o()}:o,this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxStatementLink",Player.Resources.Overview,this._currentState.StatementButton==Controller.States.Disabled,s)));this._smallResolution&&!i&&this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxOkLink",Player.Resources.OK,!1,this._onMessageBoxOK,"selected"));break;case Controller.MessageTypes.Trigger_OnInfo:case Controller.MessageTypes.Trigger_OnError:case Controller.MessageTypes.Trigger_OnMouseOver:this._smallResolution?this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxOkLink",Player.Resources.OK,!1,this._onMessageBoxOK,"selected")):i||this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxBackLink",Player.Resources.Back,!1,function(){Player._restorePreviousMessage()}));break;default:if(this._smallResolution)switch(n){case Controller.MessageTypes.Hints:case Controller.MessageTypes.Camera:i||this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxBackLink",Player.Resources.Back,!1,this._onCancelCamera));this._cameraActive&&(n==Controller.MessageTypes.Hints?this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxShowMeLink",Player.Resources.ShowMe,!1,this._onActivateCameraForUndocked,"selected")):this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxDoItLink",Player.Resources.DoIt,!1,this._onActivateCameraForUndocked,"selected")));break;case Controller.MessageTypes.Statement:this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxOkLink",Player.Resources.OK,!1,this._onMessageBoxOK,"selected"))}else e=n==Controller.MessageTypes.Statement,(!i||e)&&(r=null,i&&e?this._isMessageEmpty(this._previousTutorialMessage.Message)||(r=function(){Player._restorePreviousMessage()}):this._isMessageEmpty(this._getDefaultMessage())||(r=this._createMessageBoxLinkClickHandler(Controller.MessageTypes.Default)),r&&this._messageBoxFooter.appendChild(this._createMessageBoxFooterLink("messageBoxBackLink",Player.Resources.Back,!1,r)))}this._messageBoxFooter.firstChild?Sys.UI.DomElement.removeCssClass(this._messageBoxFooter,"noactions"):Sys.UI.DomElement.addCssClass(this._messageBoxFooter,"noactions");u=document.createElement("span");u.id="messageBoxTimer";u.className="timer";this._messageBoxFooter.insertBefore(u,this._messageBoxFooter.firstChild);t=document.createElement("span");t.id="messageBoxSpeaker";t.className="speaker";t.onclick=function(){};t.title=Player.Resources.PlayPauseAudio;this._smallResolution?this._messageBox.appendChild(t):this._messageBoxFooter.insertBefore(t,u)};Player._createMessageBoxFooterLink=function(n,t,i,r,u){var f=document.createElement("a");return f.id=n,f.href="#",f.className="item "+(u?u:""),f.innerText=t,f.title=t,f.onclick=r,i&&(f.className+=" disabled",f.disabled=!0),f};Player._createMessageBoxLinkClickHandler=function(n){return function(){Sys.UI.DomElement.containsCssClass(this,"disabled")||((n==Controller.MessageTypes.Hints||n==Controller.MessageTypes.Camera)&&(Player._bUserAskedCamera=!0),Player._setUndockedMessageType(n))}};Player._onMessageBoxOK=function(){Player._unPushWheelButtons();Player._hideMessageBox();Player._isTriggerMessageDisplayed=!1;Player._stateFocusOnSimActiveElement()};Player._onCancelCamera=function(){Player._currentCameraTipsType!=null&&Player._stopCamera(Player._currentCameraTipsType);Player._unPushWheelButtons();Player._hideMessageBox();Player._resetTutorialMessageInfo();Player._stateFocusOnSimActiveElement()};Player._onActivateCameraForUndocked=function(){Player._keepMouseShowing&&(Player._cursorSimulation.style.display="");Player._hideMessageBox();Player._focusSimAfterStateInit=!1;Player._setFocusOnSimulationElement(Player._simulationActiveElement);Player._unblockCamera()};Player._updateMessageBoxTextHeight=function(){this._messageBoxText.style.bottom=this._smallResolution&&this._screenOrientation==DeviceOrientation.Portrait?this._messageBoxFooter.offsetHeight+10+"px":""};Player._closeTutorialPane=function(){this._tutorialPane.style.display="none";this._tutorialPaneOpen=!1;this._dockedPushedButton&&Sys.UI.DomElement.removeCssClass(this._dockedPushedButton,"withpane");this._resetTaskbarAndSimulationPos();this._diactivateGlassPaneForTutorialPaneClosing();Sys.UI.DomElement.removeCssClass(document.body,"messageshown")};Player._resetTaskbarAndSimulationPos=function(){this._resetElementPos(this._taskbar);this._resetElementPos(this._simulation)};Player._updateSimuationAndTaskBarSize=function(){var n=this._tutorialPane,t=this._simulation,i=this._taskbar,r,u;if(this._currentLayout.name=="bottomLeft"||this._currentLayout.name=="topLeft")r=n.offsetLeft+n.offsetWidth,t.style.left=r+"px",i.style.left=r+"px";else if(this._currentLayout.name=="bottomTop")t.style.top=n.offsetTop+n.offsetHeight+"px";else if(this._currentLayout.name=="topBottom"){var e=document.documentElement.clientHeight||document.body.clientHeight,i=this._taskbar,f=e-n.offsetTop;i.style.bottom=f.toString()+"px";t.style.bottom=f+i.offsetHeight+"px"}else u=n.offsetWidth+this._toolbar.offsetWidth,t.style.right=u+"px",i.style.right=u+"px"};Player._manageAudioBarDisplay=function(n,t){if(t){this._audioBar.style.display="";Sys.UI.DomElement.addCssClass(n,"pushed");this._setGlassPaneEnabled(!0);var i=this._getCurrentVisibleAudioControl();i&&(i.style.marginTop=(this._audioBar.offsetHeight-i.offsetHeight)/2+"px")}else this._audioBar.style.display="none",Sys.UI.DomElement.removeCssClass(n,"pushed"),this._setGlassPaneEnabled(!1);this._settingsPushedButtons.audio=t};Player._hideAudioBar=function(){getComputedStyle(this._audioBar).display!="none"&&this._manageAudioBarDisplay(this._audioButton,!1)};Player._refreshAudioBarPos=function(){var t=this._audioButton,n=this._audioBar,i=Sys.UI.DomElement.getLocation(t),u=this._currentLayout.name,r=document.documentElement.clientWidth||document.body.clientWidth;if(this._resetElementPos(n),this._currentLayout.undocked)this._smallResolution||(i.x<r/2?(n.style.right="auto",n.style.left=i.x+"px"):(n.style.left="auto",n.style.right=r-i.x-t.offsetWidth+"px")),n.style.bottom=t.offsetHeight+"px";else switch(u){case"bottomRight":case"topRight":this._smallResolution&&this._screenOrientation!=DeviceOrientation.Portrait||(n.style.right=t.offsetWidth+"px",n.style.top=i.y+"px");break;case"bottomLeft":case"topLeft":this._smallResolution&&this._screenOrientation!=DeviceOrientation.Portrait||(n.style.left=t.offsetWidth+"px",n.style.top=i.y+"px");break;case"bottomTop":n.style.top=t.offsetHeight+"px";this._smallResolution||(n.style.right=r-i.x-t.offsetWidth+"px");break;case"topBottom":n.style.bottom=t.offsetHeight+"px";this._smallResolution||(n.style.right=r-i.x-t.offsetWidth+"px")}};Player._refreshLayout=function(){this._resetElementSize(this._tutorialPane);this._resetElementPos(this._taskbar);this._resetElementPos(this._simulation);this._tutorialPane.style.top="";this._tutorialPane.style.bottom="";this._toolbar.style.top="";this._resetKeyboardMousePos();this._refreshAudioBarPos();this._tutorialPaneOpen&&this._adjustTutorialPaneSize();getComputedStyle(this._comment).display!="none"&&this._updateCommentPosition()};Player._getCursorCameraStartPos=function(){var i,t,r,n;if(this._currentLayout.undocked)return this._getCursorStartUndockedMode();if(n=Sys.UI.DomElement.getLocation(this._simulation),i=!1,this._currentCameraTipsType!=null&&(this._currentCameraTipsType==Controller.Actions.Hints&&this._currentState.HintsButton!=Controller.States.Hidden?(t=Sys.UI.DomElement.getLocation(this._tipsButton),i=!0):this._currentState.CameraButton!=Controller.States.Hidden&&(t=Sys.UI.DomElement.getLocation(this._playbackButton),i=!0)),!i){if(this._tutorialPaneOpen)return r=Sys.UI.DomElement.getLocation(this._messageSplitter),n=Sys.UI.DomElement.getLocation(this._simulation),cursorStartPos={x:r.x-n.x+this._messageSplitter.offsetWidth/2,y:r.y-n.y+this._messageSplitter.offsetHeight/2};if(this._currentState.MessageButton!=Controller.States.Hidden)t=Sys.UI.DomElement.getLocation(this._messageButton);else return null}return cursorStartPos={x:t.x-n.x,y:t.y-n.y}};Player._getCursorStartUndockedMode=function(){var i=getComputedStyle(this._messageBox).display!="none",n,t;return i?(n=Sys.UI.DomElement.getLocation(this._messageBox),cameraStartPos={x:n.x,y:n.y+this._messageBox.offsetHeight/2}):(t=Sys.UI.DomElement.getLocation(this._wheel),cameraStartPos={x:t.x,y:t.y})};Player._updateMousePosition=function(n){if(n){var t={x:parseInt(this._cursorSimulation.style.left),y:parseInt(this._cursorSimulation.style.top)};this._updateTrackPad(Controller.setMousePosition(t))}else this._updateTrackPad(Controller.setMousePosition(null))};Player._setGlassPaneEnabled=function(n,t){!t&&!n&&(this._currentState.BlockControl||this._cameraActive||this._triggersLive.TriggerObjectMessageShown!==!1||this._settingsPushedButtons.settings||this._tutorialPaneOpen&&this._smallResolution)||(this._glassPane.style.display=n?"":"none")};Player._addAudioControl=function(n,t,i){var s=this._audioControls,f=!1,u,h,r,e,o,c;for(h in s)u=s[h],f||u.initialSource!=n||(f=u,u.enabled=u.controls=t,Sys.UI.DomElement[u.enabled?"addCssClass":"removeCssClass"](u,"enabled")),t&&u.enabled&&(u.style.display=f==u?"":"none");return f?f:(r=null,e=Sys.UI.DomElement.containsCssClass(document.documentElement,"ie8"),e?(o=document.createElement("div"),c="<object classid='clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6'><param name='URL' value='"+n+"'/><param name='autoStart' value='false' /><param name='volume' value='75' /><param name='uiMode' value='"+(t?"mini":"none")+"'>"+(t?"<param name='showcontrols' value='false'>":"")+(t?"<param name='enabled' value='false'>":"")+"<\/object>",o.innerHTML=c,r=o.firstChild):(r=document.createElement("audio"),r.src=n,r.controls=t),r.id="audioControl"+this._audioControlInstanceCount++,r.className="audio_control"+(t?" enabled":""),r.initialSource=n,r.messageType=i,r.enabled=t,this._audioBar.appendChild(r),this._audioControls[r.id]=r,e?r.attachEvent("PlayStateChange",this._onIEPlayStateChangeHandler):($addHandler(r,"play",this._onPlaySoundHandler),$addHandler(r,"playing",this._onPlaySoundHandler),$addHandler(r,"pause",this._onPauseSoundHandler),$addHandler(r,"ended",this._onEndedSoundHandler),$addHandler(r,"volumechange",this._onVolumeChangeSoundHandler),r.volume=this._currentAudioVolume,r.muted=this._currentAudioMuted),r)};Player._onIEPlayStateChange=function(n){this._currentAudio.paused=!1;this._currentAudio.ended=!1;switch(n){case 1:case 2:this._currentAudio.paused=!0;this._onPauseSoundHandler();return;case 3:this._onPlaySoundHandler();return;case 8:this._currentAudio.ended=!0;this._onEndedSoundHandler();return}};Player._getCurrentVisibleAudioControl=function(){var t=this._audioControls,i,n;for(i in t)if(n=t[i],n.enabled&&n.style.display!="none")return n;return null};Player._isAudioPlaying=function(){return this._currentAudio!=null&&!this._currentAudio.paused&&!this._currentAudio.ended};Player._isAudio=function(){return this._currentAudio!=null};Player._startAudio=function(){if(this._currentAudio){Sys.UI.DomElement.addCssClass(document.body,"audiopending");try{this._currentAudio.play?this._currentAudio.play():this._currentAudio.controls.play();setTimeout(function(){Player._onAudioPlayAttempt()},0)}catch(n){this._onAudioPlayAttempt()}}};Player._pauseAudio=function(){this._currentAudio&&(this._currentAudio.pause?this._currentAudio.pause():this._currentAudio.controls.pause())};Player._isAudioSuspended=function(){return this._currentAudio?this._currentAudio.paused&&!this._currentAudio.ended:!1};Player._playAudio=function(n,t,i){if(n&&n.trim()!=""&&this._isAudioSupported){if(this._isAudioPlaying()){if(this._currentAudio.initialSource==n){this._setAudioPlayingStyle(!0);this._currentState.AudioButton!=Controller.States.Hidden||t||this._isMovieMode()||(this._displayAudioButton(),this._addAudioControl(n,!0,i));return}this._pauseAudio()}this._currentAudio=this._addAudioControl(n,!t,i);this._startAudio();t||this._isMovieMode()?this._currentState.AudioButton==Controller.States.Visible&&(this._setAudioButtonEnabled(!1),this._hideAudioBar()):this._displayAudioButton()}};Player._restoreMainAudio=function(){this._isMovieMode()||this._displayAudioButton()};Player._displayAudioButton=function(){Sys.UI.DomElement.removeCssClass(this._audioButton,"disabled");this._audioButton.disabled=!1;this._isAudioPlaying()?Sys.UI.DomElement.addCssClass(this._audioButton,"playing"):Sys.UI.DomElement.removeCssClass(this._audioButton,"playing");this._currentState.AudioButton==Controller.States.Hidden&&(this._audioButton.style.display="",this._refreshAudioBarPos());this._currentState.AudioButton=Controller.States.Visible;this._updateTaskBarDisplay();this._updateProgressBarDisplay()};Player._setAudioButtonEnabled=function(n){n?(Sys.UI.DomElement.removeCssClass(this._audioButton,"disabled"),this._audioButton.disabled=!1,this._currentState.AudioButton=Controller.States.Visible):(Sys.UI.DomElement.removeCssClass(this._audioButton,"playing"),Sys.UI.DomElement.addCssClass(this._audioButton,"disabled"),this._audioButton.disabled=!0,this._currentState.AudioButton=Controller.States.Disabled)};Player._setAudioPlayingStyle=function(n){n?(Sys.UI.DomElement.addCssClass(document.body,"audioplaying"),this.audioButtonENoteUndocked.title=this.audioButtonENoteDocked.title=this.Resources.SoundPlaying):(Sys.UI.DomElement.removeCssClass(document.body,"audioplaying"),this.audioButtonENoteUndocked.title=this.audioButtonENoteDocked.title=this.Resources.SoundStopped)};Player._onPlaySound=function(n){var t=n?n.target:this._currentAudio;t.volume=this._currentAudioVolume;t.muted=this._currentAudioMuted;Sys.UI.DomElement.removeCssClass(document.body,"audiopending");this._setAudioPlayingStyle(!0);!this._isTriggerMessageDisplayed||Player.DISPLAY_TRIGGERS_IN_PLACE||t.enabled||this._restorePreviousMessage()};Player._onPauseSound=function(n){var t=n?n.target:this._currentAudio;this._setAudioPlayingStyle(!1)};Player._onEndedSound=function(n){var t=n?n.target:this._currentAudio,i;if(this._isMovieMode()||!t.enabled){if(this._setAudioPlayingStyle(!1),!this._isMovieMode()&&this._currentState.AudioButton==Controller.States.Disabled){for(i in this._audioControls)if(t=this._audioControls[i],t.enabled&&t.style.display!="none"){this._currentAudio=t;break}this._setAudioButtonEnabled(!0)}}else this._pauseAudio(),t.currentTime=0};Player._onVolumeChangedSound=function(n){var t=n?n.target:this._currentAudio;this._currentAudioVolume=t.volume;this._currentAudioMuted=t.muted};Player._unloadAllAudio=function(){var t,i,n;this._pauseAudio();t=this._audioControls;for(i in t)n=t[i],n&&n.parentNode==this._audioBar&&this._audioBar.removeChild(n);this._audioControls={}};Player._onAudioPlayAttempt=function(){!this._audioInstructionsValidated&&Sys.UI.DomElement.containsCssClass(document.body,"audiopending")&&(this._isBusy=!0,__BROWSER_IS_MOBILE_TABLET&&($get("audioInstructionsText").innerText=Player.Resources.AudioInstructionsTouch),this._audioInstructions.style.display="")};Player._processValidateAudioInstructions=function(){if(this._audioInstructionsValidated=!0,this._audioInstructions.style.display="none",this._unblockCamera(),this._currentAudio)try{this._currentAudio.play?this._currentAudio.play():this._currentAudio.controls.play()}catch(n){}};Player._createSplitterControl=function(){var n=$create(Assima.Controls.Splitter,{},null,null,this._messageSplitter);return n.add_splitterMoved(Function.createDelegate(this,this._splitterMoved)),n.add_endMoving(this._controlEndMoving),n};Player._checkAndGetNewSize=function(n,t,i){return n>i?i:n<t?t:n};Player._controlEndMoving=function(){!Player._cameraActive&&Player._touchpadopen&&(Player._updateMousePosition(!0),Player._adjustTouchPadArea())};Player._splitterMoved=function(n,t){var r=this._tutorialPane,u=this._currentLayout.name,i=0;switch(this._currentLayout.name){case"bottomLeft":case"topLeft":i=t.posX-r.offsetLeft;break;case"bottomTop":i=t.posY-r.offsetTop;break;case"topBottom":i=Player._toolbar.offsetTop-t.posY;break;default:i=Player._toolbar.offsetLeft-t.posX}this._adjustTutorialPaneSize(i)};Player._adjustTutorialPaneSize=function(n){var t=this._tutorialPane,r=this._simulation,i=this._taskbar,u=100,f=1e4,s,h,c,e,o,l;this._tutorialPaneOffsetDelta||(this._tutorialPaneOffsetDelta=this._getElementOffsetDelta(t));switch(Player._currentLayout.name){case"bottomLeft":case"topLeft":var v=document.documentElement.clientWidth||document.body.clientWidth,e=Math.min(f,v-t.offsetLeft-(this._touchpadopen?this._cursorSimulation.offsetWidth:0)-this._tutorialPaneOffsetDelta.width),o=this._checkAndGetNewSize(n||t.offsetWidth,u,e);t.style.width=o+"px";this._smallResolution||(s=t.offsetLeft+t.offsetWidth,r.style.left=s+"px",i.style.left=s+"px");break;case"bottomTop":h=Math.min(f,this._taskbar.offsetTop-this._toolbar.offsetHeight-(this._touchpadopen?this._cursorSimulation.offsetHeight:0));c=this._checkAndGetNewSize(n||t.offsetHeight,u,h);t.style.height=c+"px";this._smallResolution||(r.style.top=t.offsetTop+t.offsetHeight+"px");break;case"topBottom":var a=document.documentElement.clientHeight||document.body.clientHeight,h=Math.min(f,this._toolbar.offsetTop-this._navigationBar.offsetHeight-i.offsetHeight-(this._touchpadopen?this._cursorSimulation.offsetHeight:0)),c=this._checkAndGetNewSize(n||t.offsetHeight,u,h);t.style.height=c+"px";i.style.bottom=a-t.offsetTop+"px";this._smallResolution||(r.style.bottom=a-i.offsetTop+"px");break;default:e=Math.min(f,this._toolbar.offsetLeft-this._tutorialPaneOffsetDelta.width-(this._touchpadopen?this._cursorSimulation.offsetWidth:0));o=this._checkAndGetNewSize(n||t.offsetWidth,u,e);t.style.width=o+"px";this._smallResolution||(l=t.offsetWidth+this._toolbar.offsetWidth,r.style.right=l+"px",i.style.right=l+"px")}this._touchpadopen&&(this._adjustTouchPadArea(),this._refreshVirtualCursor());this._taskbarScrollExtender.refresh()};Player._adjustTouchPadArea=function(){var n=getComputedStyle(this._simulation);this._touchpad.style.left=n.left;this._touchpad.style.right=n.right;this._touchpad.style.top=n.top;this._touchpad.style.bottom=n.bottom};Player._refreshVirtualCursor=function(){var u=this._currentLayout.name,t=Sys.UI.DomElement.getLocation(this._cursorSimulation),i=t.x,r=t.y,n=Sys.UI.DomElement.getLocation(this._simulation);i<n.x?this._cursorSimulation.style.left=n.x+"px":i+this._cursorSimulation.offsetWidth>n.x+this._simulation.offsetWidth&&(this._cursorSimulation.style.left=n.x+this._simulation.offsetWidth-this._cursorSimulation.offsetWidth+"px");r<n.y?this._cursorSimulation.style.top=n.y+"px":r+this._cursorSimulation.offsetHeight>n.y+this._simulation.offsetHeight&&(this._cursorSimulation.style.top=n.y+this._simulation.offsetHeight-this._cursorSimulation.offsetHeight+"px")};Player._createkeyboardMouseMovingControl=function(){var n=$create(Assima.Controls.ElementMoving,{},null,null,this._keyboardMouseGrip);return n.add_elementMoved(this._keyboardMouseMoving),n.add_elementDblClicked(this._resetKeyboardMousePos),n};Player._createMessagePopupMovingControl=function(){var n=$create(Assima.Controls.ElementMoving,{},null,null,this._popupTitleBar);return n.add_startMoving(this._messagePopupStartMoving),n.add_elementMoved(this._messagePopupMoving),n.add_endMoving(this._messagePopupEndMoving),n};Player._createMessagePopupResizeControls=function(){var r=$create(Assima.Controls.ElementMoving,{},null,null,this._resizePopupWindowSE),n,t,i;r.add_startMoving(this._messagePopupStartMoving);r.add_elementMoved(this._messagePopupResizeSE);r.add_endMoving(this._messagePopupEndMoving);n=$create(Assima.Controls.ElementMoving,{},null,null,this._resizePopupWindowNW);n.add_startMoving(this._messagePopupStartMoving);n.add_elementMoved(this._messagePopupResizeNW);n.add_endMoving(this._messagePopupEndMoving);t=$create(Assima.Controls.ElementMoving,{},null,null,this._resizePopupWindowNE);t.add_startMoving(this._messagePopupStartMoving);t.add_elementMoved(this._messagePopupResizeNE);t.add_endMoving(this._messagePopupEndMoving);i=$create(Assima.Controls.ElementMoving,{},null,null,this._resizePopupWindowSW);i.add_startMoving(this._messagePopupStartMoving);i.add_elementMoved(this._messagePopupResizeSW);i.add_endMoving(this._messagePopupEndMoving)};Player._createMessageBoxMovingControl=function(){var n=$create(Assima.Controls.ElementMoving,{},null,null,this._messageBoxTitleBar);return n.add_startMoving(this._messageBoxStartMoving),n.add_elementMoved(this._messageBoxMoving),n.add_endMoving(this._messageBoxEndMoving),n};Player._createMessageBoxResizeControl=function(){var n=$create(Assima.Controls.ElementMoving,{},null,null,this._resizeMessageBoxSE);n.add_startMoving(this._messageBoxStartMoving);n.add_elementMoved(this._messageBoxResizeSE);n.add_endMoving(this._messageBoxEndMoving)};Player._buildProgressbar=function(){var n=this._currentState,r=Controller.States.Hidden,t,i;this._progressBar.style.display="";t=n.ShowSlider||this._fullNavigation;i=n.NavigationMode!=Controller.NavigationModes.NoNavigation;this._progressbarControl==null?this._progressbarControl=this._createProgressbarControl(this._currentScreen,this._maxScreen+1,t,i):(this._progressbarControl.set_stepCount(this._maxScreen+1),this._progressbarControl.set_step(this._currentScreen),this._progressbarControl.set_enabledStepCount(this._enabledStepCount),this._progressbarControl.set_showSlider(t),this._progressbarControl.set_enableSlider(i));this._canBrowseAllScreens(n)&&this._progressbarControl.set_loadedStepCount(this._historyData.LastLoadedStateIndex)};Player._adjustProgressBarPos=function(){var u=this._mustDisplaySettingsButtonsOnNavigationBar(),n=0,i,t,r;getComputedStyle(this._previousButton).display!="none"&&(n+=2);this._canPlayPauseCamera()&&n++;i=this._exitButton.offsetWidth;this._progressBar.style.left=this._smallResolution?n*i+20+"px":(n+1)*i+"px";this._progressBar.style.right="";(this._smallResolution||this._currentState.IsSandboxBehavior)&&(t=u||this._currentState.IsSandboxBehavior?this._getFirstVisibleSettingsButton():this._exitButton,t==null&&(t=this._exitButton),r=document.documentElement.clientWidth||document.body.clientWidth,this._progressBar.style.right=r-Sys.UI.DomElement.getLocation(t).x+25+"px")};Player._createProgressbarControl=function(n,t,i,r){var u=$create(Assima.Controls.Progressbar,{stepCount:t,step:n,showSlider:i,enableSlider:r,enabledStepCount:this._enabledStepCount},null,null,this._progressBar);return u.add_stepChanging(Player._progressbarStepChanging),u.add_stepChanged(Player._progressbarStepChanged),u};Player._progressbarStepChanging=function(n,t){Player._currentStepSlide=t.step};Player._progressbarStepChanged=function(n,t){var i=t.step+1;Player._tryMoveToScreen(i)||n.set_step(Player._currentStepSlide)};Player._tryGetResumeStepCount=function(){return this._lessonLocation&&!this._getResumeData()?this._lessonLocation.stepCount:0};Player._getResumeData=function(){if(window.ResumeData)return window.ResumeData;try{var n=window.opener||window.parent;if(n&&n.ResumeData)return window.ResumeData=typeof n.ResumeData=="string"?JSON.parse(n.ResumeData):n.ResumeData,window.ResumeData}catch(t){}return null};Player._createWheelControl=function(n,t,i,r,u){var f=$create(Assima.Controls.Wheel,{stepCount:t,step:n,buttons:i,showSpinner:r,enableSpinner:u,enabledStepCount:this._enabledStepCount,opacityAnimationSpeed:Player.MESSAGE_OPACITY_ANIMATION_SPEED},null,null,this._wheel);return f.add_stepChanging(Player._wheelStepChanging),f.add_stepChanged(Player._wheelStepChanged),f.add_moving(Player._wheelMoving),f.add_moved(Player._wheelMoved),f.add_unfocused(Player._wheelUnfocused),f.add_expandCollapse(Player._wheelExpandCollapse),f};Player._wheelStepChanging=function(n,t){var i=Player._currentStepSlide=t.step;if(!Player._smallResolution&&!Player._isModalDisplayed()){Player._tutorialMessageBeforeMoving==null&&(Player._tutorialMessageBeforeMoving={Type:Player._currentTutorialMessage.Type,Message:Player._currentTutorialMessage.Message.Clone()},Player._spinnerMoving=!0);var r=Player._historyData,u=r.MessageList,f=Controller.States,e=Player._currentState;i<r.LastLoadedStateIndex&&(i==Player._currentScreen?(Player._updateMessageBox(Player._tutorialMessageBeforeMoving.Type,Player._tutorialMessageBeforeMoving.Message),Player._tutorialMessageBeforeMoving=null):Player._updateMessageBox(Controller.MessageTypes.Default,u[i]),Player._updateMessageBoxTitle(i+1,Player._maxScreen+1))}};Player._wheelStepChanged=function(n,t){Player._tutorialMessageBeforeMoving=null;Player._spinnerMoving=!1;var i=t.step+1;Player._tryMoveToScreen(i)||n.set_step(Player._currentStepSlide)};Player._tryMoveToScreen=function(n){var t=Player._canBrowseAllScreens()?Player._historyData.LastLoadedStateIndex:Player._enabledStepCount;return n<=t?(Controller.moveToIndex(n),!0):!1};Player._wheelMoving=function(n,t){var i=Player._getWheelAdjustedPosition(n,t),r,u;(i.x!=-1||i.y!=-1)&&(t.set_cancel(!0),r=i.x!=-1?i.x:t.x,u=i.y!=-1?i.y:t.y,setTimeout(function(){Player._wheelControl.move(r,u)},0))};Player._getWheelAdjustedPosition=function(n,t){var i=n.get_radius(),u=Player._simulation,r={x:-1,y:-1};return t.x-i<0?r.x=i:t.x+i>u.offsetWidth&&(r.x=u.offsetWidth-i),t.y-i<0?r.y=i:t.y+i>u.offsetHeight&&(r.y=u.offsetHeight-i),r};Player._wheelMoved=function(n){Player._checkReduceWheelOpacity(n)};Player._wheelUnfocused=function(n){Player._checkReduceWheelOpacity(n)};Player._wheelExpandCollapse=function(n){var i=n.get_location(),t=Player._getWheelAdjustedPosition(n,i),r,u;(t.x!=-1||t.y!=-1)&&(r=t.x!=-1?t.x:i.x,u=t.y!=-1?t.y:i.y,Player._wheelControl.move(r,u))};Player._updateWheelPosition=function(){var u=this._messageBox,t=Sys.UI.DomElement.getLocation(u),f=this._wheelControl,n=f.get_radius(),i=f.get_location(),e={x1:t.x,x2:t.x+u.offsetWidth,y1:t.y,y2:t.y+u.offsetHeight},o={x1:i.x-n,x2:i.x+n,y1:i.y-n,y2:i.y+n},r;this._areElementsOverlapping(o,e)&&(r=this._tryMoveObjectOutOfArea(o,e,30),r!=null&&f.move(r.x+n,r.y+n))};Player._tryMoveObjectOutOfArea=function(n,t,i,r){var u={Right:0,Bottom:1,Top:2,Left:3},c=n.y2-n.y1,h=n.x2-n.x1,v=function(){var n=t.y1-c-i;return n<0?-1:n},y=function(){var n=t.y2+i;return n+c>Player._simulation.offsetHeight?-1:n},p=function(){var n=t.x1-h-i;return n<0?-1:n},w=function(){var n=t.x2+i;return n+h>Player._simulation.offsetWidth?-1:n},f=[],s,l,e,o,a;for(f.push({Position:u.Top,Offset:n.y2-t.y1,MovingFunction:v}),f.push({Position:u.Right,Offset:t.x2-n.x1,MovingFunction:w}),f.push({Position:u.Bottom,Offset:t.y2-n.y1,MovingFunction:y}),f.push({Position:u.Left,Offset:n.x2-t.x1,MovingFunction:p}),f.sort(function(n,t){return n.Offset<t.Offset?-1:n.Offset>t.Offset?1:n.Position-t.Position}),e=-1,s=0,l=f.length;s<l;++s)if(e=f[s].MovingFunction(),e!=-1)break;if(o=null,e==-1){if(!r)return null;o=u.Right;a=Player._simulation.offsetWidth-t.x2>t.x1;e=a?t.x2+1:t.x1-h-1}else o=f[s].Position;return newObjectLocation={x:o==u.Left||o==u.Right?e:n.x1,y:o==u.Top||o==u.Bottom?e:n.y1}};Player._checkReduceWheelOpacity=function(n){var t=n.get_element();this._isElementAboveSimObject(t)&&n.reduceOpacity()};Player._createTouchPadControl=function(){var n=$create(Assima.Controls.TouchPad,{},null,null,this._touchpad);return n.add_padMoving(this._touchpadMoving),n.add_endMoving(this._controlEndMoving),n.add_singletap(this._touchpadSingleTap),n.add_rightClick(this._touchpadRightClick),n.add_padScrolling(this._touchpadScrolling),n.add_doubletap(this._touchpadDoubleTap),n.add_gestureForward(this._touchpadZoomingGesture),n.add_pinchPixels(this._touchpadZoomingPx),n};Player._touchpadMoving=function(n,t){!Player._cameraActive&&Player._touchpadopen&&(t.offsetX!=0||t.offsetY!=0)&&Player._moveSimulationMouse(t)};Player._moveSimulationMouse=function(n){var i=Sys.UI.DomElement.getLocation(this._simulation),r=Player._cursorSimulation,t={x:parseInt(r.style.left),y:parseInt(r.style.top)},u;this._isScrollingNearEdges(n,i,t)||(t.x+=n.offsetX,t.y+=n.offsetY,t.x<i.x?t.x=i.x:t.x>i.x+Player._simulation.offsetWidth-1&&(t.x=i.x+Player._simulation.offsetWidth-1),t.y<i.y?t.y=i.y:t.y>i.y+Player._simulation.offsetHeight&&(t.y=i.y+Player._simulation.offsetHeight),r.style.left=t.x+"px",r.style.top=t.y+"px",u=this._isCursorInTriggerObject(Sys.UI.DomElement.getLocation(r)),u?this._processTriggerObjectClick(!1,u):this._triggersLive.TriggerObjectMessageShown===!1||this._isMovieMode()?this._updateMousePosition(!0):this._onMouseMoveWhileTriggerMessageOpen(Sys.UI.DomElement.getLocation(this._cursorSimulation)))};Player._isScrollingNearEdges=function(n,t,i){var u=!1,f=50,r=Controller.getSimulatorDisplayPanel(),o=r.scrollWidth-r.clientWidth,e;return n.offsetX&&o>0&&(n.offsetX>0?i.x>t.x+this._simulation.offsetWidth-f&&r.scrollLeft<o&&(r.scrollLeft=Math.min(o,r.scrollLeft+n.offsetX),u=!0):i.x<f&&r.scrollLeft>0&&(r.scrollLeft=Math.max(0,r.scrollLeft+n.offsetX),u=!0)),e=r.scrollHeight-r.clientHeight,n.offsetY&&e>0&&(n.offsetY>0?i.y>t.y+this._simulation.offsetHeight-f&&r.scrollTop<e&&(r.scrollTop=Math.min(e,r.scrollTop+n.offsetY),u=!0):i.y<f&&r.scrollTop>0&&(r.scrollTop=Math.max(0,r.scrollTop+n.offsetY),u=!0)),u};Player._touchpadSingleTap=function(){Player._cameraActive||Player._processTouchPadLeftClick(!1)};Player._touchpadDoubleTap=function(){Player._cameraActive||Player._processTouchPadLeftClick(!0)};Player._touchpadRightClick=function(){Player._cameraActive||(Controller.execute(Controller.Actions.TrackPad_RightClick),Player._updateMousePosition(!0))};Player._touchpadScrolling=function(n,t){Player._cameraActive||(t.offsetY&&Player._scrollSimulationElementVertical(t.offsetY),t.offsetX&&Player._scrollSimulationElementHorizontal(t.offsetX))};Player._touchpadZoomingGesture=function(n,t){Player._cameraActive||Player._trackPadInfo.VerticalScrollHTML||Player._trackPadInfo.HorizontalScrollHTML||Controller.forwardGestureEvent(t.rawEvent)};Player._touchpadZoomingPx=function(n,t){if(!Player._cameraActive){var i=Player._trackPadInfo.VerticalScrollHTML,r=Player._trackPadInfo.HorizontalScrollHTML,u=Controller.getSimulatorDisplayPanel();i&&i!=u||r&&r!=u||Controller.forwardZoomPixels(t)}};Player._scrollSimulationElementVertical=function(n){var t=this._trackPadInfo.VerticalScrollHTML;t&&t!=Controller.getSimulatorDisplayPanel()&&(t.scrollTop=Math.max(0,Math.min(t.scrollHeight-t.clientHeight,t.scrollTop+n)))};Player._scrollSimulationElementHorizontal=function(n){var t=this._trackPadInfo.HorizontalScrollHTML;t&&t!=Controller.getSimulatorDisplayPanel()&&(t.scrollLeft=Math.max(0,Math.min(t.scrollWidth-t.clientWidth,t.scrollLeft+n)))};Player._updateTrackPad=function(n){var t=n.HorizontalScrollHTML,i=n.VerticalScrollHTML;t!==!0&&(this._trackPadInfo.HorizontalScrollHTML=t);i!==!0&&(this._trackPadInfo.VerticalScrollHTML=i)};Player._keyboardMouseMoving=function(n,t){var i=Player._virtualkeyboard,e=Sys.UI.DomElement.getLocation(i),r=e.y-t.offsetY,o=Sys.UI.DomElement,u=Player._currentLayout.undocked?Player._taskbar.offsetTop:Player._currentLayout.name!="topBottom"?Player._taskbar.offsetTop+Player._taskbar.offsetHeight:Player._toolbar.offsetTop,f=!Player._currentLayout.undocked&&Player._currentLayout.name=="bottomTop"?Player._toolbar.offsetHeight:Player._simulation.offsetTop;if(Sys.UI.DomElement.removeCssClass(i,"docking"),Sys.UI.DomElement.removeCssClass(i,"animate"),r<f)r=f;else if(r+i.offsetHeight>u){r=u-i.offsetHeight;Player._resetKeyboardMousePos();return}i.style.top=r+"px"};Player._resetKeyboardMousePos=function(){Player._resetElementPos(Player._virtualkeyboard);Sys.UI.DomElement.addCssClass(Player._virtualkeyboard,"docking")};Player._messagePopupStartMoving=function(){Player._smallResolution||(Sys.UI.DomElement.addCssClass(Player._messagePopup,"moving"),Player._messagePopupOpacityAnimationInfo.elementmoving=!0)};Player._messagePopupEndMoving=function(){Player._smallResolution||(Sys.UI.DomElement.removeCssClass(Player._messagePopup,"moving"),Player._messagePopupOpacityAnimationInfo.elementmoving=!1)};Player._messagePopupMoving=function(n,t){Player._smallResolution||Player._windowMove(Player._messagePopupWindow,Player._messagePopupTransparency,t)};Player._messagePopupResizeSE=function(n,t){Player._smallResolution||Player._windowResizeSE(Player._messagePopupWindow,Player._messagePopupTransparency,Player._messagePopupOffsetDelta,t,Player.MESSAGEPOPUP_MIN_WIDTH,Player.MESSAGEPOPUP_MIN_HEIGHT)};Player._messagePopupResizeNW=function(n,t){Player._smallResolution||Player._windowResizeNW(Player._messagePopupWindow,Player._messagePopupTransparency,Player._messagePopupOffsetDelta,t,Player.MESSAGEPOPUP_MIN_WIDTH,Player.MESSAGEPOPUP_MIN_HEIGHT)};Player._messagePopupResizeNE=function(n,t){Player._smallResolution||Player._windowResizeNE(Player._messagePopupWindow,Player._messagePopupTransparency,Player._messagePopupOffsetDelta,t,Player.MESSAGEPOPUP_MIN_WIDTH,Player.MESSAGEPOPUP_MIN_HEIGHT)};Player._messagePopupResizeSW=function(n,t){Player._smallResolution||Player._windowResizeSW(Player._messagePopupWindow,Player._messagePopupTransparency,Player._messagePopupOffsetDelta,t,Player.MESSAGEPOPUP_MIN_WIDTH,Player.MESSAGEPOPUP_MIN_HEIGHT)};Player._messageBoxStartMoving=function(n,t){if(Player._smallResolution||Player._getMessageBoxNavigation(t.target)){t.set_cancel(!0);return}Sys.UI.DomElement.addCssClass(Player._messageBox,"moving");Player._messageBoxOpacityAnimationInfo.elementmoving=!0};Player._messageBoxMoving=function(n,t){Player._smallResolution||(Player._windowMove(Player._messageBox,Player._simulation,t),Player._updateMessageBoxCenterPos(),Player._userMovedMessageBox=!0)};Player._messageBoxEndMoving=function(){Player._smallResolution||(Sys.UI.DomElement.removeCssClass(Player._messageBox,"moving"),Player._messageBoxOpacityAnimationInfo.elementmoving=!1,Player._messageboxOverlapsSim=Player._isElementAboveSimObject(Player._messageBox),Player._opacityStartAnimation(Player._messageBoxOpacityAnimationInfo))};Player._messageBoxResizeSE=function(n,t){Player._smallResolution||(Player._windowResizeSE(Player._messageBox,Player._simulation,Player._messageBoxOffsetDelta,t,Player.MESSAGEBOX_MIN_WIDTH,Player.MESSAGEBOX_MIN_HEIGHT),Player._updateMessageBoxCenterPos())};Player._updateMessageBoxCenterPos=function(){var n=Player._messageBox;Player._messageBoxCenter={x:n.offsetLeft+n.offsetWidth/2,y:n.offsetTop+n.offsetHeight/2}};Player._windowMove=function(n,t,i){Player._windowMoveTo(n,t,{x:n.offsetLeft-i.offsetX,y:n.offsetTop-i.offsetY})};Player._windowMoveTo=function(n,t,i){var r={width:n.offsetWidth,height:n.offsetHeight};t&&this._checkBounds(i,r,r,t);n.style.marginLeft="0";n.style.marginTop="0";n.style.left=i.x+"px";n.style.right="auto";n.style.top=i.y+"px";n.style.bottom="auto"};Player._windowResizeSE=function(n,t,i,r,u,f){var e=n.offsetWidth-r.offsetX,o=n.offsetHeight-r.offsetY;e<u&&(e=u);o<f&&(o=f);t&&(t.offsetWidth>u&&n.offsetLeft+e>t.offsetWidth&&(e=t.offsetWidth-n.offsetLeft),t.offsetHeight>f&&n.offsetTop+o>t.offsetHeight&&(o=t.offsetHeight-n.offsetTop));n.style.width=e-(i?i.width:0)+"px";n.style.height=o-(i?i.height:0)+"px"};Player._windowResizeNW=function(n,t,i,r,u,f){var o=n.offsetLeft-r.offsetX,s=n.offsetTop-r.offsetY,h=n.offsetWidth+r.offsetX,e=n.offsetHeight+r.offsetY;h<u&&(o=n.offsetLeft+n.offsetWidth-u,h=u);e<f&&(s=n.offsetTop+n.offsetHeight-f,e=f);t&&(o<0&&(o=0),s<0&&(s=0,e=n.offsetTop+n.offsetHeight),n.offsetTop+e>t.offsetHeight&&(e=t.offsetHeight-n.offsetTop));n.style.marginLeft="0";n.style.marginTop="0";n.style.width=h-(i?i.width:0)+"px";n.style.height=e-(i?i.height:0)+"px";n.style.left=o+"px";n.style.top=s+"px"};Player._windowResizeNE=function(n,t,i,r,u,f){var o=n.offsetWidth-r.offsetX,s=n.offsetTop-r.offsetY,e=n.offsetHeight+r.offsetY;o<u&&(o=u);e<f&&(s=n.offsetTop+n.offsetHeight-f,e=f);t&&(t.offsetWidth>u&&n.offsetLeft+o>t.offsetWidth&&(o=t.offsetWidth-n.offsetLeft),s<0&&(s=0,e=n.offsetTop+n.offsetHeight),n.offsetTop+e>t.offsetHeight&&(e=t.offsetHeight-n.offsetTop));n.style.marginTop="0";n.style.width=o-(i?i.width:0)+"px";n.style.height=e-(i?i.height:0)+"px";n.style.top=s+"px"};Player._windowResizeSW=function(n,t,i,r,u,f){var o=n.offsetLeft-r.offsetX,s=n.offsetWidth+r.offsetX,e=n.offsetHeight-r.offsetY;s<u&&(o=n.offsetLeft+n.offsetWidth-u,s=u);e<f&&(e=f);t&&(o<0&&(o=0,s=n.offsetLeft+n.offsetWidth),t.offsetHeight>f&&n.offsetTop+e>t.offsetHeight&&(e=t.offsetHeight-n.offsetTop));n.style.marginLeft="0";n.style.left=o+"px";n.style.width=s-(i?i.width:0)+"px";n.style.height=e-(i?i.height:0)+"px"};Player._windowResizeS=function(n,t,i,r,u,f){var e=n.offsetHeight-r.offsetY;e<f&&(e=f);t&&t.offsetHeight>f&&n.offsetTop+e>t.offsetHeight&&(e=t.offsetHeight-n.offsetTop);n.style.height=e-(i?i.height:0)+"px"};Player._windowResizeN=function(n,t,i,r,u,f){var o=n.offsetTop-r.offsetY,e=n.offsetHeight+r.offsetY;e<f&&(e=f,o=n.offsetTop+n.offsetHeight-f);t&&(o<0&&(o=0,e=n.offsetTop+n.offsetHeight),n.offsetTop+e>t.offsetHeight&&(e=t.offsetHeight-n.offsetTop));n.style.marginTop="0";n.style.height=e-(i?i.height:0)+"px";n.style.top=o+"px"};Player._windowResizeE=function(n,t,i,r,u){var f=n.offsetWidth-r.offsetX;f<u&&(f=u);t&&t.offsetWidth>u&&n.offsetLeft+f>t.offsetWidth&&(f=t.offsetWidth-n.offsetLeft);n.style.width=f-(i?i.width:0)+"px"};Player._windowResizeW=function(n,t,i,r,u){var f=n.offsetLeft-r.offsetX,e=n.offsetWidth+r.offsetX;e<u&&(f=n.offsetLeft+n.offsetWidth-u,e=u);t&&f<0&&(f=0,e=n.offsetLeft+n.offsetWidth);n.style.left=f+"px";n.style.marginLeft="0";n.style.width=e-(i?i.width:0)+"px"};Player._createTriggersObjects=function(n){var t=n.TriggerOnMouseOver;this._checkCreateTriggerObjects(t.List,TriggerTypes.OnMouseOver)};Player._checkCreateTriggerObjects=function(n,t){for(var f=Controller.requestTriggerData(n),i=0,e=n.length;i<e;++i){var r=n[i],o=r.TriggerId,s=r.ObjectId,u=f[o];u&&this._checkCreateTriggerObject(u.Message,r,t)}};Player._checkCreateTriggerObject=function(n,t,i){if(!this._isMessageEmpty(n)){var r=this._getTriggerDomElementId(t);return typeof this._triggersLive[r]=="undefined"&&this._createNewTriggerObject(t,i),this._triggersLive[r].Triggers[i].push(t.TriggerId),$get(r)}return null};Player._createNewTriggerObject=function(n){var r=this._getTriggerDomElementId(n),t,i;return this._triggersLive[r]={CurrentTriggerMessage:{Type:TriggerTypes.OnInfo,Index:0},Triggers:[[],[],[]]},t=document.createElement("div"),t.onclick=function(){},t.id=r,t.trigger=n,t.className="trigger_object infosymbol",t.overlay=t.appendChild(document.createElement("div")),t.overlay.className="obj_overlay",i=function(n){var t=document.createElement("div");return t.className="border "+n,t},t.leftBorder=t.appendChild(i("left")),t.topBorder=t.appendChild(i("top")),t.rightBorder=t.appendChild(i("right")),t.bottomBorder=t.appendChild(i("bottom")),this._triggersObject.appendChild(t)};Player._getTriggerDomElementId=function(n){return String.format("{0}${1}${2}",Player.TRIGGER_OBJECT_ID_PREFIX,n.ObjectId,JSON.stringify(n.Data))};Player._showTriggerMessage=function(n,t,i,r,u){var o=this._getTriggerDomElementId(t),f,p,h,l,s,y,e,c;if(!this._isTriggerMessageDisplayed||this._currentTriggerElementId!=o){if(f=n.Message,p=f.SoundFile,this._isMessageEmpty(f)){this._handleNewMessageSound(f,this._triggerMessage,!0,Controller.MessageTypes.Trigger_OnInfo);return}if(this._currentTriggerObjectRect=n.DisplayRect,h=Sys.UI.DomElement,Player.DISPLAY_TRIGGERS_IN_PLACE){__BROWSER_IS_MOBILE_TABLET&&!this._touchpadopen&&this._setGlassPaneEnabled(!0);this._clearTimeout("_unlockTriggerMessageTimeout");this._triggersLive.TriggerObjectMessageShown&&(e=$get(this._triggersLive.TriggerObjectMessageShown),e&&Sys.UI.DomElement.addCssClass(e,"infosymbol"));this._triggersLive.TriggerObjectMessageShown=o;this._triggerMessageContent.innerHTML=f.HTMLText;this._setContentDirection(this._triggerMessageContent,f.IsRTL);this._triggerMessage.className=i==TriggerTypes.OnInfo?"oninfo":i==TriggerTypes.OnMouseOver?"onhover":"onerror";!0&&(this._triggerMessage.className+=" closable");l=!1;r&&this._manageObjectTriggerSeveralMessages()&&(this._triggerMessage.className+=" multiple",l=!0);["audio","playing","timer"].forEach(function(n){h.removeCssClass(Player._triggerMessage,n)});this._handleNewMessageSound(f,this._triggerMessage,!0,Controller.MessageTypes.Trigger_OnInfo);this._triggerMessage.style.display="";this._triggerMessageContent.scrollTop=this._triggerMessageContent.scrollLeft=0;this._isTriggerMessageDisplayed=!0;var a={rectTrigger:n.DisplayRect,triggerObjectBorderWidth:u,triggerType:i,clickPoint:n.ClickPoint},w=Function.createAsyncDelegate(this,Function.createCallback(this._adjustTriggerMessagePosition,a)),v=this._triggerMessageContent.getElementsByTagName("img");for(s=0,y=v.length;s<y;++s)v[s].onload=w;this._adjustTriggerMessagePosition(this,a);e=$get(o);e&&h.removeCssClass(e,"infosymbol")}else c=this._triggerTypeToMessageType(i),this._currentLayout.undocked?this._updateMessageBox(c,f,!0):this._updateTutorialPane(c,f),this._isTriggerMessageDisplayed=!0;this._currentTriggerElementId=o;this._isMovieMode()&&this._checkCameraMessageTimer(f)}};Player._triggerTypeToMessageType=function(n){switch(n){case TriggerTypes.OnInfo:return Controller.MessageTypes.Trigger_OnInfo;case TriggerTypes.OnMouseOver:return Controller.MessageTypes.Trigger_OnMouseOver}return Controller.MessageTypes.Trigger_OnError};Player._hideTriggerMessage=function(){if(this._isTriggerMessageDisplayed){if(Player.DISPLAY_TRIGGERS_IN_PLACE){if(this._triggersLive.TriggerObjectMessageShown===!1)return;this._triggerMessage.style.display="none";Sys.UI.DomElement.removeCssClass(this._triggerMessage,"audio");Sys.UI.DomElement.removeCssClass(this._triggerMessage,"playing");var n=$get(this._triggersLive.TriggerObjectMessageShown);n&&Sys.UI.DomElement.addCssClass(n,"infosymbol");this._triggersLive.TriggerObjectMessageShown=!1;this._isTriggerMessageDisplayed=!1;this._setGlassPaneEnabled(!1);this._touchpadopen&&this._updateMousePosition(!0)}else this._restorePreviousMessage();this._currentTriggerObjectRect=null}};Player._handleTriggerObjectHovered=function(){var t={x:this._mouseCoordinates.x-this._simulationFrame.offsetLeft,y:this._mouseCoordinates.y-this._simulationFrame.offsetTop},n=this._isCursorInTriggerObject(t);n&&this._processTriggerObjectClick(!1,n)};Player._onMouseMoveWhileTriggerMessageOpen=function(n){if(this._currentTriggerObjectRect){var n,t=this._isCursorInRect(n,this._currentTriggerObjectRect);t||(t=Player.DISPLAY_TRIGGERS_IN_PLACE?this._isCursorInObject(n,this._triggerMessage):this._isCursorInObject(n,this._currentLayout.undocked?this._messageBox:this._tutorialPane));t?this._clearTimeout("_unlockTriggerMessageTimeout"):this._unlockTriggerMessageTimeout||(this._unlockTriggerMessageTimeout=setTimeout(this._unlockTriggerMessageDelegate,Player.THRESHOLD_UNLOCK_MS))}};Player._unlockTriggerMessage=function(){this._clearTimeout("_unlockTriggerMessageTimeout");this._hideTriggerMessage()};Player._clearTimeout=function(n){this[n]&&(clearTimeout(this[n]),this[n]=null)};Player._isCursorInObject=function(n,t){var i=Sys.UI.DomElement.getLocation(t);return n.x>=i.x&&n.x<=i.x+t.offsetWidth&&n.y>=i.y&&n.y<=i.y+t.offsetHeight};Player._isCursorInRect=function(n,t){return n.x>=t.left&&n.x<=t.left+t.width&&n.y>=t.top&&n.y<=t.top+t.height};Player._isCursorInTriggerObject=function(n){for(var r,i,u,t=null,f=this._visibleTriggers.length;f--;)r=this._visibleTriggers[f],i=r.rect,this._isCursorInRect(n,i)&&(u=i.width*i.height,(t==null||t.size>u)&&(t={size:u,object:r.object}));return t?t.object:!1};Player._adjustTriggerMessagePosition=function(n,t){var i=this._triggerMessage,r=t.rectTrigger,o=t.triggerObjectBorderWidth,l=i.offsetWidth,a=i.offsetHeight,p=Player.TRIGGER_ARROW_SIZE,u=o+p,f=this,e=Sys.UI.DomElement,s=function(){i.style.right="auto";i.style.left=r.left+"px";i.style.marginLeft=-1*o+"px";i.style.marginTop=0;f._triggerMessageArrow.style.top="";var n=r.left+i.offsetWidth-f._simulation.offsetWidth;n>0?(i.style.left=r.left-n-5+"px",f._triggerMessageArrow.style.left=n+10+"px"):f._triggerMessageArrow.style.left=""},v=function(){i.style.bottom="auto";i.style.top=r.top+"px";i.style.marginTop=-1*o+"px";i.style.marginLeft=0;f._triggerMessageArrow.style.left="";var n=r.top+i.offsetHeight-f._simulation.offsetHeight;n>0?(i.style.top=r.top-n-5+"px",f._triggerMessageArrow.style.top=n+10+"px"):f._triggerMessageArrow.style.top=""},y,h,c;["aboveObject","underObject","rightOfObject","leftOfObject"].forEach(function(n){e.removeCssClass(i,n)});y=t.triggerType==TriggerTypes.OnError;h=y&&t.clickPoint&&(r.width>Player.TRIGGER_POSITION_OBJECT_SIZE_THRESHOLD||r.height>Player.TRIGGER_POSITION_OBJECT_SIZE_THRESHOLD);this._triggerMessageArrow.style.display=h?"none":"";h&&(c=t.clickPoint,r.left=r.right=c.x,r.top=r.bottom=c.y,r.width=r.height=0,u=o);r.top-a-u>=this._simulation.offsetTop?(i.style.top="",i.style.bottom=this._simulation.offsetHeight-r.bottom+r.height+u+"px",e.addCssClass(i,"aboveObject"),s()):r.bottom+a+u<=this._simulation.offsetHeight?(i.style.bottom="auto",i.style.top=r.bottom+u+"px",e.addCssClass(i,"underObject"),s()):r.right+l+u<=this._simulation.offsetWidth?(i.style.right="auto",i.style.left=r.right+u+"px",e.addCssClass(i,"rightOfObject"),v()):r.left-l-u>=0?(i.style.left="",i.style.right=this._simulation.offsetWidth-r.right+r.width+u+"px",e.addCssClass(i,"leftOfObject"),v()):(i.style.top=0,i.style.bottom="auto",e.addCssClass(i,"aboveObject"),s())};Player._displayTriggers=function(n,t){var u=this._getTriggersDataFromType(n),f,c,r;if(u&&u.Count!=0){var s=u.List,l=Controller.requestTriggerData(s),h=Sys.UI.DomElement;for(t||this._hideTriggerMessage(),this._visibleTriggers=[],f=0,c=u.Count;f<c;++f){var e=s[f],o=l[e.TriggerId],i=$get(this._getTriggerDomElementId(e));if(!o){t&&i&&(i.style.display="none");continue}i=i||this._checkCreateTriggerObject(o.Message,e,n);i&&(r=o.DisplayRect,i.overlay.style.left=r.left+"px",i.overlay.style.top=r.top+"px",i.overlay.style.width=r.width+"px",i.overlay.style.height=r.height+"px",i.leftBorder.style.left=i.topBorder.style.left=i.bottomBorder.style.left=r.left+"px",i.leftBorder.style.top=i.topBorder.style.top=i.rightBorder.style.top=r.top+"px",i.rightBorder.style.left=r.left+r.width+"px",i.bottomBorder.style.top=r.top+r.height-parseInt(getComputedStyle(i.bottomBorder).borderBottomWidth)+"px",i.leftBorder.style.height=i.rightBorder.style.height=r.height+"px",i.topBorder.style.width=i.bottomBorder.style.width=r.width+"px",["oninfo","onhover","onerror"].forEach(function(n){h.removeCssClass(i,n)}),h.addCssClass(i,n==TriggerTypes.OnMouseOver?"onhover":n==TriggerTypes.OnInfo?"oninfo":"onerror"),this._triggersLive[i.id].CurrentTriggerMessage.Type=n,this._triggersLive[i.id].CurrentTriggerMessage.Index=0,Sys.UI.DomElement.addCssClass(i,"infosymbol"),i.style.display="",this._visibleTriggers.push({object:i,rect:r}))}this._triggersLive.DisplayTriggerType[n]=!0}};Player._refreshTriggers=function(){for(var n=0,t=TriggerTypes.Count;n<t;++n)this._triggersLive.DisplayTriggerType[n]&&this._displayTriggers(n,!0)};Player._refreshTriggersDelay=function(){this._clearTimeout("_triggersRefreshTimeout");var i=this._currentScreen,n=500,t=500;(function r(){if(i==Player._currentScreen&&!Player._waitingScreenChange&&!Player._dockingSwitching){Player._refreshTriggers();Player._triggersRefreshTimeout=setTimeout(r,n);var u=n;n+=t;t=u}})()};Player._hideTriggers=function(n){var t=this._getTriggersDataFromType(n),f,o,i,e,r,u;if(t&&t.Count!=0){for(f=t.List,o=this._triggerTypeToCssClass(n),this._triggersLive.DisplayTriggerType[n]=!1,i=0,e=t.Count;i<e;++i)r=this._getTriggerDomElementId(f[i]),u=$get(r),u&&(u.style.display="none"),this._triggersLive[r]&&(this._triggersLive[r].CurrentTriggerMessage.Index=0);this._hideTriggerMessage();this._setGlassPaneEnabled(!1)}};Player._getNextDisplayedTriggerType=function(n,t){for(var i=0,r=TriggerTypes.Count-1;i<r;++i)if(n=n==TriggerTypes.Count-1?0:n+1,this._triggersLive.DisplayTriggerType[n]&&t.Triggers[n].length>0)return n;return null};Player._manageObjectTriggerSeveralMessages=function(){var n=!1;return this._checkIsPreviousTriggerMessage()&&(n=!0),this._checkIsNextTriggerMessage()&&(n=!0),n};Player._processTriggerMessageNavigate=function(n,t,i){(n&&(n.stopPropagation(),n.preventDefault()),this._isElementDisabled(t)||this._triggersLive.TriggerObjectMessageShown==!1)||(i?this._goPreviousTriggerMessage():this._goNextTriggerMessage())};Player._goPreviousTriggerMessage=function(){var n=this._triggersLive[this._triggersLive.TriggerObjectMessageShown],r=$get(this._triggersLive.TriggerObjectMessageShown),i,t;if(n.CurrentTriggerMessage.Index==0){for(i=this._triggerTypeToCssClass(n.CurrentTriggerMessage.Type),Sys.UI.DomElement.removeCssClass(this._triggerMessage,i),Sys.UI.DomElement.removeCssClass(r,i),t=n.CurrentTriggerMessage.Type-1;t>=0;--t)if(this._triggersLive.DisplayTriggerType[t]&&n.Triggers[t].length>0)break;if(t<0)return;n.CurrentTriggerMessage.Type=t;n.CurrentTriggerMessage.Index=n.Triggers[t].length-1;i=this._triggerTypeToCssClass(n.CurrentTriggerMessage.Type);Sys.UI.DomElement.addCssClass(this._triggerMessage,i);Sys.UI.DomElement.addCssClass(r,i)}else n.CurrentTriggerMessage.Index--;var u=n.Triggers[n.CurrentTriggerMessage.Type][n.CurrentTriggerMessage.Index],e=Controller.requestTriggerData([this._triggerIdToData[u]]),f=e[u];this._triggerMessageContent.innerHTML=f.Message.HTMLText;this._setContentDirection(this._triggerMessageContent,f.Message.IsRTL);this._setElementEnabled(this._nextTriggerMessage,!0);this._checkIsPreviousTriggerMessage()};Player._goNextTriggerMessage=function(){var n=this._triggersLive[this._triggersLive.TriggerObjectMessageShown],u=$get(this._triggersLive.TriggerObjectMessageShown),r=n.CurrentTriggerMessage.Type,i,t,f;if(n.CurrentTriggerMessage.Index==n.Triggers[r].length-1){for(i=this._triggerTypeToCssClass(r),Sys.UI.DomElement.removeCssClass(this._triggerMessage,i),Sys.UI.DomElement.removeCssClass(u,i),t=r+1,f=TriggerTypes.Count;t<f;++t)if(this._triggersLive.DisplayTriggerType[t]&&n.Triggers[t].length>0)break;if(t>=TriggerTypes.Count)return;n.CurrentTriggerMessage.Type=t;n.CurrentTriggerMessage.Index=0;i=this._triggerTypeToCssClass(n.CurrentTriggerMessage.Type);Sys.UI.DomElement.addCssClass(this._triggerMessage,i);Sys.UI.DomElement.addCssClass(u,i)}else n.CurrentTriggerMessage.Index++;var e=n.Triggers[n.CurrentTriggerMessage.Type][n.CurrentTriggerMessage.Index],s=Controller.requestTriggerData([this._triggerIdToData[e]]),o=s[e];this._triggerMessageContent.innerHTML=o.Message.HTMLText;this._setContentDirection(this._triggerMessageContent,o.Message.IsRTL);this._setElementEnabled(this._previousTriggerMessage,!0);this._checkIsNextTriggerMessage()};Player._checkIsPreviousTriggerMessage=function(){var n,t;if(this._setElementEnabled(this._previousTriggerMessage,!1),n=this._triggersLive[this._triggersLive.TriggerObjectMessageShown],!n)return!1;if(n.CurrentTriggerMessage.Index>0)return this._setElementEnabled(this._previousTriggerMessage,!0),!0;for(t=n.CurrentTriggerMessage.Type-1;t>=0;--t)if(this._triggersLive.DisplayTriggerType[t]&&n.Triggers[t].length>0)return this._setElementEnabled(this._previousTriggerMessage,!0),!0;return!1};Player._checkIsNextTriggerMessage=function(){var n,t,i;if(this._setElementEnabled(this._nextTriggerMessage,!1),n=this._triggersLive[this._triggersLive.TriggerObjectMessageShown],!n)return!1;if(n.CurrentTriggerMessage.Index<n.Triggers[n.CurrentTriggerMessage.Type].length-1)return this._setElementEnabled(this._nextTriggerMessage,!0),!0;for(t=n.CurrentTriggerMessage.Type+1,i=TriggerTypes.Count;t<i;++t)if(this._triggersLive.DisplayTriggerType[t]&&n.Triggers[t].length>0)return this._setElementEnabled(this._nextTriggerMessage,!0),!0;return!1};Player._getTriggersDataFromType=function(n){var t=this._currentState.TriggersData;switch(n){case TriggerTypes.OnInfo:return t.TriggerOnInfo;case TriggerTypes.OnMouseOver:return t.TriggerOnMouseOver;default:return t.TriggerOnError}};Player._triggerTypeToCssClass=function(n){switch(n){case TriggerTypes.OnInfo:return"oninfo";case TriggerTypes.OnMouseOver:return"onhover";default:return"onerror"}};Player._triggerCssClassToType=function(n){return Sys.UI.DomElement.containsCssClass(n,"oninfo")?TriggerTypes.OnInfo:Sys.UI.DomElement.containsCssClass(n,"onhover")?TriggerTypes.OnMouseOver:TriggerTypes.OnError};Player._convertMessageTypeToTriggerType=function(n){return n==Controller.MessageTypes.Trigger_OnInfo?TriggerTypes.OnInfo:n==Controller.MessageTypes.Trigger_OnMouseOver?TriggerTypes.OnMouseOver:TriggerTypes.OnError};Player._updateTutorialButtons=function(n,t){this._currentLayout.undocked||((t||n.MessageButton!=this._currentState.MessageButton)&&this._updateElementState(this._messageButton,n.MessageButton),(t||n.HintsButton!=this._currentState.HintsButton)&&this._updateElementState(this._tipsButton,n.HintsButton),(t||n.CameraButton!=this._currentState.CameraButton)&&this._updateElementState(this._playbackButton,n.CameraButton),(t||n.StatementButton!=this._currentState.StatementButton)&&this._updateElementState(this._statementButton,n.StatementButton))};Player._updateTriggers=function(n){var f,i,r,t,e,u;this._triggersLive={DisplayTriggerType:[!1,!1,!1],TriggerObjectMessageShown:!1};this._triggerIdToData={};for(f in n)for(i=n[f],r=i?i.List:[],t=0,e=r.length;t<e;++t)u=r[t],this._triggerIdToData[u.TriggerId]=u;this._triggersObject.innerHTML="";typeof n.TriggerOnInfo!="undefined"&&this._createTriggersObjects(n)};Player._updateSettingsButtons=function(n,t){(t||n.FullScreenButton!=this._currentState.FullScreenButton)&&this._updateElementState(this._fullScreenButton,n.FullScreenButton);(t||n.AudioButton!=this._currentState.AudioButton)&&this._updateElementState(this._audioButton,n.AudioButton);(t||n.ActualSizeButton!=this._currentState.ActualSizeButton)&&this._updateElementState(this._actualSizeButton,n.ActualSizeButton);(t||n.EditButton!=this._currentState.EditButton)&&this._updateElementState(this._editButton,n.EditButton);(t||n.MouseButton!=this._currentState.MouseButton)&&(__BROWSER_IS_MOBILE_TABLET&&n.MouseButton!=Controller.States.Visible&&(Sys.UI.DomElement.removeCssClass(this._mouseButton,"pushed"),this._touchpadopen=!1,this._cursorSimulation.style.display="none",this._settingsPushedButtons.mouse=!1),this._updateElementState(this._mouseButton,n.MouseButton));this._touchpadopen&&this._showVirtualMouseCenter();(t||n.KeyboardButton!=this._currentState.KeyboardButton)&&(n.KeyboardButton!=Controller.States.Visible&&(Sys.UI.DomElement.removeCssClass(this._keyboardButton,"pushed"),this._settingsPushedButtons.keyboard=!1),this._updateElementState(this._keyboardButton,n.KeyboardButton));this._settingsPushedButtons.keyboard||(this._virtualkeyboard.style.display="none",Sys.UI.DomElement.addCssClass(this._virtualkeyboard,"animate"));(t||n.SettingsButton!=this._currentState.SettingsButton)&&this._updateElementState(this._settingsButton,n.SettingsButton);Sys.UI.DomElement.removeCssClass(this._reviewButton,"pushed")};Player._updateNavigation=function(n,t){(t||n.ExitButton!=this._currentState.ExitButton)&&this._updateElementState(this._exitButton,n.ExitButton);(t||n.PreviousButton!=this._currentState.PreviousButton)&&this._updateElementState(this._currentLayout.undocked&&!n.IsSandboxBehavior?this._previousButtonMessageBox:this._previousButton,n.PreviousButton);(t||n.NextButton!=this._currentState.NextButton)&&this._updateElementState(this._currentLayout.undocked&&!n.IsSandboxBehavior?this._nextButtonMessageBox:this._nextButton,n.NextButton);var i=this._tryGetResumeStepCount();this._currentScreen=n.ProgressBarCurrent+i;this._maxScreen=n.ProgressBarMax+i;this._historyData.CurrentStateIndex=this._currentScreen+1;this._enabledStepCount=this._canBrowseAllScreens(n)?this._maxScreen+1:Math.max(this._enabledStepCount,this._currentScreen+1);this._currentLayout.undocked&&this._updateMessageBoxTitle(this._currentScreen+1,this._maxScreen+1)};Player._updateTaskBar=function(n){var o=this._taskbar,f=this._tasks,r,e,u,t,i;for(n.TaskBar!=this._currentState.TaskBar&&this._updateElementState(o,n.TaskBar),f.innerHTML="",this._currentSelectedTask=null,r=0,e=n.TaskBarCaptions.length;r<e;++r)u=n.TaskBarCaptions[r],t=document.createElement("li"),t.id=u.Id,t.innerText=t.title=u.Name,t.onclick=function(){},t.className="task"+(u.Enabled?"":" disabled"),n.TaskBarFocusedId==t.id&&(this._currentSelectedTask=t,t.className+=" selected"),f.appendChild(t);if(n.CaptureInformation&&n.CaptureInformation.browserName&&n.CaptureInformation.browserName.toLowerCase()!==this._detectBrowser()){i=document.createElement("li");i.className="task warning";switch(n.CaptureInformation.browserName.toLowerCase()){case"chrome":i.innerText=Player.Resources.ScreenOptimizedForChrome;break;case"firefox":i.innerText=Player.Resources.ScreenOptimizedForFirefox;break;case"msedge":i.innerText=Player.Resources.ScreenOptimizedForMsEdge;break;default:return}i.innerText+=" "+Player.Resources.ExperienceDegraded;f.appendChild(i)}};Player._getFirstVisibleSettingsButton=function(){for(var r=document.documentElement.clientWidth||document.body.clientWidth,t=this._groupSettings.children,i=null,n=0;n<t.length&&i==null;)getComputedStyle(t[n]).display!="none"&&(i=t[n]),++n;return i};Player._resizeSandboxProgressBar=function(){for(var r=document.documentElement.clientWidth||document.body.clientWidth,i=this._groupSettings.children,n=null,t=0;t<i.length&&n==null;)getComputedStyle(i[t]).display!="none"&&(n=i[t]),++t;this._progressBar.style.right=r-n.offsetLeft-this._toolbar.offsetLeft+n.offsetWidth+"px"};Player._updateKeyBoard=function(n){var i,u,r,t;for(this._keyboard.innerHTML="",i=0,u=n.length;i<u;++i)r=n[i],t=document.createElement("a"),t.href="#",t.className="key",t.id=r.Command,t.innerText=this._translateKeyboardKeys(r.Caption),this._keyboard.appendChild(t)};Player._translateKeyboardKeys=function(n){for(var u,i=n.split(","),r=[],t=0,f=i.length;t<f;++t)u=i[t],r[t]=this._translateKeyboardKey(u);return r.join(" + ")};Player._translateKeyboardKey=function(n){switch(n){case"Numpad0":case"Numpad1":case"Numpad2":case"Numpad3":case"Numpad4":case"Numpad5":case"Numpad6":case"Numpad7":case"Numpad8":case"Numpad9":case"OEM_1":case"OEM_2":case"OEM_3":case"OEM_4":case"OEM_5":case"OEM_6":case"OEM_7":case"OEM_8":case"OEM_9":return n.charAt(n.length-1);case"LButton":return Player.Resources.Key_LButton;case"RButton":return Player.Resources.Key_RButton;case"MButton":return Player.Resources.Key_MButton;case"Cancel":return Player.Resources.Key_Cancel;case"BACKSPACE":return Player.Resources.Key_Backspace;case"Tab":return Player.Resources.Key_Tab;case"Clear":return Player.Resources.Key_Clear;case"Enter":return Player.Resources.Key_Enter;case"Shift":return Player.Resources.Key_Shift;case"Control":return Player.Resources.Key_Control;case"Alt":return Player.Resources.Key_Alt;case"PAUSE":return Player.Resources.Key_Pause;case"CapsLock":return Player.Resources.Key_CapsLock;case"Escape":return Player.Resources.Key_Escape;case"SPACEBAR":return Player.Resources.Key_Spacebar;case"PgUp":return Player.Resources.Key_PgUp;case"PgDown":return Player.Resources.Key_PgDown;case"End":return Player.Resources.Key_End;case"Home":return Player.Resources.Key_Home;case"Left":return Player.Resources.Key_Left;case"Up":return Player.Resources.Key_Up;case"Right":return Player.Resources.Key_Right;case"Down":return Player.Resources.Key_Down;case"Select":return Player.Resources.Key_Select;case"PrintScreen":return Player.Resources.Key_PrintScreen;case"Execute":return Player.Resources.Key_Execute;case"Snapshot":return Player.Resources.Key_Snapshot;case"Insert":return Player.Resources.Key_Insert;case"Delete":return Player.Resources.Key_Delete;case"Help":return Player.Resources.Key_Help;case"LWin":return Player.Resources.Key_LWin;case"RWin":return Player.Resources.Key_RWin;case"Apps":return Player.Resources.Key_Apps;case"Multiply":return Player.Resources.Key_Multiply;case"Add":return Player.Resources.Key_Add;case"Separator":return Player.Resources.Key_Separator;case"Subtract":return Player.Resources.Key_Subtract;case"Decimal":return Player.Resources.Key_Decimal;case"Divide":return Player.Resources.Key_Divide;case"NumLock":return Player.Resources.Key_NumLock;case"ScrollLock":return Player.Resources.Key_ScrollLock;case"OEM_Plus":return Player.Resources.Key_Add;case"OEM_Comma":return Player.Resources.Key_Comma;case"OEM_Minus":return Player.Resources.Key_Subtract;case"OEM_Period":return Player.Resources.Key_Period;case"ProcessKey":return Player.Resources.Key_ProcessKey;default:return n}};Player._updateSimulationBlocking=function(n,t){(t||n!=this._currentState.BlockControl)&&(n?Player._setGlassPaneEnabled(!0):Player._setGlassPaneEnabled(!1,!0))};Player._handleLayouts=function(n){var t=Sys.UI.DomElement,i=document.body;["layout","sandbox","navigation","minimal","undocked","bottomRight","bottomLeft","topRight","topLeft","topBottom","bottomTop"].forEach(function(n){t.removeCssClass(i,n)});n.IsSandboxBehavior?(t.addCssClass(i,"sandbox"),this._isSandboxWithNavigation=n.PreviousButton!=Controller.States.Hidden||n.NextButton!=Controller.States.Hidden||n.NavigationMode!=Controller.NavigationModes.NoNavigation,t.addCssClass(i,this._isSandboxWithNavigation?"navigation":"minimal")):this._currentLayout.undocked?t.addCssClass(i,"undocked"):(t.addCssClass(i,this._currentLayout.name),t.addCssClass(i,"layout"))};Player._updateElementState=function(n,t){n.disabled=!1;Sys.UI.DomElement.removeCssClass(n,"disabled");t==Controller.States.Disabled?(Sys.UI.DomElement.addCssClass(n,"disabled"),n.disabled=!0,n.style.display=""):n.style.display=t==Controller.States.Hidden?"none":""};Player._showMessages=function(){var n,t,i;if(!this._currentState.IsSandboxBehavior){for(n=this._currentState.ScreenMessages,t=this._messageDisplayProgressIndex,i=n.length;t<i;++t)if(message=n[t],this._messageDisplayProgressIndex++,message.Type==Controller.MessageTypes.Modal){this._displayModalMessage(message);break}else if(message.Type==Controller.MessageTypes.Timer){this._displayModalMessage(message,!0);break}else switch(message.Type){case Controller.MessageTypes.Default:this._defaultMessage=message;this._scoreMessageContent&&this._isLastScreen()&&(this._defaultMessage.HTMLText+=this._scoreMessageContent);this._displayDefaultMessage();break;case Controller.MessageTypes.Statement:this._displayStatementMessage()}this._messageDisplayProgressIndex>=n.length&&(this._smallResolution&&(this._tutorialPaneOpen||this._isMessageBoxDisplayed())||this._stateFocusOnSimActiveElement())}};Player._isLastScreen=function(){return this._currentScreen==this._maxScreen};Player._displayModalMessage=function(n,t){if(!0&&!n.SoundFile&&this._isMessageEmpty(n)){this._closeMessagePopup();return}this._hideMessageBox();this._popupTitleBar.innerText=String.format(Player.Resources.ScreenProgress,this._currentScreen+1,this._maxScreen+1);this._updateElementState(this._taskbar,Controller.States.Disabled);Sys.UI.DomElement.removeCssClass(this._messagePopupWindow,"audio");Sys.UI.DomElement.removeCssClass(this._messagePopupWindow,"playing");this._handleNewMessageSound(n,this._messagePopupWindow,!1,n.Type);this._popupText.innerHTML=n.HTMLText;this._setContentDirection(this._popupText,n.IsRTL);this._openAndSetModalSize();Controller.blockUserInteraction(!0);this._currentLayout.undocked&&!this._currentState.IsSandboxBehavior&&this._disableWheelButtons();this._isBusy=!0;var t=t&&n.TimeToDisplay>0;t&&this._startTimerMessage(n.TimeToDisplay);Player._setElementOpacity(this._messagePopupWindow,Player.MESSAGE_OPACITY);this._cameraActive||t||this._launchMessageOpacityReset(this._messagePopupOpacityAnimationInfo);document.documentElement.focus()};Player._isModalDisplayed=function(){return this._isElementDisplayed(this._messagePopup)};Player._openAndSetModalSize=function(){var n=this._messagePopupWindow,r,i,t,u;if(this._resetElementPosAndSize(n),n.style.marginLeft="0",n.style.marginTop="0",this._messagePopup.style.display="",this._messagePopupOffsetDelta==null&&(this._messagePopupOffsetDelta=this._getElementOffsetDelta(n)),this._smallResolution)Sys.UI.DomElement.addCssClass(document.body,"messageshown");else if(r=!0,r){for(n.style.width="648px",n.style.height="350px",i=this._popupText.getElementsByTagName("img"),t=0,u=i.length;t<u;++t)i[t].onload=this._autoResizeModalDelegate;this._autoResizeModal()}else n.style.width="648px",n.style.height="350px",this._centerModalMessage();this._popupText.scrollTop=this._popupText.scrollLeft=0};Player._autoResizeModal=function(){var t=this._messagePopupWindow,n={width:Math.min(720,this._messagePopupTransparency.offsetWidth),height:Math.min(388,this._messagePopupTransparency.offsetHeight)};this._autoResizeMessage(this._messagePopupWindow,this._popupText,n,this._messagePopupOffsetDelta);this._centerModalMessage()};Player._centerModalMessage=function(){var n=this._messagePopupWindow,i=document.documentElement.clientWidth||document.body.clientWidth,r=document.documentElement.clientHeight||document.body.clientHeight,u={x:Math.round(i/2-n.offsetWidth/2),y:Math.round(r/2-n.offsetHeight/2)},t;this._windowMoveTo(n,this._messagePopupTransparency,u);t={width:Player.MESSAGEPOPUP_MIN_WIDTH,height:Player.MESSAGEPOPUP_MIN_HEIGHT};this._adjustElementPosAndSize(this._messagePopupWindow,this._messagePopupOffsetDelta,this._messagePopupTransparency,t)};Player._closeMessagePopup=function(){this._timerInterval&&(clearInterval(this._timerInterval),this._timerInterval=null);this._resumeTimerValue=0;this._messagePopup.style.display="none";Controller.blockUserInteraction(!1);this._currentLayout.undocked&&!this._currentState.IsSandboxBehavior&&this._enableWheelButtons();this._updateElementState(this._taskbar,this._currentState.TaskBar);this._popupText.innerHTML="";this._okButtonPopup.innerHTML="OK";Sys.UI.DomElement.removeCssClass(document.body,"messageshown");this._unblockCamera();this._isMovieMode()&&this._resumeCamera();this._showMessages()};Player._startTimerMessage=function(n){var i=new Date,t;this._resumeTimerValue=n;t=function(){var u=new Date,r=u.getTime()-i.getTime(),t;return r>=n*1e3?(Player._closeMessagePopup(),!1):(t=Math.ceil((n*1e3-r)/1e3),Player._resumeTimerValue=t,Player._okButtonPopup.innerHTML="OK ("+t+")",!0)};t()&&(this._timerInterval=setInterval(t,333))};Player._resumeTimerMessage=function(){this._resumeTimerValue>0&&this._startTimerMessage(this._resumeTimerValue)};Player._displayDefaultMessage=function(){var n=this._getDefaultMessage();this._currentLayout.undocked?this._setUndockedMessageType(Controller.MessageTypes.Default):this._updateTutorialPane(Controller.MessageTypes.Default,this._getDefaultMessage());this._isMovieMode()&&this._checkCameraMessageTimer(n)};Player._displayStatementMessage=function(){this._currentState.StatementButton==Controller.States.Visible&&(this._currentLayout.undocked?this._setUndockedMessageType(Controller.MessageTypes.Statement):this._updateTutorialPane(Controller.MessageTypes.Statement,this._currentState.StatementMessage))};Player._resetState=function(){this._defaultMessage=null;this._resetTutorialDocking();this._clearOpacityResetTimeouts();this._hideAudioBar();this._hideTriggerMessage();this._isTriggerMessageDisplayed=!1;this._visibleTriggers=[];this._userMovedMessageBox=!1;this._timerInterval&&(clearInterval(this._timerInterval),this._timerInterval=null);this._clearTimeout("_cameraMessageTimer");this._resumeTimerValue=0;this._remainingMessageTimer=null;this._messagePopup.style.display="none";this._popupText.innerHTML="";this._okButtonPopup.innerHTML="OK";Sys.UI.DomElement.removeCssClass(this._messagePopupWindow,"audio");Sys.UI.DomElement.removeCssClass(this._messagePopupWindow,"playing");this._isBusy=!1;this._isMoviePaused=!1;this._closeEditor()};Player._closeEditor=function(){this._editing&&this._manageWysiwygEdit(this._editButton,!1)};Player._clearOpacityResetTimeouts=function(){this._messageBoxOpacityAnimationInfo.timeoutid&&(clearTimeout(this._messageBoxOpacityAnimationInfo.timeoutid),this._messageBoxOpacityAnimationInfo.timeoutid=null);this._messagePopupOpacityAnimationInfo.timeoutid&&(clearTimeout(this._messagePopupOpacityAnimationInfo.timeoutid),this._messagePopupOpacityAnimationInfo.timeoutid=null)};Player._notifyError=function(n,t){this._notificationText.innerHTML=n||Player.Resources.UnspecifiedError;this._setContentDirection(this._notificationText,n&&t?t:null);this._notificationBar.style.display=""};Player._stopCamera=function(n){Controller.execute(n);this._clearTimeout("_cameraMessageTimer");this._remainingMessageTimer=null};Player._updateElementsStateCameraActive=function(n){var u,t,f,r,i;for(this._settingsPushedButtons.settings&&this._manageSettingsDisplay(this._settingsButton,!1),this._hideAudioBar(),this._currentLayout.undocked&&!this._currentState.IsSandboxBehavior&&(this._disableWheelButtons(this._getWheelButtonFromCameraActionType(n)),this._wheelControl==null&&this._buildWheel(),this._wheelControl.set_enableSpinner(!1)),u=n?n==Controller.Actions.Hints?this._tipsButton:this._playbackButton:null,t=0,f=this._buttonsToUpdateWithCameraActive.length;t<f;++t)r=this._buttonsToUpdateWithCameraActive[t],i=r.Element,i&&i!=u&&this._currentState[r.Name]==Controller.States.Visible&&this._setElementEnabled(i,!1);this._setElementEnabled(this._taskbar,!1)};Player._restoreElementsStateCameraNotActive=function(){for(var t,r,n=0,i=this._buttonsToUpdateWithCameraActive.length;n<i;++n)t=this._buttonsToUpdateWithCameraActive[n],r=t.Name,this._currentState[r]==Controller.States.Visible&&this._setElementEnabled(t.Element,!0);this._currentLayout.undocked&&!this._currentState.IsSandboxBehavior&&(this._isModalDisplayed()||this._enableWheelButtons(),this._wheelControl==null&&this._buildWheel(),this._wheelControl.set_enableSpinner(this._currentState.NavigationMode!=Controller.NavigationModes.NoNavigation));this._updateElementState(this._taskbar,this._currentState.TaskBar);this.setMousePointerType(Controller.MousePointerTypes.Pointer)};Player._buildWheel=function(){var n=this._currentState,i=Controller.States.Hidden,t=[],r=0,u,f;this._wheelButton={};n.HintsButton!=i&&(this._wheelButton.Default=this._createWheelButton(Player.Resources.Message,"standard",Player._wheelButtonClicked,n.MessageButton==Controller.States.Disabled));n.HintsButton!=i&&(this._wheelButton.Hints=t[r++]=this._createWheelButton(Player.Resources.ShowMe,"tips",Player._wheelButtonClicked,n.HintsButton==Controller.States.Disabled));n.CameraButton!=i&&(this._wheelButton.Camera=t[r++]=this._createWheelButton(Player.Resources.DoIt,"camera",Player._wheelButtonClicked,n.CameraButton==Controller.States.Disabled));n.StatementButton!=i&&(this._wheelButton.Statement=t[r++]=this._createWheelButton(Player.Resources.Statement,"statement",Player._wheelButtonClicked,n.StatementButton==Controller.States.Disabled));this._wheel.style.display="";u=n.ShowSlider||this._fullNavigation;f=n.NavigationMode!=Controller.NavigationModes.NoNavigation;this._wheelControl==null?(this._wheelControl=this._createWheelControl(this._currentScreen,this._maxScreen+1,t,u,f),this._wheelControl.set_collapsed(!0)):(this._wheelControl.set_buttons(t),this._wheelControl.set_stepCount(this._maxScreen+1),this._wheelControl.set_step(this._currentScreen),this._wheelControl.set_enabledStepCount(this._enabledStepCount),this._wheelControl.set_showSpinner(u),this._wheelControl.set_enableSpinner(f));this._canBrowseAllScreens(n)&&this._wheelControl.set_loadedStepCount(this._historyData.LastLoadedStateIndex);this._checkReduceWheelOpacity(this._wheelControl);this._canPlayPauseCamera()&&this._cameraActive?Sys.UI.DomElement.addCssClass(this._wheel,"foreground"):Sys.UI.DomElement.removeCssClass(this._wheel,"foreground")};Player._createWheelButton=function(n,t,i,r){return new Assima.Controls.WheelButton({text:n,className:t,onclick:i,disabled:r})};Player._wheelButtonClicked=function(n){var i,t;for(i in Player._wheelButton)if(Player._wheelButton[i]==n){n.pushed?Player._smallResolution?Player._currentCameraTipsType!=null&&(Player._stopCamera(Player._currentCameraTipsType),n.pushed=!1,Player._wheelControl.refreshButton(n),Player._currentTutorialMessage.Type=Controller.MessageTypes.Default,Player._currentTutorialMessage.Message=Player._getDefaultMessage()):Player._isMovieMode()?Player._restorePreviousMessage():Player._setUndockedMessageType(Controller.MessageTypes.Default):(t=Controller.MessageTypes[i],(t==Controller.MessageTypes.Hints||t==Controller.MessageTypes.Camera)&&(Player._bUserAskedCamera=!0),Player._setUndockedMessageType(t));return}};Player._isWheelTipsButtonPushed=function(){if(this._wheelButton!==null)return this._wheelButton.Hints&&this._wheelButton.Hints.pushed};Player._setUndockedMessageType=function(n){this._pushWheelButtonMatchingMessageType(n);this._currentCameraTipsType!=null&&(!this._isMovieMode()||this._bUserAskedCamera)&&this._stopCamera(this._currentCameraTipsType);n==Controller.MessageTypes.Hints||n==Controller.MessageTypes.Camera?(this._currentCameraTipsType=n==Controller.MessageTypes.Hints?Controller.Actions.Hints:Controller.Actions.Camera,Controller.execute(this._currentCameraTipsType)):this._updateMessageBox(n,n==Controller.MessageTypes.Statement?this._currentState.StatementMessage:this._getDefaultMessage())};Player._pushWheelButtonMatchingMessageType=function(n){for(var t in this._wheelButton)(t=="Hints"||t=="Camera"||t=="Statement")&&(this._wheelButton[t].pushed=Controller.MessageTypes[t]==n,this._wheelControl.refreshButton(this._wheelButton[t]))};Player._unPushWheelButtons=function(){var t,n;for(t in this._wheelButton)n=this._wheelButton[t],n.pushed=!1,this._wheelControl.refreshButton(n)};Player._enableWheelButtons=function(){var n,t;for(n in this._wheelButton)t=this._wheelButton[n],t.disabled=this._getWheelButtonStateFromMessageType(Controller.MessageTypes[n])!=Controller.States.Visible,Player._wheelControl.refreshButton(t)};Player._getWheelButtonStateFromMessageType=function(n){var t=Controller.MessageTypes;switch(n){case t.Hints:return this._currentState.HintsButton;case t.Camera:return this._currentState.CameraButton;case t.Statement:return this._currentState.StatementButton;default:return Controller.States.Visible}};Player._disableWheelButtons=function(n){var i,t;for(i in this._wheelButton)t=this._wheelButton[i],t.disabled=t!=n,Player._wheelControl.refreshButton(t)};Player._getWheelButtonFromCameraActionType=function(n){return n?n==Controller.Actions.Hints?this._wheelButton&&this._wheelButton.Hints?this._wheelButton.Hints:null:this._wheelButton.Camera?this._wheelButton.Camera:null:null};Player._hideMessageBox=function(){this._messageBox.style.display="none";this._wheel.style.visibility="";Sys.UI.DomElement.removeCssClass(document.body,"messageshown")};Player._isMessageBoxDisplayed=function(){return this._isElementDisplayed(this._messageBox)};Player._updateMessageBox=function(n,t,i){var k=Sys.UI.DomElement,r=this._messageBox,f=this._messageBoxText,e=this._isTriggerMessageType(n),l=this._isMessageEmpty(t),p=getComputedStyle(r).display=="none",u,v,y,h,w,c,b;if(!0&&l&&!this._spinnerMoving){this._hideMessageBox();this._spinnerMoving||this._handleNewMessageSound(t,this._messageBox,e,n);this._updateCurrentPreviousMessages(t,n);return}u=!p||n==Controller.MessageTypes.Default?t:this._getDefaultMessage();Player.DISPLAY_TRIGGERS_IN_PLACE||(this._isTriggerMessageDisplayed=e);this._updateMessageBoxCssClass(n,e,t.SoundFile);var o=!1,a=!1,s=!1;if(this._smallResolution||(a=this._tryResumeMessageBoxPositioning(),a||(o=this._editorControl&&!this._scorm?this._tryApplyEditorMessageBoxUpdate(u.Id):!1,v=o||u.Positioning=="Forced",s=!0&&(!v||u.Size.w==-1&&u.Size.h==-1),s?(r.style.width="300px",r.style.height="300px"):v||(r.style.width="210px",r.style.height="337px"))),f.scrollLeft=f.scrollTop=0,f.innerHTML=l?String.format("<div class='emptyMessage'>{0}<\/div>",Player.Resources.NoMessage):t.HTMLText,this._setContentDirection(f,l?null:t.IsRTL),this._spinnerMoving||this._handleNewMessageSound(t,this._messageBox,e,n),s)for(y=f.getElementsByTagName("img"),h=0,w=y.length;h<w;++h)y[h].onload=this._autoResizeMessageBoxDelegate;this._updateCurrentPreviousMessages(t,n);this._createMessageBoxFooter(n);r.style.display="";this._updateMessageBoxTextHeight();(this._currentTutorialMessage.Type==null||p)&&this._messageBoxOffsetDelta==null&&(this._messageBoxOffsetDelta=this._getElementOffsetDelta(r),this._updateMessageBoxCenterPos());this._smallResolution?(this._resetElementPosAndSize(r),this._setElementOpacity(r,Player.MESSAGE_OPACITY),this._wheel.style.visibility="hidden",Sys.UI.DomElement.addCssClass(document.body,"messageshown"),this._currentCameraTipsType&&(this._isBusy=!0,c=this._getSimulationActiveElement(),c&&c.blur&&c.blur())):(a||o||this._updateMessageBoxPosition(u),b={width:Player.MESSAGEBOX_MIN_WIDTH,height:Player.MESSAGEBOX_MIN_HEIGHT},this._adjustElementPosAndSize(r,this._messageBoxOffsetDelta,this._simulation,b),this._messageBoxPositionCheckCenter=!o&&u.Positioning=="Follow"||this._userMovedMessageBox||this._spinnerMoving,s?this._autoResizeMessageBox():(this._messageBoxPositionCheckCenter&&this._checkMessageBoxPositionRegardingCenter(),this._updateMessageBoxCenterPos(),this._updateWheelPosition()),this._messageboxOverlapsSim=this._isElementAboveSimObject(r),this._setElementOpacity(r,100),!this._cameraActive&&this._messageboxOverlapsSim&&this._launchMessageOpacityReset(this._messageBoxOpacityAnimationInfo));i&&this._pushWheelButtonMatchingMessageType(n)};Player._tryResumeMessageBoxPositioning=function(){var i,n,t;return this._resumePositionDone?!1:(this._resumePositionDone=!0,i=this._getResumeData(),!i)?!1:(n=i.MessageBoxRect,!n)?!1:(t=this._messageBox,t.style.bottom="auto",t.style.right="auto",t.style.left=n.left+"px",t.style.top=n.top+"px",t.style.width=n.right-n.left+"px",t.style.height=n.bottom-n.top+"px",!0)};Player._updateCurrentPreviousMessages=function(n,t){if(this._currentTutorialMessage.Message&&this._currentTutorialMessage.Message.Id!=n.Id)switch(this._currentTutorialMessage.Type){case Controller.MessageTypes.Trigger_OnInfo:case Controller.MessageTypes.Trigger_OnError:case Controller.MessageTypes.Trigger_OnMouseOver:break;default:this._previousTutorialMessage.Type=this._currentTutorialMessage.Type;this._previousTutorialMessage.Message=this._currentTutorialMessage.Message}this._currentTutorialMessage.Type=t;this._currentTutorialMessage.Message=n};Player._updateMessageBoxCssClass=function(n,t,i){var u=Sys.UI.DomElement,r=this._messageBox;r.className="floating message BottomRight";t&&u.addCssClass(r,"trigger");i&&Sys.UI.DomElement.addCssClass(r,"audio");u.addCssClass(r,this._messageTypeToCssClass(n))};Player._launchMessageOpacityReset=function(n){n.timeoutid&&clearTimeout(n.timeoutid);n.timeoutid=setTimeout(n.resetOpacityHandler,Player.MESSAGE_OPACITY_RESET_TIME*1e3)};Player._resetElementOpacity=function(n){n.timeoutid=null;!this._cameraActive&&n.userMouseOutside&&(n.element!=this._messagePopupWindow||this._timerInterval==null)&&this._opacityStartAnimation(n)};Player._onMouseOutMessage=function(n){this._smallResolution||(this._clearTimeout("_mouseOutTimeoutMessage"),this._mouseOutTimeoutMessage=setTimeout(function(){Player._mouseOutMessageMessageTimeout(n)},0))};Player._mouseOutMessageMessageTimeout=function(n){n.userMouseOutside=!0;n.elementmoving||this._cameraActive||n.timeoutid!=null||n.element==this._messageBox&&!this._messageboxOverlapsSim||n.element==this._messagePopupWindow&&this._timerInterval!=null||this._opacityStartAnimation(n);this._mouseOutTimeoutMessage=null};Player._onMouseOverMessage=function(n){this._smallResolution||(n.userMouseOutside&&(n.userMouseOutside=!1,Player._setElementOpacity(n.element,100)),this._clearTimeout("_mouseOutTimeoutMessage"))};Player._opacityStartAnimation=function(n){Player._setElementOpacity(n.element,100);n.opacityValue=100;Player._opacityAnimate(n)};Player._opacityAnimate=function(n){var t=function(){Player._cameraActive||!n.userMouseOutside||n.timeoutid!=null||n.elementmoving||n.element==Player._messagePopupWindow&&Player._timerInterval!=null||n.element==Player._messageBox&&!Player._messageboxOverlapsSim?Player._setElementOpacity(n.element,100):n.opacityValue>Player.MESSAGE_OPACITY&&(Player.MESSAGE_OPACITY_ANIMATION_SPEED>0?(n.opacityValue--,Player._setElementOpacity(n.element,n.opacityValue),Player._opacityAnimate(n)):(n.opacityValue=Player.MESSAGE_OPACITY,Player._setElementOpacity(n.element,n.opacityValue)))};Player.MESSAGE_OPACITY_ANIMATION_SPEED>0?setTimeout(t,Player.MESSAGE_OPACITY_ANIMATION_SPEED):t()};Player._setElementOpacity=function(n,t){if(n.style.opacity!=null)n.style.opacity=t/100;else if(n.filters){n.style.display="none";var i=n.filters&&n.filters["DXImageTransform.Microsoft.Alpha"];i?i.opacity=Math.round(t):n.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(t)+") ";n.style.display=""}};Player._isElementAboveSimObject=function(n){var e=Sys.UI.DomElement,t=null,r,o,u;if(this._simulationFrame&&(t=this._simulationFrame.contentDocument.body.children),t!=null&&t.length!=0){for(r=t[0].children,elementPos=e.getLocation(n),o={x1:elementPos.x,x2:elementPos.x+n.offsetWidth,y1:elementPos.y,y2:elementPos.y+n.offsetHeight},u=r.length;u--;){var f=r[u],i=e.getLocation(f),s={x1:i.x,x2:i.x+f.offsetWidth,y1:i.y,y2:i.y+f.offsetHeight};if(this._areElementsOverlapping(o,s))return!0}return!1}};Player._areElementsOverlapping=function(n,t){var i=n.x1<t.x1?n.x2>t.x1:t.x2>n.x1,r=n.y1<t.y1?n.y2>t.y1:t.y2>n.y1;return i&&r};Player._autoResizeMessageBox=function(){var t={width:Math.min(500,this._simulation.offsetWidth),height:Math.min(500,this._simulation.offsetHeight)},n;this._autoResizeMessage(this._messageBox,this._messageBoxText,t,this._messageBoxOffsetDelta);this._messageBoxPositionCheckCenter&&this._checkMessageBoxPositionRegardingCenter();n={width:Player.MESSAGEBOX_MIN_WIDTH,height:Player.MESSAGEBOX_MIN_HEIGHT};this._adjustElementPosAndSize(this._messageBox,this._messageBoxOffsetDelta,this._simulation,n);this._updateMessageBoxCenterPos();this._updateWheelPosition()};Player._autoResizeMessage=function(n,t,i,r){var e,f,u,s,o;if(t.scrollWidth-t.clientWidth<=0&&t.scrollHeight-t.clientHeight<=0){n.style.width=Math.min(n.offsetWidth-r.width,i.width-r.width)+"px";n.style.height=Math.min(n.offsetHeight-r.height,i.height-r.height)+"px";return}for(t.style.overflow="hidden",e=n.offsetHeight/n.offsetWidth,f=n.offsetWidth-t.offsetWidth+t.scrollWidth,n.style.width=f+"px",u=n.offsetHeight-r.height,t.scrollHeight-t.clientHeight>0&&(s=Math.round(n.offsetWidth*e),u=Math.min(s,n.offsetHeight-t.offsetHeight+t.scrollHeight),n.style.height=u+"px"),o=5;t.scrollHeight-t.clientHeight>0;)if(f+=o,f>i.width&&(f=i.width),n.style.width=f+"px",u<i.height&&t.scrollHeight-t.clientHeight>0&&(u+=Math.ceil(o*e),u>i.height&&(u=i.height),n.style.height=u+"px"),u>=i.height&&f>=i.width)break;n.style.width=Math.min(f,i.width-r.width)+"px";n.style.height=Math.min(u,i.height-r.height)+"px";t.style.overflow=""};Player._checkMessageBoxPositionRegardingCenter=function(){var n=this._messageBox,i=this._simulation,t={x:Math.round(this._messageBoxCenter.x-n.offsetWidth/2),y:Math.round(this._messageBoxCenter.y-n.offsetHeight/2)};t.y+n.offsetHeight>i.offsetHeight?t.y=i.offsetHeight-n.offsetHeight:t.y<0&&(t.y=0);n.style.top=t.y+"px";n.style.bottom="auto";t.x+n.offsetWidth>i.offsetWidth?t.x=i.offsetWidth-n.offsetWidth:t.x<0&&(t.x=0);n.style.left=t.x+"px";n.style.right="auto"};Player._updateMessageBoxTitle=function(n,t){this._messageBoxTitleText.innerText=String.format(Player.Resources.ScreenProgress,n,t)};Player._updateMessageBoxPosition=function(n){var t=this._messageBox,u;if(n=n?n:this._getDefaultMessage(),n.Positioning=="TemplateDefault")this._userMovedMessageBox||this._spinnerMoving||this._resetElementPos(t);else if(n.Positioning=="Forced"&&(u=n.Size,u.w>0&&u.h>0?(t.style.width=u.w+"px",t.style.height=u.h+"px"):!1&&(t.style.width="210px",t.style.height="337px"),!this._userMovedMessageBox&&!this._spinnerMoving)){var f=n.Location,i=f.x,r=f.y;i<0?i=0:i>this._simulation.offsetWidth-this._messageBox.offsetWidth&&(i=this._simulation.offsetWidth-this._messageBox.offsetWidth);r<0?r=0:r>this._simulation.offsetHeight-this._messageBox.offsetHeight&&(r=this._simulation.offsetHeight-this._messageBox.offsetHeight);n.Referential=="TopLeft"?(t.style.bottom="auto",t.style.right="auto",t.style.left=i+"px",t.style.top=r+"px"):(t.style.top="auto",t.style.left="auto",t.style.right=i+"px",t.style.bottom=r+"px")}};Player._setDocking=function(n){var t=this._currentState,i,r;this._dockingSwitching=!0;i=Player._currentTutorialMessage.Type;r=Player._currentTutorialMessage.Message;n||this._resetTutorialDocking();this._currentTutorialMessage.Type=i;this._currentTutorialMessage.Message=r;this._currentLayout.undocked=!n;this._handleLayouts(t);this._updateTutorialButtons(t,!0);this._updateSettingsButtons(t,!0);this._updateNavigation(t,!0);this._currentLayout.undocked?(this._progressBar.style.display="none",this._updateTaskBarDisplay(),this._buildWheel()):(this._taskbar.style.right="",this._messageBox.style.display="none",this._wheel.style.display="none",this._buildProgressbar());this._restoreCurrentMessage();this._resetKeyboardMousePos();this._hideAudioBar();this._canPlayPauseCamera()&&this._cameraActive&&this._showCameraActionButton(!0,!0);this._refreshFontIconsIE();this._applyResponsiveLayout();this._dockingSwitching=!1};Player._restoreCurrentMessage=function(){Player._restoreMessage(Player._currentTutorialMessage)};Player._restorePreviousMessage=function(){Player._restoreMessage(Player._previousTutorialMessage)};Player._restoreMessage=function(n){if(n){var i=Controller.MessageTypes,t=n.Type!=null?n.Type:i.Default,n=t==i.Default?this._getDefaultMessage():n.Message;this._currentLayout.undocked?this._updateMessageBox(t,n,!0):this._updateTutorialPane(t,n)}};Player._getDefaultMessage=function(){return this._defaultMessage?this._defaultMessage:Controller.createMsg()};Player._isMessageEmpty=function(n){return n==null?!0:this._isEmptyContent(n.HTMLText)};Player._isEmptyContent=function(n){var t,i;return n.toLowerCase().indexOf("<img")!=-1?!1:(t=document.createElement("div"),t.innerHTML=n,i=typeof t.textContent!="undefined"?t.textContent:typeof t.innerText!="undefined"?t.innerText:t.innerHTML,i.trim()=="")};Player._showCameraActionButton=function(n,t){var i,r;this._currentLayout.undocked?n?(i=this._createWheelButton(Player.Resources.PlayPauseCamera,"camera "+(t?"play":"pause"),Player._wheelCameraChangeState,!1),this._wheelControl.set_centerButton(i),this._wheelControl.set_collapsed(!t)):(r=new Assima.Controls.WheelButton,this._wheelControl.set_centerButton(r)):n?(this._setCameraButtonStyle(t),this._cameraActionButton.style.display=""):this._cameraActionButton.style.display="none"};Player._wheelCameraChangeState=function(){return Player._switchCameraPlayPauseState(),!1};Player._isMovieMode=function(){return this._currentState.IsMovieMode};Player._canPlayPauseCamera=function(){return this._currentState.CameraPauseButton!=Controller.States.Hidden};Player._canBrowseAllScreens=function(n){var n=n?n:this._currentState;return n.NavigationMode==Controller.NavigationModes.FreeNavigation||this._fullNavigation};Player._mustShowMouseOverTriggers=function(){return(!0||!1&&__BROWSER_IS_MOBILE_TABLET)&&!this._currentState.IsSandboxBehavior&&!this._isMovieMode()};Player._checkUnsetEmptyTipsMessage=function(){this._smallResolution||this._isMovieMode()||this._currentState.HintsButton==Controller.MessageTypes.Hidden||(this._currentLayout.undocked?this._isWheelTipsButtonPushed()&&!this._isMessageBoxDisplayed()&&this._displayDefaultMessage():this._isTutorialBarTipsButtonPushed()&&!this._tutorialPaneOpen&&this._unPushTutorialTipsButton())};Player._createEditorControl=function(){return $create(Assima.Controls.Editor,{},null,null,this._editor)};Player._manageWysiwygEdit=function(n,t){t?(Sys.UI.DomElement.addCssClass(n,"pushed"),Sys.UI.DomElement.addCssClass(document.body,"editing"),this._canFullEdit()&&Sys.UI.DomElement.addCssClass(document.body,"fulledit"),this._settingsPushedButtons.edit=!0,this._mustShowMouseOverTriggers()&&this._hideTriggers(TriggerTypes.OnMouseOver),this._editorControl.set_editableItems(this._getEditableItems()),this._editorControl.show(),this._editing=!0):(Sys.UI.DomElement.removeCssClass(n,"pushed"),Sys.UI.DomElement.removeCssClass(document.body,"editing"),Sys.UI.DomElement.removeCssClass(document.body,"fulledit"),this._settingsPushedButtons.edit=!1,this._editorControl.hide(),this._editing=!1,Controller.setFocus(this._currentSelectedTask.id),this._mustShowMouseOverTriggers()&&this._displayTriggers(TriggerTypes.OnMouseOver));this._settingsPushedButtons.edit=t};Player._getEditableItems=function(){var i=[],o,u,r,s,f,n,t,e;if(this._simulationFrame.contentWindow&&!this._cameraActive&&this._canFullEdit())for(o=this._simulationFrame.contentWindow.document,u=this._tasks.children,r=0,s=u.length;r<s;++r)f=u[r].id,n=o.getElementById(f),i.push(new Assima.Controls.EditableItem({type:"form",targetElement:n,rect:this._getFormEditorRect(n),rectBoundaries:this._getSimulationRect(),realRect:this._getFormRealRect(n),onMove:Function.createDelegate(this,this._formEditorMove),onResize:Function.createDelegate(this,this._formEditorResize),isLayer:!0,extraData:this._getElementOffsetDelta(n)})),t=$get(f),e=new Assima.Controls.EditableItem({type:"task",targetElement:t,rect:this._getTutorialLayerElementEditorRect(t,this._taskEditorModifier),onStartMoving:Function.createDelegate(this,this._taskEditorStartMoving),onMove:Function.createDelegate(this,this._taskEditorMove),onEndMoving:Function.createDelegate(this,this._taskEditorEndMoving),extraClassName:t==this._currentSelectedTask?"selection-color":""}),t.editorItem=e,i.push(e);return this._currentLayout.undocked&&!this._currentState.IsSandboxBehavior&&!this._smallResolution&&this._isMessageBoxDisplayed()&&i.push(new Assima.Controls.EditableItem({type:"messagebox",targetElement:this._messageBox,rect:this._getTutorialLayerElementEditorRect(this._messageBox),realRect:this._getMessageBoxRect(),onResize:Function.createDelegate(this,this._messageBoxEditorResize),onMove:Function.createDelegate(this,this._messageBoxEditorMove),isLayer:!0})),i};Player._canFullEdit=function(){return this._currentState.ListOfBlocks==null};Player._refreshEditorItemsPositions=function(){for(var n,t,i=this._editorControl.get_editableItems(),r=i.length;r--;){n=i[r];t=n.targetElement;switch(n.type){case"form":n.rect=this._getFormEditorRect(t);n.rectBoundaries=this._getSimulationRect();break;case"task":n.rect=this._getTutorialLayerElementEditorRect(t,this._taskEditorModifier);break;case"messagebox":n.rect=this._getTutorialLayerElementEditorRect(this._messageBox)}}this._editorControl.refresh()};Player._getSimulationRect=function(){var n=Sys.UI.DomElement.getLocation(this._simulationFrame);return rect={left:n.x,top:n.y,right:n.x+this._simulationFrame.offsetWidth,bottom:n.y+this._simulationFrame.offsetHeight}};Player._messageBoxEditorMove=function(n,t,i){return this._windowMove(this._messageBox,this._simulation,t),this._updateMessageBoxCenterPos(),this._userMovedMessageBox=!0,this._onMessageBoxEdited(),i.realRect=this._getMessageBoxRect(),this._getTutorialLayerElementEditorRect(this._messageBox)};Player._messageBoxEditorResize=function(n,t,i,r){var u=this["_windowResize"+i.toUpperCase()];return u(this._messageBox,this._simulation,this._messageBoxOffsetDelta,t,Player.MESSAGEBOX_MIN_WIDTH,Player.MESSAGEBOX_MIN_HEIGHT),this._updateMessageBoxCenterPos(),this._userMovedMessageBox=!0,this._onMessageBoxEdited(),r.realRect=this._getMessageBoxRect(),this._getTutorialLayerElementEditorRect(this._messageBox)};Player._onMessageBoxEdited=function(){var n=this._messageBox,i=this._getStateEditorChanges(),t=i.MessageBox;t||(t=i.MessageBox={});this._currentTutorialMessage.Message.Id&&(t[this._currentTutorialMessage.Message.Id]={Left:n.offsetLeft,Top:n.offsetTop,Width:Math.max(0,n.offsetWidth-this._messageBoxOffsetDelta.width),Height:Math.max(0,n.offsetHeight-this._messageBoxOffsetDelta.height)});this._onLessonEdited()};Player._tryApplyEditorMessageBoxUpdate=function(n){var i;if(!n)return!1;var t=this._messageBox,u=this._getStateEditorChanges(),r=u.MessageBox;return r?(i=r[n],!i)?!1:(t.style.bottom="auto",t.style.right="auto",t.style.left=i.Left+"px",t.style.top=i.Top+"px",t.style.width=i.Width+"px",t.style.height=i.Height+"px",!0):!1};Player._getFormEditorRect=function(n){var t=Controller.getSimulationDisplayRect(n),i=Sys.UI.DomElement.getLocation(this._simulationFrame),r=t.left+i.x,u=t.top+i.y;return formRect={left:r,top:u,right:r+t.width,bottom:u+t.height}};Player._getFormRealRect=function(n){var t=Controller.getSimulationDisplayRect(n),i=t.left,r=t.top;return formRect={left:i,top:r,right:i+t.width,bottom:r+t.height}};Player._formEditorMove=function(n,t,i){var r=i.rect,u=Sys.UI.DomElement.getLocation(this._simulationFrame),f=r.left-u.x-t.offsetX,e=r.top-u.y-t.offsetY;return Controller.resizeForm(i.targetElement.id,f,e,null,null),this._onFormEdited(i.targetElement),i.realRect=this._getFormRealRect(i.targetElement),Player._getFormEditorRect(i.targetElement)};Player._formEditorResize=function(n,t,i,r){var e=r.rect,l=Sys.UI.DomElement.getLocation(this._simulationFrame),o=e.left-l.x,s=e.top-l.y,a=r.extraData,u=e.right-e.left,f=e.bottom-e.top,h=Math.max(1,a.width),c=Math.max(1,a.height);switch(i){case"nw":o=o-t.offsetX;s=s-t.offsetY;u=u+t.offsetX;f=f+t.offsetY;u<h&&(u=h,o=e.right-h);f<c&&(f=c,s=e.bottom-c);break;case"n":s=s-t.offsetY;f=f+t.offsetY;f<c&&(f=c,s=e.bottom-c);break;case"ne":u=u-t.offsetX;s=s-t.offsetY;f=f+t.offsetY;u<0&&(u=0);f<c&&(f=c,s=e.bottom-c);break;case"e":u=u-t.offsetX;u<0&&(u=0);break;case"se":u=u-t.offsetX;f=f-t.offsetY;u<0&&(u=0);f<0&&(f=0);break;case"s":f=f-t.offsetY;f<0&&(f=0);break;case"sw":o=o-t.offsetX;f=f-t.offsetY;u=u+t.offsetX;u<h&&(u=h,o=e.right-h);f<0&&(f=0);break;case"w":o=o-t.offsetX;u=u+t.offsetX;u<h&&(u=h,o=e.right-h)}return Controller.resizeForm(r.targetElement.id,o,s,u,f),this._onFormEdited(r.targetElement),r.realRect=this._getFormRealRect(r.targetElement),Player._getFormEditorRect(r.targetElement)};Player._onFormEdited=function(n){var i=this._getStateEditorChanges(),t=i.Forms;t||(t=i.Forms={});formRect=Controller.getSimulationDisplayRect(n);t[n.id]={Left:Math.round(formRect.left),Top:Math.round(formRect.top),Width:Math.round(formRect.width),Height:Math.round(formRect.height),ExtraData:Controller.getScreenIdForObjectId(n.id)};this._onLessonEdited()};Player._getTutorialLayerElementEditorRect=function(n,t){var i=Sys.UI.DomElement.getLocation(n),r={left:i.x,top:i.y,right:i.x+n.offsetWidth,bottom:i.y+n.offsetHeight};return t&&t(r),r};Player._getMessageBoxRect=function(){var n=this._messageBox,t=n.offsetLeft,i=n.offsetTop;return rect={left:t,top:i,right:Math.max(t,t+n.offsetWidth-this._messageBoxOffsetDelta.width),bottom:Math.max(i,i+n.offsetHeight-this._messageBoxOffsetDelta.height)}};Player._taskEditorStartMoving=function(n,t,i){for(var f,u=this._tasks.children,e=[],r=0,o=u.length;r<o;++r)e[r]=u[r].offsetLeft;for(this._tasksOrdersBeforeEdit=[],r=u.length;r--;)f=u[r],f.style.position="absolute",f.style.left=e[r]+"px",this._tasksOrdersBeforeEdit[r]=f;this._tasksOrder=this._tasksOrdersBeforeEdit.slice();Sys.UI.DomElement.addCssClass(i.targetElement,"moving")};Player._taskEditorMove=function(n,t,i){var f=i.targetElement,u,h,r,s,a,e;this._windowMove(f,this._taskbar,t);var c={left:f.offsetLeft,right:f.offsetLeft+f.offsetWidth},l=Array.indexOf(this._tasksOrder,f),o=this._tasksOrder.slice();for(u=0,h=this._tasksOrder.length;u<h;++u)if(u!=l)if(r=this._tasksOrder[u],u<l){if(c.left<r.offsetLeft+r.offsetWidth/2){for(a=u,o[u]=f,o[u+1]=r,s=r.offsetLeft+f.offsetWidth,r.style.left=s+"px",s+=r.offsetWidth,this._refreshTaskEditorItem(r,n),e=u+2;e<h;++e)r=this._tasksOrder[e],r.style.left=s+"px",s+=r.offsetWidth,o[e]=r,this._refreshTaskEditorItem(r,n);break}o[u]=r}else if(c.right>r.offsetLeft+r.offsetWidth/2){for(a=u,o[u]=f,o[u-1]=r,r.style.left=r.offsetLeft-f.offsetWidth+"px",s=r.offsetLeft+r.offsetWidth+f.offsetWidth,this._refreshTaskEditorItem(r,n),e=u+1;e<h;++e)r=this._tasksOrder[e],r.style.left=s+"px",s+=r.offsetWidth,o[e]=r,this._refreshTaskEditorItem(r,n);break}return this._tasksOrder=o,Player._getTutorialLayerElementEditorRect(f)};Player._taskEditorModifier=function(n){n.left=n.left+1;n.right=n.right-1;n.bottom=n.bottom-2};Player._refreshTaskEditorItem=function(n,t){n.editorItem.rect=this._getTutorialLayerElementEditorRect(n,this._taskEditorModifier);t.refreshItem(n.editorItem)};Player._taskEditorEndMoving=function(n,t){for(var u,f,r,e,i;this._tasks.firstChild;)this._tasks.removeChild(this._tasks.firstChild);for(Sys.UI.DomElement.removeCssClass(t.targetElement,"moving"),u=[],f=!1,r=0,e=this._tasksOrder.length;r<e;++r)i=this._tasksOrder[r],i.style.position="",i.style.left="",this._tasks.appendChild(i),this._refreshTaskEditorItem(i,n),u[r]=i.id,i!=this._tasksOrdersBeforeEdit[r]&&(f=!0);f&&(Player._onTasksReordered(u),Controller.rearrangeForms(u))};Player._onTasksReordered=function(n){for(var u,f=this._currentState.TaskBarCaptions,i=[],r=!1,t=n.length;t--;)i[t]=Controller.getScreenIdForObjectId(n[t]),f[t].Id!=n[t]&&(r=!0);u=this._getStateEditorChanges();u.TasksOrder=r?i:null;this._onLessonEdited()};Player._getStateEditorChanges=function(){var t=this._currentState,i=t.SimId+";"+t.SimStateUID+";"+t.TutId,n=this._editorChanges[i];return n||(n=this._editorChanges[i]={},n.Forms=null,n.MessageBox=null,n.TasksOrder=null,n.UpdatedComment=null),n};Player._onLessonEdited=function(){document.title.indexOf("*")!=document.title.length-1&&(document.title=document.title+" *");window.HasUnsavedChanges=!0};Player._formatEditorChanges=function(){var r=[],u,f,e,o,s;for(u in this._editorChanges){var i=u.split(";"),t=this._editorChanges[u],n={};n.SimulationId=parseInt(i[0]);n.SimulationStateUID=i[1];n.TutorialId=i[2]?parseInt(i[2]):-1;n.TasksOrder=t.TasksOrder;n.UpdatedComment=t.UpdatedComment;n.Forms=[];for(f in t.Forms)e=t.Forms[f],e.Id=f,n.Forms.push(e);n.MessageBox=[];for(o in t.MessageBox)s=t.MessageBox[o],s.Id=o,n.MessageBox.push(s);(n.TasksOrder||n.Forms.length||n.MessageBox.length||n.UpdatedComment!=null)&&r.push(n)}return r.length?Sys.Serialization.JavaScriptSerializer.serialize(r):null};Player._updateScreenComment=function(){if(this._screensComment){this._comment.className="comment minimal";var n=this._getScreenComment();this._titleComment.innerText=Player.Resources.Comment;this._textComment.innerText=n||"";this._comment.style.display=n?"":"none";this._updateCommentPosition()}};Player._getScreenComment=function(){var n=this._getStateEditorChanges().UpdatedComment;return n==null&&(n=this._screensComment[this._currentState.SimId+";"+this._currentState.SimStateUID]),n};Player._openCommentEditor=function(){if(this._screensComment){Sys.UI.DomElement.addCssClass(this._reviewButton,"pushed");this._comment.className="comment editor";this._editComment.value=this._getScreenComment()||"";this._titleComment.innerText=Player.Resources.Comment;var n=this._canFullEdit();this._editComment.disabled=!n;this._saveCommentLink.style.display=this._cancelCommentEditLink.style.display=n?"":"none";this._comment.style.display="";this._updateCommentPosition()}};Player._closeCommentEditor=function(){Sys.UI.DomElement.removeCssClass(this._reviewButton,"pushed");this._comment.style.display="none"};Player._processCommentClick=function(){Sys.UI.DomElement.containsCssClass(this._comment,"minimal")&&this._openCommentEditor()};Player._onCommentEditorFocus=function(){Sys.UI.DomElement.addCssClass(this._comment,"focused")};Player._onCommentEditorBlur=function(){Sys.UI.DomElement.removeCssClass(this._comment,"focused")};Player._saveComment=function(){var n=this._screensComment[this._currentState.SimId+";"+this._currentState.SimStateUID]||"";this._getStateEditorChanges().UpdatedComment=this._editComment.value==n?null:this._editComment.value;this._closeCommentEditor();this._onLessonEdited()};Player._onCommentChanged=function(){this._titleComment.innerText=Player.Resources.Comment+"*"};Player._updateCommentPosition=function(){var t=this._comment,s=t.style,e=this._commentArrow,o=this._reviewButton,h=8,n,i;if(this._resetElementPos(t),this._resetElementPos(e),n=Sys.UI.DomElement.getLocation(o),i=this._currentLayout.name,this._currentLayout.undocked||i=="bottomTop"||i=="topBottom"){var r=n.x,c=this._simulation.offsetWidth-h,u=r+t.offsetWidth-c;u>0&&(r-=u);s.left=r+"px";e.style.left=Math.round(n.x+o.offsetWidth/2)-r+"px"}else switch(i){case"bottomRight":case"bottomLeft":case"topRight":case"topLeft":var f=n.y,l=this._simulation.offsetTop+this._simulation.offsetHeight-h,u=f+t.offsetHeight-l;u>0&&(f-=u);s.top=f+"px";e.style.top=Math.round(n.y+o.offsetHeight/2)-f+"px"}};Player._applyResponsiveLayout=function(){if(this._smallResolutionPrevious=this._smallResolution!=="undefined"?this._smallResolution:window.innerWidth<Player.SMALL_RESOLUTION_WIDTH,this._smallResolution=window.innerWidth<Player.SMALL_RESOLUTION_WIDTH,this._screenOrientation=window.innerWidth<window.innerHeight?DeviceOrientation.Portrait:DeviceOrientation.Landscape,Sys.UI.DomElement[this._smallResolution?"addCssClass":"removeCssClass"](document.body,"smallscreen"),Sys.UI.DomElement[this._screenOrientation==DeviceOrientation.Landscape?"addCssClass":"removeCssClass"](document.body,"landscape"),Sys.UI.DomElement[this._screenOrientation==DeviceOrientation.Portrait?"addCssClass":"removeCssClass"](document.body,"portrait"),this._updateTaskBarDisplay(),this._tutorialPaneOpen&&this._updateDisplayWithTutorialPaneOpen(),this._mustDisplaySettingsButtonsOnNavigationBar()?this._groupSettings.previousSibling!=this._progressBar&&this._navigationBar.insertBefore(this._groupSettings,this._exitButton):this._groupSettings.parentNode!=this._toolbar&&this._toolbar.appendChild(this._groupSettings),Sys.UI.DomElement[this._smallResolution?"addCssClass":"removeCssClass"](this._settingsPane,"scrollable"),this._updateProgressBarDisplay(),this._currentLayout.undocked&&!this._currentState.IsSandboxBehavior&&this._wheelControl&&(this._updateWheelDisplay(),this._updateMessageBoxDisplay()),this._isModalDisplayed())if(this._smallResolution)this._openAndSetModalSize();else{var n={width:Player.MESSAGEPOPUP_MIN_WIDTH,height:Player.MESSAGEPOPUP_MIN_HEIGHT};this._adjustElementPosAndSize(this._messagePopupWindow,this._messagePopupOffsetDelta,this._messagePopupTransparency,n)}this._smallResolution?(this._closeEditor(),this._canEditLesson&&this._updateElementState(this._editButton,Controller.States.Disabled)):this._currentState.EditButton!=Controller.States.Hidden&&this._updateElementState(this._editButton,this._currentState.EditButton);this._refreshAudioBarPos();getComputedStyle(this._comment).display!="none"&&this._updateCommentPosition();this._smallResolutionPrevious&&!this._smallResolution&&this._stateFocusOnSimActiveElement()};Player._updateDisplayWithTutorialPaneOpen=function(){if(this._adjustTutorialPaneSize(),this._smallResolution){var n=this._taskbar.style.bottom;this._resetTaskbarAndSimulationPos();this._taskbar.style.bottom=n;this._activateGlassPaneForTutorialPaneClosing()}else this._diactivateGlassPaneForTutorialPaneClosing()};Player._updateTaskBarDisplay=function(){var i=this._taskbar,n,r,t;i.style.right="";n=!1;this._currentState.IsSandboxBehavior?this._isSandboxWithNavigation||(n=!0):this._currentLayout.undocked&&(this._smallResolution&&this._screenOrientation!=DeviceOrientation.Landscape||(n=!0));n&&(r=document.documentElement.clientWidth||document.body.clientWidth,t=this._getFirstVisibleSettingsButton(),t&&(i.style.right=r-t.offsetLeft+t.offsetWidth+"px"));this._taskbarScrollExtender.refresh()};Player._updateProgressBarDisplay=function(){this._progressbarControl&&(!this._currentLayout.undocked||this._currentState.IsSandboxBehavior&&this._isSandboxWithNavigation)&&(this._adjustProgressBarPos(),this._progressbarControl.set_isMinimal(this._smallResolution),this._progressbarControl.refresh())};Player._updateWheelDisplay=function(){var i=this._wheelControl,r=this._wheelControl.get_buttons(),f=Array.indexOf(r,this._wheelButton.Default),e=f!=-1,n;this._smallResolution?(!e&&this._wheelButton.Default&&(n=r.slice(),n.unshift(this._wheelButton.Default),i.set_buttons(n)),this._smallResolutionPrevious||(this._currentCameraTipsType?this._pushWheelButtonMatchingMessageType(this._currentTutorialMessage?this._currentTutorialMessage.Type:null):this._unPushWheelButtons())):(this._wheel.style.visibility="",e&&(n=r.slice(),n.splice(f,1),i.set_buttons(n)),this._smallResolutionPrevious&&this._isBusy&&this._currentCameraTipsType&&this._unblockCamera());var t=i.get_radius(),o=i.get_location(),u={x:o.x-t,y:o.y-t},s={width:2*t,height:2*t};this._checkBounds(u,s,s,this._simulation)&&i.move(u.x+t,u.y+t);this._updateWheelPosition()};Player._updateMessageBoxDisplay=function(){var t,n;this._smallResolution?this._taskbar.nextElementSibling!=this._messageBox&&$get("running").insertBefore(this._messageBox,this._taskbar.nextElementSibling):this._messageBox.parentNode!=this._simulation&&this._simulation.insertBefore(this._messageBox,this._wheel);!this._smallResolutionPrevious&&this._smallResolution?this._hideMessageBox():this._smallResolutionPrevious&&!this._smallResolution?this._restoreCurrentMessage():this._updateMessageBoxTextHeight();this._isMessageBoxDisplayed()&&(this._smallResolution||(t={width:Player.MESSAGEBOX_MIN_WIDTH,height:Player.MESSAGEBOX_MIN_HEIGHT},this._adjustElementPosAndSize(messageBox,this._messageBoxOffsetDelta,this._simulation,t)),Sys.UI.DomElement.containsCssClass(messageBox,"audio")&&(n=$get("messageBoxSpeaker"),this._smallResolution?n.parentNode==this._messageBoxFooter&&this._messageBox.insertBefore(n,this._messageBoxText):n.parentNode!=this._messageBoxFooter&&this._messageBoxFooter.insertBefore(n,$get("messageBoxTimer"))))};Player._mustDisplaySettingsButtonsOnNavigationBar=function(){return this._smallResolution&&!this._currentLayout.undocked&&this._screenOrientation==DeviceOrientation.Landscape&&Array.indexOf(["bottomRight","bottomLeft","topLeft","topRight"],this._currentLayout.name)!=-1};Player._activateGlassPaneForTutorialPaneClosing=function(){this._setGlassPaneEnabled(!0);Sys.UI.DomElement.addCssClass(this._glassPane,"smoked");Sys.UI.DomElement.addCssClass(this._taskbar,"smoked");this._touchpadControl.set_enabled(!1)};Player._diactivateGlassPaneForTutorialPaneClosing=function(){this._setGlassPaneEnabled(!1);Sys.UI.DomElement.removeCssClass(this._glassPane,"smoked");Sys.UI.DomElement.removeCssClass(this._taskbar,"smoked");this._touchpadopen&&(this._cursorSimulation.style.display="",this._touchpadControl.set_enabled(!0))};Player.update=function(n,t){this._simulationActiveElement=null;this._focusSimAfterStateInit=!0;this._resetState();this._resetTutorialMessageInfo();n.AudioButton=Controller.States.Hidden;n.IsMovieMode&&this._isAudioPlaying()||this._unloadAllAudio();n.EditButton=this._canEditLesson?Controller.States.Visible:Controller.States.Hidden;var i=n.StatementMessage;(n.StatementButton==Controller.States.Visible&&i&&!i.SoundFile&&this._isEmptyContent(i.HTMLText)&&(n.StatementButton=Controller.States.Disabled),n.IsMovieMode&&(n.HintsButton=n.CameraButton=Controller.States.Hidden),this._handleLayouts(n),this._updateSimulationBlocking(n.BlockControl,t),this._updateTutorialButtons(n,t),this._updateSettingsButtons(n,t),this._updateNavigation(n,t),this._updateTaskBar(n),this._updateKeyBoard(n.KeyboardShortCuts),this._currentState=n,t)||(this._checkActualSizeButtonState(),n.IsSandboxBehavior&&this._isSandboxWithNavigation&&this._resizeSandboxProgressBar(),n.IsSandboxBehavior||this._isMovieMode()||this._updateTriggers(n.TriggersData),this._view==Player.Views.Initializing&&this._setView(Player.Views.Running),n.IsSandboxBehavior?this._isSandboxWithNavigation&&this._buildProgressbar():this._currentLayout.undocked?this._buildWheel():this._buildProgressbar(),!n.IsSandboxBehavior&&this._mustShowMouseOverTriggers()&&this._displayTriggers(TriggerTypes.OnMouseOver),this._isMovieMode()?Sys.UI.DomElement.addCssClass(document.body,"movie"):Sys.UI.DomElement.removeCssClass(document.body,"movie"),this._canEditLesson&&this._updateScreenComment(),this._applyResponsiveLayout(),n.IsSandboxBehavior?(this._focusSimAfterStateInit=!1,this._simulationActiveElement=null):(this._messageDisplayProgressIndex=0,this._showMessages()),this._refreshFontIconsIE())};Player.showMessage=function(n){if(n){if(n.Type==Controller.MessageTypes.Error){this._notifyError(n.HTMLText,n.IsRTL?"rtl":"ltr");return}if(this._notificationBar.style.display="none",!this._currentState.IsSandboxBehavior){this._hideTriggerMessage();switch(n.Type){case Controller.MessageTypes.Hints:this._updateElementsStateCameraActive(Controller.Actions.Hints);this._currentCameraTipsType=Controller.Actions.Hints;this._currentLayout.undocked?this._updateMessageBox(Controller.MessageTypes.Hints,n,!0):this._updateTutorialPane(Controller.MessageTypes.Hints,n);this._checkCameraMessageTimer(n);break;case Controller.MessageTypes.Camera:this._updateElementsStateCameraActive(Controller.Actions.Camera);this._currentCameraTipsType=Controller.Actions.Camera;this._currentLayout.undocked?this._updateMessageBox(Controller.MessageTypes.Camera,n,!0):this._updateTutorialPane(Controller.MessageTypes.Camera,n);this._checkCameraMessageTimer(n);break;case Controller.MessageTypes.Default:this._defaultMessage=n;this._displayDefaultMessage()}this._editing&&this._refreshEditorItemsPositions()}}};Player.showInvalidAction=function(){this._notifyError(Player.Resources.InvalidAction)};Player._checkCameraMessageTimer=function(n){n&&n.TimeToDisplay>0&&(!this._isMessageEmpty(n)||n.SoundFile)&&(this._touchpadopen||(this._cursorSimulation.style.display="none"),this._isBusy=!0,this._launchCameraMessageTimer(n.TimeToDisplay*1e3,n.Type))};Player._launchCameraMessageTimer=function(n,t){var u=(new Date).getTime(),i,r;this._cameraMessageTimerEndTime=(new Date).getTime()+n;this._cameraMessageTypeForTimer=t;i=null;switch(t){case Controller.MessageTypes.Trigger_OnInfo:case Controller.MessageTypes.Trigger_OnError:case Controller.MessageTypes.Trigger_OnMouseOver:if(Player.DISPLAY_TRIGGERS_IN_PLACE){i=this._triggerMessage;break}default:i=this._currentLayout.undocked?this._messageBox:this._tutorialPane}r=function(){var r=(new Date).getTime(),f,t;return r>=Player._cameraMessageTimerEndTime?(Player._cameraMessageTimer!=null&&(clearInterval(Player._cameraMessageTimer),Player._cameraMessageTimer=null),Player._keepMouseShowing&&(Player._cursorSimulation.style.display=""),Sys.UI.DomElement.removeCssClass(i,"timer"),Player._smallResolution?Player._currentLayout.undocked?Player._onActivateCameraForUndocked():Player._processTutorialPaneActionButtonClick():Player._unblockCamera(),!1):(f=Math.ceil((n-(r-u))/1e3),t=i.getElementsByClassName("timer")[0],t&&(t.innerText=f+"s"),!0)};Sys.UI.DomElement.addCssClass(i,"timer");r()&&(this._cameraMessageTimer=setInterval(r,333))};Player.showTriggerMessage=function(n){var t,i;this._currentState.IsSandboxBehavior||(t=this._getTriggerDomElementId(n.TriggerData),this._triggersLive.TriggerObjectMessageShown!=t)&&(i=this._convertMessageTypeToTriggerType(n.Message.Type),this._showTriggerMessage(n,n.TriggerData,i,!1,0))};Player.setTaskBarFocus=function(n){this._waitingScreenChange||this._focusTask(this._findTask(n))};Player.showMousePointer=function(n){this._keepMouseShowing=n;n?(this._mouseCoordinates={x:this._mouseCoordinates.x,y:this._mouseCoordinates.y},this._cursorSimulation.style.display=""):this._touchpadopen||(this._cursorSimulation.style.display="none")};Player.moveMousePointerTo=function(n,t){try{var i=Sys.UI.DomElement.getLocation(this._simulation);this._cursorSimulation.style.left=n+i.x+"px";this._cursorSimulation.style.top=t+i.y+"px"}catch(r){}};Player.cameraStateChanged=function(n){var t=Sys.UI.DomElement;return this._cameraActive=n,n?(this._touchpadopen&&this._touchpadControl.set_enabled(!1),this._setGlassPaneEnabled(!0),this._mustShowMouseOverTriggers()&&this._hideTriggers(TriggerTypes.OnMouseOver),this._canPlayPauseCamera()&&(this._isMoviePaused=!1,this._bUserAskedCamera&&this._unblockCamera(),this._showCameraActionButton(!0,!1),this._updateElementsStateCameraActive()),__BROWSER_IS_MOBILE_TABLET)?this._isMovieMode()?this._getCursorCameraStartPos():this._bUserAskedCamera?this._mouseCoordinates:this._touchpadopen?virtualCursorPos={x:this._simulationFrame.offsetLeft+parseInt(this._cursorSimulation.style.left),y:this._simulationFrame.offsetTop+parseInt(this._cursorSimulation.style.top)}:this._getCursorCameraStartPos():this._mouseCoordinates:(this._restoreElementsStateCameraNotActive(),this._touchpadopen&&(this._touchpadControl.set_enabled(!0),this._adjustTouchPadArea()),this._isMovieMode()||this._clearTimeout("_cameraMessageTimer"),this._canPlayPauseCamera()&&this._showCameraActionButton(!1,!1),this._cameraMessageTimer||this._unblockCamera(),this._currentCameraTipsType=null,this._bUserAskedCamera=!1,this._setGlassPaneEnabled(!1),this._currentState.IsSandboxBehavior||(this._currentLayout.undocked&&this._launchMessageOpacityReset(this._messageBoxOpacityAnimationInfo),this._mustShowMouseOverTriggers()&&this._displayTriggers(TriggerTypes.OnMouseOver),this._checkUnsetEmptyTipsMessage(),this._smallResolution&&(this._currentLayout.undocked?this._unPushWheelButtons():this._unPushTutorialPaneButtons())),null)};Player.getLaserStartPoint=function(){if(this._currentLayout.undocked)return this._getCursorStartUndockedMode();if(this._tutorialPaneOpen){var n=Sys.UI.DomElement.getLocation(this._messageSplitter),t=Sys.UI.DomElement.getLocation(this._simulation);return laserStartPos={x:n.x-t.x+this._messageSplitter.offsetWidth/2,y:n.y-t.y+this._messageSplitter.offsetHeight/2}}return this._getCursorCameraStartPos()};Player.getZoomState=function(){return this._zoomState};Player.showScoreMessage=function(n){var t=this._scorm,r=t?t==Scorm2004.api?t.GetValue(Scorm2004.Cmi.ScaledPassingScore)*100:t.LMSGetValue(Scorm12.Cmi.StudentData.MasteryScore):50,u=n.ScoreCalculated>=r?Player.Resources.StatusPassed:Player.Resources.StatusFailed,i=Math.round(n.ScoreCalculated);this._scoreMessageContent=String.format(n.ScoreMessage.HTMLText,i,n.CorrectActionsCount,n.ErrorsCount,n.HintsRequestsCount,n.CameraRequestsCount).replace("[%SCORE_SUCCESS_STATUS%]",u).replace("[%SCORE_CORRECT_COUNT%]",n.CorrectActionsCount).replace("[%SCORE_ERROR_COUNT%]",n.ErrorsCount).replace("[%SCORE_TIP_COUNT%]",n.HintsRequestsCount).replace("[%SCORE_PLAYBACK_COUNT%]",n.CameraRequestsCount).replace("[%SCORE_PERCENTAGE%]",i)};Player.hideElementsAboveSimulator=function(){__BROWSER_IS_MOBILE_TABLET||(this._cursorSimulation.style.display="none");this._setGlassPaneEnabled(!1,!0);this._touchpad.style.display="none"};Player.restoreElementsAboveSimulator=function(){(this._touchpadopen||this._keepMouseShowing)&&(this._cursorSimulation.style.display="",this._setGlassPaneEnabled(!0),this._touchpadopen&&(this._touchpad.style.display=""))};Player.simulationScrollResize=function(){this._editing?this._refreshEditorItemsPositions():this._refreshTriggersDelay();this._checkActualSizeButtonState()};Player._checkActualSizeButtonState=function(){if(this._currentState.ActualSizeButton!=Controller.States.Hidden&&!this._settingsPushedButtons.actualSize){var n=Controller._simulator.Scale,t=n==1?Controller.States.Disabled:Controller.States.Visible;this._updateElementState(this._actualSizeButton,t)}};Player.setMousePointerType=function(n){switch(n){case Controller.MousePointerTypes.Pointer:this._cursorSimulation.className="pointer";break;case Controller.MousePointerTypes.SingleLeftClick:this._cursorSimulation.className="singleLeftClick";break;case Controller.MousePointerTypes.DoubleLeftClick:this._cursorSimulation.className="doubleLeftClick";break;case Controller.MousePointerTypes.RightClick:this._cursorSimulation.className="rightClick";break;case Controller.MousePointerTypes.KeyPress:this._cursorSimulation.className="keyPress";break;case Controller.MousePointerTypes.TabletScrollHorizontal:this._cursorSimulation.className="tabletScrollHorizontal";break;case Controller.MousePointerTypes.TabletScrollVertical:this._cursorSimulation.className="tabletScrollVertical";case Controller.MousePointerTypes.LeftDown:this._cursorSimulation.className="leftDown";break;case Controller.MousePointerTypes.LeftMove:this._cursorSimulation.className="leftMove";break;case Controller.MousePointerTypes.LeftUp:this._cursorSimulation.className="leftUp"}};Player.isBusy=function(){return this._isBusy};Player.getWebIntResumeData=function(){var n=this._getResumeData();return n&&n.WebInt?n.WebInt:null};Player.historyUpdated=function(n){if(this._historyData=n,this._canBrowseAllScreens()){var t=n.LastLoadedStateIndex;this._wheelControl&&this._wheelControl.set_loadedStepCount(t);this._progressbarControl&&this._progressbarControl.set_loadedStepCount(t)}};Player.onActionRectangleChanged=function(n){var e,h,a,t;if(!this._currentState.IsSandboxBehavior&&this._currentLayout.undocked){var s=this._messageBox,c=Sys.UI.DomElement.getLocation(s),o=this._wheelControl,i=o.get_radius(),l=o.get_location(),r={x1:c.x,x2:c.x+s.offsetWidth,y1:c.y,y2:c.y+s.offsetHeight},f={x1:l.x-i,x2:l.x+i,y1:l.y-i,y2:l.y+i},u={x1:n.left,x2:n.right,y1:n.top,y2:n.bottom};this._areElementsOverlapping(r,u)&&(e=this._tryMoveObjectOutOfArea(r,u,70,this._qa),e!=null&&(messageBox.style.left=e.x+"px",messageBox.style.right="auto",messageBox.style.top=e.y+"px",messageBox.style.bottom="auto",r={x1:e.x,x2:e.x+s.offsetWidth,y1:e.y,y2:e.y+s.offsetHeight},this._updateMessageBoxCenterPos()));h=null;this._areElementsOverlapping(f,u)&&(t=this._tryMoveObjectOutOfArea(f,u,70,this._qa),t!=null&&(o.move(t.x+i,t.y+i),f={x1:t.x,x2:t.x+2*i,y1:t.y,y2:t.y+2*i},h={x:t.x,y:t.y}));this._areElementsOverlapping(f,r)&&(t=this._tryMoveObjectOutOfArea(f,r,35,this._qa),t!=null&&(o.move(t.x+i,t.y+i),f={x1:t.x,x2:t.x+2*i,y1:t.y,y2:t.y+2*i},this._areElementsOverlapping(f,u)&&(a={x1:Math.min(u.x1,r.x1),x2:Math.max(u.x2,r.x2),y1:Math.min(u.y1,r.y1),y2:Math.max(u.y2,r.y2)},t=this._tryMoveObjectOutOfArea(f,a,5,this._qa),t!=null?o.move(t.x+i,t.y+i):h!=null&&o.move(h.x+i,h.y+i))))}};Player.simulationInputFocused=function(){};Player.simulationInputBlurred=function(){};Player.wait=function(n,t){this._waitingScreenChange=n;n?this._simulation.insertBefore(_waitDiv,this._glassPane):_waitDiv.parentNode&&this._simulation.removeChild(_waitDiv);t&&setTimeout(t,0)};_waitDiv=document.createElement("DIV");_waitDiv.id="wait";_waitDiv.className="no_dim";Player.getUserName=function(){var i="",t=this._scorm,n;return t?i=t==Scorm2004.api?t.GetValue(Scorm2004.Cmi.LearnerName):t.LMSGetValue(Scorm12.Cmi.Core.StudentName):(n=window.opener||window.parent,n&&n!=window&&!n.closed&&n.UserName&&(i=n.UserName)),i};Player.onRegisterSimulator=function(){this._qa=Controller.isQA();this._qa&&(document.documentElement.className+=" qa",this._wheelControl&&this._wheelControl.set_opacityAnimationSpeed(0),Player.MESSAGE_OPACITY_ANIMATION_SPEED=0)};Player._detectBrowser=function(){return!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"opera":typeof InstallTrigger!="undefined"?"firefox":/constructor/i.test(window.HTMLElement)||function(n){return n.toString()==="[object SafariRemoteNotification]"}(!window.safari||typeof safari!="undefined"&&window.safari.pushNotification)?"safari":/*@cc_on!@*/!1||!!document.documentMode?"internetexplorer":!window.StyleMedia?!!window.chrome&&(!!window.chrome.webstore||!!window.chrome.runtime)?navigator.userAgent.indexOf("Edg")!=-1?"msedge":"chrome":"":"edge"};Sys.UI.DomElement._containsCssClass=Sys.UI.DomElement.containsCssClass;Sys.UI.DomElement.containsCssClass=function(n,t){return typeof n.className!="string"?!1:Sys.UI.DomElement._containsCssClass(n,t)};Scorm12||(Scorm12={Cmi:{Core:{Credit:"cmi.core.credit",Entry:"cmi.core.entry",Exit:"cmi.core.exit",LessonStatus:"cmi.core.lesson_status",LessonLocation:"cmi.core.lesson_location",SessionTime:"cmi.core.session_time",Score:{Max:"cmi.core.score.max",Min:"cmi.core.score.min",Raw:"cmi.core.score.raw"},StudentName:"cmi.core.student_name",TotalTime:"cmi.core.total_time"},StudentData:{MasteryScore:"cmi.student_data.mastery_score"},SuspendData:"cmi.suspend_data"},CmiVocabulary:{Credit:{Credit:"credit",NoCredit:"no-credit"},Entry:{Empty:"",Initial:"ab-initio",Resume:"resume"},Exit:{Empty:"",Logout:"logout",Suspend:"suspend",Timeout:"time-out"},LessonStatus:{Browsed:"browsed",Completed:"completed",Failed:"failed",Incomplete:"incomplete",NotAttempted:"not attempted",Passed:"passed"}},Errors:{NoError:0,GeneralException:101,InvalidArgument:201,ElementCannotHaveChildren:202,ElementNotAnArray:203,NotInitialized:301,NotImplemented:401,InvalidSetValue:402,ReadOnlyError:403,WriteOnlyError:404,IncorrectDataType:405},api:null,getApi:function(){return this.api||(this.api=this.findApi(window)||this.findApi(window.opener)),this.api},findApi:function(n){try{for(;n;n=n.parent){if(n.API&&n.API.LMSInitialize)return n.API;if(n.parent==n)return null}}catch(t){}return null},isInitialized:function(n){return(n=n||this.api,!n)?!1:(n.LMSGetValue(Scorm12.Cmi.Core.Entry),n.LMSGetLastError()!=Scorm12.Errors.NotInitialized)}});Scorm2004||(Scorm2004={Cmi:{CompletionStatus:"cmi.completion_status",Credit:"cmi.credit",Entry:"cmi.entry",Exit:"cmi.exit",LearnerName:"cmi.learner_name",Location:"cmi.location",Interactions:{Count:"cmi.interactions._count",N:{Id:"cmi.interactions.{0}.id",Type:"cmi.interactions.{0}.type",Timestamp:"cmi.interactions.{0}.timestamp",CorrectResponses:{Count:"cmi.interactions.{0}.correct_responses._count",N:{Pattern:"cmi.interactions.{0}.correct_responses.{1}.pattern"}},LearnerResponse:"cmi.interactions.{0}.learner_response",Result:"cmi.interactions.{0}.result",Latency:"cmi.interactions.{0}.latency",Description:"cmi.interactions.{0}.description"}},ProgressMeasure:"cmi.progress_measure",ScaledPassingScore:"cmi.scaled_passing_score",Score:{Scaled:"cmi.score.scaled",Raw:"cmi.score.raw",Min:"cmi.score.min",Max:"cmi.score.max"},SessionTime:"cmi.session_time",SuccessStatus:"cmi.success_status",SuspendData:"cmi.suspend_data"},CmiVocabulary:{CompletionStatus:{Completed:"completed",Incomplete:"incomplete",NotAttempted:"not attempted",Unknown:"unknown"},Credit:{Credit:"credit",NoCredit:"no-credit"},Entry:{Initial:"ab-initio",Resume:"resume",Empty:""},Exit:{TimeOut:"time-out",Suspend:"suspend",Logout:"logout",Normal:"normal",Empty:""},Interactions:{N:{Type:{TrueFalse:"true-false",Choice:"choice",FillIn:"fill-in",LongFillIn:"long-fill-in",Likert:"likert",Matching:"matching",Performance:"performance",Sequencing:"sequencing",Numeric:"numeric",Other:"other"},Result:{Correct:"correct",Incorrect:"incorrect",Unanticipated:"unanticipated",Neutral:"neutral"}}},SuccessStatus:{Passed:"passed",Failed:"failed",Unknown:"unknown"}},Errors:{NoError:0,GeneralException:101,GeneralInitializationFailure:102,AlreadyInitialized:103,ContentInstanceTerminated:104,GeneralTerminationFailure:111,TerminationBeforeInitialization:112,TerminationAfterInitialization:113,RetrieveDataBeforeInitialization:122,RetrieveDataAfterTermination:123,StoreDataBeforeInitialization:132,StoreDataAfterInitialization:133,CommitBeforeInitialization:142,CommitAfterTermination:143,GeneralArgumentError:201,GeneralGetFailure:301,GeneralSetFailure:351,GeneralCommitFailure:391,UndefinedDataModelElement:401,UnimplementedDataModelElement:402,DataModelElementValueNotInitialized:403,DataModelElementIsReadOnly:404,DataModelElementIsWriteOnly:405,DataModelElementTypeMismatch:406,DataModelElementValueOutOfRange:407,DataModelDependencyNotEstablished:408},dateToTimeString:function(n){return String.format("{0:D4}-{1:D2}-{2:D2}T{3:D2}:{4:D2}:{5:D2}.{6:D2}Z",n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),Math.floor(n.getUTCMilliseconds()/10))},millisecondsToTimeIntervalString:function(n){var t=Math.floor(n/1e3);return"PT"+t+"."+Math.floor((n-t*1e3)/10)+"S"},api:null,getApi:function(){return this.api||(this.api=this.findApi(window)||this.findApi(window.opener)),this.api},findApi:function(n){try{for(;n;n=n.parent){if(n.API_1484_11&&n.API_1484_11.Initialize)return n.API_1484_11;if(n.parent==n)return null}}catch(t){}return null},isInitialized:function(n){return(n=n||this.api,!n)?!1:(n.GetValue(Scorm2004.Cmi.LearnerName),n.GetLastError()!=Scorm2004.Errors.RetrieveDataBeforeInitialization)}});JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function o(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function u(i,f){var s,l,h,a,v=n,c,e=f[i];e&&typeof e=="object"&&typeof e.toJSON=="function"&&(e=e.toJSON(i));typeof t=="function"&&(e=t.call(f,i,e));switch(typeof e){case"string":return o(e);case"number":return isFinite(e)?String(e):"null";case"boolean":case"null":return String(e);case"object":if(!e)return"null";if(n+=r,c=[],Object.prototype.toString.apply(e)==="[object Array]"){for(a=e.length,s=0;s<a;s+=1)c[s]=u(s,e)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));else for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&(h=u(l,e),h&&c.push(o(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,r,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",r="",typeof e=="number")for(o=0;o<e;o+=1)r+=" ";else typeof e=="string"&&(r=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return u("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),f.lastIndex=0,f.test(n)&&(n=n.replace(f,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();LZString=function(){function f(n,t){if(!i[n]){i[n]={};for(var r=0;r<n.length;r++)i[n][n.charAt(r)]=r}return i[n][t]}var t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={},n={compressToBase64:function(t){if(t==null)return"";var i=n._compress(t,6,function(n){return r.charAt(n)});switch(i.length%4){default:case 0:return i;case 1:return i+"===";case 2:return i+"==";case 3:return i+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:n._decompress(t.length,32,function(n){return f(r,t.charAt(n))})},compressToUTF16:function(i){return i==null?"":n._compress(i,15,function(n){return t(n+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:n._decompress(t.length,16384,function(n){return t.charCodeAt(n)-32})},compressToUint8Array:function(t){for(var f,r=n.compress(t),u=new Uint8Array(r.length*2),i=0,e=r.length;i<e;i++)f=r.charCodeAt(i),u[i*2]=f>>>8,u[i*2+1]=f%256;return u},decompressFromUint8Array:function(i){var u,r,e,f;if(i===null||i===undefined)return n.decompress(i);for(u=new Array(i.length/2),r=0,e=u.length;r<e;r++)u[r]=i[r*2]*256+i[r*2+1];return f=[],u.forEach(function(n){f.push(t(n))}),n.decompress(f.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":n._compress(t,6,function(n){return u.charAt(n)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),n._decompress(t.length,32,function(n){return f(u,t.charAt(n))}))},compress:function(i){return n._compress(i,16,function(n){return t(n)})},_compress:function(n,t,i){if(n==null)return"";for(var e,f,l={},v={},a="",y="",o="",c=2,w=3,s=2,h=[],r=0,u=0,p=0;p<n.length;p+=1)if(a=n.charAt(p),Object.prototype.hasOwnProperty.call(l,a)||(l[a]=w++,v[a]=!0),y=o+a,Object.prototype.hasOwnProperty.call(l,y))o=y;else{if(Object.prototype.hasOwnProperty.call(v,o)){if(o.charCodeAt(0)<256){for(e=0;e<s;e++)r=r<<1,u==t-1?(u=0,h.push(i(r)),r=0):u++;for(f=o.charCodeAt(0),e=0;e<8;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1}else{for(f=1,e=0;e<s;e++)r=r<<1|f,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=0;for(f=o.charCodeAt(0),e=0;e<16;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1}c--;c==0&&(c=Math.pow(2,s),s++);delete v[o]}else for(f=l[o],e=0;e<s;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1;c--;c==0&&(c=Math.pow(2,s),s++);l[y]=w++;o=String(a)}if(o!==""){if(Object.prototype.hasOwnProperty.call(v,o)){if(o.charCodeAt(0)<256){for(e=0;e<s;e++)r=r<<1,u==t-1?(u=0,h.push(i(r)),r=0):u++;for(f=o.charCodeAt(0),e=0;e<8;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1}else{for(f=1,e=0;e<s;e++)r=r<<1|f,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=0;for(f=o.charCodeAt(0),e=0;e<16;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1}c--;c==0&&(c=Math.pow(2,s),s++);delete v[o]}else for(f=l[o],e=0;e<s;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1;c--;c==0&&(c=Math.pow(2,s),s++)}for(f=2,e=0;e<s;e++)r=r<<1|f&1,u==t-1?(u=0,h.push(i(r)),r=0):u++,f=f>>1;for(;;)if(r=r<<1,u==t-1){h.push(i(r));break}else u++;return h.join("")},decompress:function(t){return t==null?"":t==""?null:n._decompress(t.length,32768,function(n){return t.charCodeAt(n)})},_decompress:function(n,i,r){for(var c=[],l=4,a=4,v=3,y="",b=[],w,e,o,s,f,h,u={val:r(0),position:i,index:1},p=0;p<3;p+=1)c[p]=p;for(e=0,s=Math.pow(2,2),f=1;f!=s;)o=u.val&u.position,u.position>>=1,u.position==0&&(u.position=i,u.val=r(u.index++)),e|=(o>0?1:0)*f,f<<=1;switch(e){case 0:for(e=0,s=Math.pow(2,8),f=1;f!=s;)o=u.val&u.position,u.position>>=1,u.position==0&&(u.position=i,u.val=r(u.index++)),e|=(o>0?1:0)*f,f<<=1;h=t(e);break;case 1:for(e=0,s=Math.pow(2,16),f=1;f!=s;)o=u.val&u.position,u.position>>=1,u.position==0&&(u.position=i,u.val=r(u.index++)),e|=(o>0?1:0)*f,f<<=1;h=t(e);break;case 2:return""}for(c[3]=h,w=h,b.push(h);;){if(u.index>n)return"";for(e=0,s=Math.pow(2,v),f=1;f!=s;)o=u.val&u.position,u.position>>=1,u.position==0&&(u.position=i,u.val=r(u.index++)),e|=(o>0?1:0)*f,f<<=1;switch(h=e){case 0:for(e=0,s=Math.pow(2,8),f=1;f!=s;)o=u.val&u.position,u.position>>=1,u.position==0&&(u.position=i,u.val=r(u.index++)),e|=(o>0?1:0)*f,f<<=1;c[a++]=t(e);h=a-1;l--;break;case 1:for(e=0,s=Math.pow(2,16),f=1;f!=s;)o=u.val&u.position,u.position>>=1,u.position==0&&(u.position=i,u.val=r(u.index++)),e|=(o>0?1:0)*f,f<<=1;c[a++]=t(e);h=a-1;l--;break;case 2:return b.join("")}if(l==0&&(l=Math.pow(2,v),v++),c[h])y=c[h];else if(h===a)y=w+w.charAt(0);else return null;b.push(y);c[a++]=w+y.charAt(0);l--;w=y;l==0&&(l=Math.pow(2,v),v++)}}};return n}();typeof define=="function"&&define.amd?define(function(){return LZString}):typeof module!="undefined"&&module!=null&&(module.exports=LZString);Type.registerNamespace("Assima");Assima.Url=function(n,t,i,r,u,f){this.protocol=n?n:null;this.hostname=t?t:null;this.port=i?i:null;this.pathname=r?r:null;this.params=u?u:{};this.hashParams=f?f:{}};Assima.Url.RegexUrl=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;Assima.Url.RegexHost=/([^:]*)[:]?(.*)/;Assima.Url.RegexParam=/([^=]*)=?(.*)/;Assima.Url.parseString=function(n){var t=Assima.Url.RegexUrl.exec(n),i;if(t==null)return null;var e=t[1],r=null,u=null,f=t[4];f&&(i=Assima.Url.RegexHost.exec(f),i&&(r=i[1],u=i[2]));var o=t[5],s=Assima.Url.extractParams(t[7]),h=Assima.Url.extractParams(t[9]);return new Assima.Url(e,r,u,o,s,h)};Assima.Url.extractParams=function(n){var u={},r,t,f,i;if(n)for(r=n.split("&"),t=0,f=r.length;t<f;t++)i=Assima.Url.RegexParam.exec(r[t]),i&&(u[i[1].toLowerCase()]=decodeURIComponent(i[2]));return u};Assima.Url.combineParams=function(n){var r=[],t,i;for(var u in n)t=u,i=n[u],i!=null&&(t+="="+encodeURI(i).replace(/[&]/g,"%26").replace(/[=]/g,"%3D").replace(/[?]/g,"%3F").replace(/[#]/g,"%23")),r.push(t);return r.join("&")};Assima.Url.paramToArray=function(n){var t,n,i;if(n==null)return null;if(n=="")return[];for(t=n.split(","),i=t.length;i--;)n=t[i],n==""||isNaN(n)||(t[i]=parseInt(n));return t};Assima.Url.arrayToParameter=function(n){return n==null?null:n.join(",")};Assima.Url.prototype.getParam=function(n){return this.params[n.toLowerCase()]};Assima.Url.prototype.getHashParam=function(n){return this.hashParams[n.toLowerCase()]};Assima.Url.prototype.getHashParamOrParam=function(n){var t=this.hashParams[n.toLowerCase()];return t!=null?t:this.params[n.toLowerCase()]};Assima.Url.prototype.removeParam=function(n){delete this.params[n.toLowerCase()]};Assima.Url.prototype.removeHashParam=function(n){delete this.hashParams[n.toLowerCase()]};Assima.Url.prototype.setParam=function(n,t){return this.params[n.toLowerCase()]=t,this};Assima.Url.prototype.setHashParam=function(n,t){return this.hashParams[n.toLowerCase()]=t,this};Assima.Url.prototype.getHash=function(){var n=Assima.Url.combineParams(this.hashParams);return n?"#"+n:n};Assima.Url.prototype.getSearch=function(){var n=Assima.Url.combineParams(this.params);return n?"?"+n:n};Assima.Url.prototype.toString=function(){var n=new Sys.StringBuilder;return this.protocol&&(n.append(this.protocol),n.append("//")),this.hostname&&n.append(this.hostname),this.port&&(n.append(":"),n.append(this.port)),this.pathname&&n.append(this.pathname),n.append(this.getSearch()),n.append(this.getHash()),n.toString()};Assima.Url.prototype.valueOf=function(){return this.toString()};Assima.Url.registerClass("Assima.Url");typeof Sys!="undefined"&&Sys.Application.notifyScriptLoaded(),function(){function l(n){var t=n.currentStyle;t&&(n.stroked=t.stroke&&t.stroke!="none",n.stroked&&(n.strokecolor=t.stroke||"none",n.strokeweight=t["stroke-width"]||"1px",n.stroke.opacity=t["stroke-opacity"]||"1.0"),n.filled=t.fill!="none",n.filled&&(n.fillcolor=t.fill||"Black",n.fill.opacity=t["fill-opacity"]||"1.0"))}function a(n){return function(){var t=arguments;setTimeout(function(){n.apply(null,t)},0)}}function f(n,t){return function(){t.apply(n,arguments)}}var i=function(){if(navigator.appName=="Microsoft Internet Explorer"){var n=9;if(navigator.appVersion.indexOf("MSIE")!=-1&&(n=parseFloat(navigator.appVersion.split("MSIE")[1])),n<9)return!0}return!1}(),r=!i,u=a(l),c=function(){var n=function(){};return function(t,i){n.prototype=i.prototype;t.prototype=new n;t.base=i.prototype;t.baseType=i;t.prototype.constructor=t}}(),t,e,n,o,s,h;(function(){var t,n,r;if(i)for(document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"),t=["fill","stroke","path","textpath"],n=0,r=t.length;n<r;n++)document.createStyleSheet().addRule("v\\:"+t[n],"behavior: url(#default#VML);")})();t=window.jxGraphics=function(n){this.origin=new e(0,0);this.scale=1;this.coordinateSystem="default";this._shapes=[];this._element=n||document.body;this._svg=null;this._vml=null;this._defs=null;i?(this._vml=document.createElement("v:group"),this._vml.style.position="absolute",this._vml.style.top="0px",this._vml.style.left="0px",this._element.appendChild(this._vml)):(this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.appendChild(this._svg),this._defs=document.createElementNS("http://www.w3.org/2000/svg","defs"),this._svg.appendChild(this._defs),this._svg.style.position="absolute",this._svg.style.overflow="visible",this._svg.style.top="0px",this._svg.style.left="0px",this._svg.style.width="100%",this._svg.style.height="100%")};t.prototype.getDefs=function(){return this._defs};t.prototype.addShape=function(n){var t=this.indexOfShape(n);t<0&&this._shapes.push(n)};t.prototype.removeShape=function(n){var t=this.indexOfShape(n);t>=0&&this._shapes.splice(t,1)};t.prototype.getElement=function(){return this._element};t.prototype.getGraphicsElement=function(){return this._svg||this._vml};t.prototype.getSVG=function(){return this._svg};t.prototype.getVML=function(){return this._vml};t.prototype.logicalToPhysicalPoint=function(n){return this.coordinateSystem.toLowerCase()=="cartesian"?new e(Math.round(n.x*this.scale+this.origin.x),Math.round(this.origin.y-n.y*this.scale)):new e(Math.round(n.x*this.scale+this.origin.x),Math.round(n.y*this.scale+this.origin.y))};t.prototype.draw=function(n){n.draw(this)};t.prototype.remove=function(n){n.remove(this)};t.prototype.redrawAll=function(){for(var t=this._shapes,n=0,i=t.length;n<i;n++)t[n].draw(this)};t.prototype.getShapesCount=function(){return this._shapes.length};t.prototype.getShape=function(n){return this._shapes[n]};t.prototype.indexOfShape=function(n){for(var i=this._shapes,t=i.length;t--;)if(i[t]==n)return t;return-1};e=window.jxPoint=function(n,t){this.x=n;this.y=t};n=window.jxShape=function(n){this.cssClass=n;this._svgvmlObj=null;this._isFirst=!0;this._graphics=null};n.prototype.addEventListener=function(n,t){function i(n){t(n,r)}this._svgvmlObj||(this._svgvmlObj=this._createObject(),this._initObject());this._svgvmlObj.addEventListener?this._svgvmlObj.addEventListener(n,i,!1):this._svgvmlObj.attachEvent&&this._svgvmlObj.attachEvent("on"+n,i);var r=this};n.prototype.draw=function(n){this._svgvmlObj||(this._svgvmlObj=this._createObject(),this._initObject());this._svgvmlObj.style.display="none";i?this._svgvmlObj.className=this.cssClass:this.cssClass?this._svgvmlObj.setAttribute("class",this.cssClass):this._svgvmlObj.removeAttribute("class");this._isFirst&&(n.getGraphicsElement().appendChild(this._svgvmlObj),this._isFirst=!1);this._drawObject(n);i&&l(this._svgvmlObj);this._svgvmlObj.style.display="";this._graphics&&this._graphics!=n&&this._graphics.removeShape(this);this._graphics=n;this._graphics.addShape(this)};n.prototype._initObject=function(){i&&(this._svgvmlObj.attachEvent("onmouseenter",f(this,this._onMouseEnter)),this._svgvmlObj.attachEvent("onmousedown",f(this,this._onMouseDown)))};n.prototype._createObject=function(){throw"Not implemented";};n.prototype._drawObject=function(){throw"Not implemented";};n.prototype.remove=function(){this._graphics&&(this._graphics.getGraphicsElement().removeChild(this._svgvmlObj),this._graphics.removeShape(this),this._graphics=null,this._isFirst=!0)};n.prototype.show=function(){this._svgvmlObj.style.display=""};n.prototype.hide=function(){this._svgvmlObj.style.display="none"};n.prototype._onMouseEnter=function(){this._mouseLeaveDelegate=f(this,this._onMouseLeave);this._svgvmlObj.attachEvent("onmouseleave",this._mouseLeaveDelegate);u(this._svgvmlObj)};n.prototype._onMouseLeave=function(){this._svgvmlObj.detachEvent("onmouseleave",this._mouseLeaveDelegate);this._mouseLeaveDelegate=null;u(this._svgvmlObj)};n.prototype._onMouseDown=function(){this._mouseUpDelegate=f(this,this._onMouseUp);document.attachEvent("onmouseup",this._mouseUpDelegate);u(this._svgvmlObj)};n.prototype._onMouseUp=function(){document.detachEvent("onmouseup",this._mouseUpDelegate);this._mouseUpDelegate=null;u(this._svgvmlObj)};o=window.jxLine=function(t,i,r){n.call(this,r);this.fromPoint=t;this.toPoint=i};c(o,n);o.prototype._createObject=function(){return r?document.createElementNS("http://www.w3.org/2000/svg","line"):document.createElement("v:line")};o.prototype._drawObject=function(n){var t=n.logicalToPhysicalPoint(this.fromPoint),i=n.logicalToPhysicalPoint(this.toPoint),u=t.x,f=t.y,e=i.x,o=i.y;r?(this._svgvmlObj.setAttribute("x1",u),this._svgvmlObj.setAttribute("y1",f),this._svgvmlObj.setAttribute("x2",e),this._svgvmlObj.setAttribute("y2",o)):(this._svgvmlObj.style.position="absolute",this._svgvmlObj.From=u+","+f,this._svgvmlObj.To=e+","+o)};s=window.jxCircle=function(t,i,r){n.call(this,r);this.center=t;this.radius=i};c(s,n);s.prototype._createObject=function(){return r?document.createElementNS("http://www.w3.org/2000/svg","circle"):document.createElement("v:oval")};s.prototype._drawObject=function(n){var i=n.logicalToPhysicalPoint(this.center),t=n.scale,u=i.x,f=i.y;r?(this._svgvmlObj.setAttribute("cx",u),this._svgvmlObj.setAttribute("cy",f),this._svgvmlObj.setAttribute("r",t*this.radius),this._svgvmlObj.style.position="absolute"):(this._svgvmlObj.style.width=t*this.radius*2,this._svgvmlObj.style.height=t*this.radius*2,this._svgvmlObj.style.position="absolute",this._svgvmlObj.style.top=f-t*this.radius,this._svgvmlObj.style.left=u-t*this.radius)};h=window.jxArcSector=function(t,i,r,u,f,e){n.call(this,e);this.center=t;this.width=i;this.height=r;this.startAngle=u;this.arcAngle=f};c(h,n);h.prototype._createObject=function(){return r?document.createElementNS("http://www.w3.org/2000/svg","path"):document.createElement("v:shape")};h.prototype._drawObject=function(n){var a=n.logicalToPhysicalPoint(this.center),v=n.scale,u=a.x,f=a.y,t=v*this.width/2,i=v*this.height/2,e=this.startAngle*Math.PI/180,y=t*i/Math.sqrt(i*i*Math.cos(e)*Math.cos(e)+t*t*Math.sin(e)*Math.sin(e)),s=y*Math.cos(e),h=y*Math.sin(e),s=u+s,h=f+h,o=(this.startAngle+this.arcAngle)*Math.PI/180,p=t*i/Math.sqrt(i*i*Math.cos(o)*Math.cos(o)+t*t*Math.sin(o)*Math.sin(o)),c=p*Math.cos(o),l=p*Math.sin(o),c=u+c,l=f+l;r?this.arcAngle>180?this._svgvmlObj.setAttribute("d","M"+u+" "+f+" L"+s+" "+h+" A"+t+" "+i+" 0 1 1 "+c+" "+l+" Z"):this._svgvmlObj.setAttribute("d","M"+u+" "+f+" L"+s+" "+h+" A"+t+" "+i+" 0 0 1 "+c+" "+l+" Z"):(this._svgvmlObj.style.position="absolute",this._svgvmlObj.style.height=1,this._svgvmlObj.style.width=1,this._svgvmlObj.CoordSize="1 1",this._svgvmlObj.Path="M"+u+","+f+" AT"+(u-t)+","+(f-i)+","+(u+t)+","+(f+i)+","+Math.round(c)+","+Math.round(l)+","+Math.round(s)+","+Math.round(h)+" X E")}}();Type.registerNamespace("Assima.Controls"),function(){function t(n){t.initializeBase(this,[n]);this._progress={element:null,bar:{element:null,graphics:null,shapes:{}},numbers:{element:null}};this._spinner={element:null,text:null,graphics:null,shapes:{}};this._wheel={element:null,graphics:null,shapes:[],buttonElements:[]};this._center={element:null,buttonElement:null,graphics:null,shape:null};this._centerButton=new Assima.Controls.WheelButton;this._buttons=[];this._step=0;this._stepCount=0;this._enabledStepCount=null;this._loadedStepCount=null;this._radius=0;this._centerLocation=null;this._moveTarget=null;this._moveOrigin=null;this._moveStep=0;this._moveStepAllowed=!0;this._moving=!1;this._mouseOutTimeout=null;this._mouseOver=!1;this._collapsed=!1;this._showSpinner=!0;this._enableSpinner=!0;this._opacityAnimationSpeed=30;this._clickHandler=Function.createDelegate(this,this._onClick);this._clickShapeHandler=Function.createDelegate(this,this._onClickShape);this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._mouseDownHandler=Function.createDelegate(this,this._onMouseDown);this._mouseDownShapeHandler=Function.createDelegate(this,this._onMouseDownShape);this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._mouseOverHandler=Function.createDelegate(this,this._onMouseOver);this._mouseOutHandler=Function.createDelegate(this,this._onMouseOut);this._mouseOutTimeoutHandler=Function.createDelegate(this,this._onMouseOutTimeout);this._selectStartHandler=Function.createDelegate(this,this._onSelectStart)}var n=t.prototype;n.get_buttons=function(){return this._buttons};n.set_buttons=function(n){this._buttons!==n&&(this._buttons=n,this._initialized&&this.refresh(),this.raisePropertyChanged("buttons"))};n.get_centerButton=function(){return this._centerButton};n.set_centerButton=function(n){this._centerButton!==n&&(this._centerButton=n,this._initialized&&this.refreshCenter(),this.raisePropertyChanged("centerButton"))};n.get_collapsed=function(){return this._collapsed};n.set_collapsed=function(n){this._collapsed!==n&&(this._collapsed=n,this._initialized&&this.refresh(),this.raisePropertyChanged("collapsed"),this.raiseExpandCollapse())};n.get_location=function(){return this._centerLocation};n.get_radius=function(){return this._radius};n.get_showSpinner=function(){return this._showSpinner};n.set_showSpinner=function(n){this._showSpinner!==n&&(this._showSpinner=n,this._initialized&&this._refreshSpinner(),this.raisePropertyChanged("showSpinner"))};n.get_enableSpinner=function(){return this._enableSpinner};n.set_enableSpinner=function(n){this._enableSpinner!==n&&(this._enableSpinner=n,this._initialized&&this._refreshSpinner(),this.raisePropertyChanged("enableSpinner"))};n.get_step=function(){return this._step};n.set_step=function(n){this._step!==n&&(this._step=n,this._initialized&&this._refreshStep(),this.raisePropertyChanged("step"))};n.get_stepCount=function(){return this._stepCount};n.set_stepCount=function(n){this._stepCount!==n&&(this._stepCount=n,this._step=Math.min(this._step,n-1),this._initialized&&(this._refreshProgressBar(),this._refreshSpinner()),this.raisePropertyChanged("stepCount"))};n.get_enabledStepCount=function(){return this._enabledStepCount!=null?this._enabledStepCount:this._stepCount};n.set_enabledStepCount=function(n){this._enabledStepCount!==n&&(this._enabledStepCount=Math.min(n,this._stepCount),this._initialized&&(this._refreshProgressBar(),this._refreshSpinner()),this.raisePropertyChanged("enabledStepCount"))};n.get_loadedStepCount=function(){return this._loadedStepCount!=null?this._loadedStepCount:this._stepCount};n.set_loadedStepCount=function(n){this._loadedStepCount!==n&&(this._loadedStepCount=Math.min(n,this._stepCount),this._initialized&&this._refreshProgressBar(),this.raisePropertyChanged("loadedStepCount"))};n.get_opacityAnimationSpeed=function(){return this._opacityAnimationSpeed};n.set_opacityAnimationSpeed=function(n){this._opacityAnimationSpeed!==n&&(this._opacityAnimationSpeed=n,this.raisePropertyChanged("opacityAnimationSpeed"))};n.add_moving=function(n){this.get_events().addHandler("moving",n)};n.remove_stepChanging=function(n){this.get_events().removeHandler("moving",n)};n.raiseMoving=function(n,t){var r=this.get_events().getHandler("moving"),i;return r?(i=new Assima.Controls.MoveCancelEventArgs(n,t),r(this,i),!i.get_cancel()):!0};n.add_moved=function(n){this.get_events().addHandler("moved",n)};n.remove_stepChanged=function(n){this.get_events().removeHandler("moved",n)};n.raiseMoved=function(){var n=this.get_events().getHandler("moved");n&&n(this,Sys.EventArgs.Empty)};n.add_unfocused=function(n){this.get_events().addHandler("unfocused",n)};n.remove_unfocused=function(n){this.get_events().removeHandler("unfocused",n)};n.raiseUnfocused=function(){var n=this.get_events().getHandler("unfocused");n&&n(this,Sys.EventArgs.Empty)};n.add_stepChanging=function(n){this.get_events().addHandler("stepChanging",n)};n.remove_stepChanging=function(n){this.get_events().removeHandler("stepChanging",n)};n.raiseStepChanging=function(n){var i=this.get_events().getHandler("stepChanging"),t;return i?(t=new Assima.Controls.StepCancelEventArgs(n),i(this,t),!t.get_cancel()):!0};n.add_stepChanged=function(n){this.get_events().addHandler("stepChanged",n)};n.remove_stepChanged=function(n){this.get_events().removeHandler("stepChanged",n)};n.raiseStepChanged=function(n){var t=this.get_events().getHandler("stepChanged");t&&t(this,new Assima.Controls.StepEventArgs(n))};n.add_expandCollapse=function(n){this.get_events().addHandler("expandCollapse",n)};n.remove_expandCollapse=function(n){this.get_events().removeHandler("expandCollapse",n)};n.raiseExpandCollapse=function(n){var t=this.get_events().getHandler("expandCollapse");t&&t(this,new Assima.Controls.ExpandCollapseEventArgs(n))};n.initialize=function(){var n=this._element;n.unselectable="on";$addHandler(n,"mousedown",this._mouseDownHandler);$addHandler(n,"touchstart",this._mouseDownHandler);$addHandler(n,"click",this._clickHandler);$addHandler(n,"dragStart",this._dragStartHandler);$addHandler(n,"selectstart",this._selectStartHandler);__IS_IOS||($addHandler(n,"mouseover",this._mouseOverHandler),$addHandler(n,"mouseout",this._mouseOutHandler));this._initializeProgressBar();this._initializeWheel();this._initializeCenter();this._initializeSpinner();this.refresh();var n=this._element,i=Sys.UI.DomElement.getLocation(n),r=this._radius,u=this._centerLocation=new Sys.UI.Point(i.x+r,i.y+r);this.move(u.x,u.y);t.callBaseMethod(this,"initialize")};n._computeDimensions=function(){var n=this._element,t=n.clientWidth,i=n.clientHeight,r=Math.min(t,i),u=Math.round(r/2);this._radius=u};n._initializeProgressBar=function(){var u=this._progress,t=u.element=document.createElement("div"),i,r,n,e,f;t.className="progress";i=u.bar;r=i.element=document.createElement("div");r.className="progressBar";t.appendChild(r);i.graphics=new jxGraphics(r);n=i.shapes;n.background=Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.documentMode<=8?new jxArcSector(null,null,null,-90,360,"shape-background"):new jxCircle(null,null,"shape-background");n.foreground=new jxArcSector(null,null,null,-90,null,"shape-foreground");n.loading=new jxArcSector(null,null,null,-90,null,"shape-foreground loading");n.markers={start:new jxLine(null,null,"shape-marker start"),end:new jxLine(null,null,"shape-marker end")};e=u.numbers;f=e.element=document.createElement("ol");f.className="numbers";t.appendChild(f);this._element.appendChild(t)};n._initializeWheel=function(){var i=this._element,t=this._wheel,n=t.element=document.createElement("div");n.className="buttons";i.appendChild(n);t.graphics=new jxGraphics(n)};n._initializeCenter=function(){var u=this._element,n=this._center,t=n.element=document.createElement("div"),i,r;t.className="center";n.graphics=new jxGraphics(t);n.shape=new jxCircle;i=n.buttonElement=document.createElement("span");r=document.createElement("span");r.className="label";i.appendChild(r);t.appendChild(i);u.appendChild(t)};n._initializeSpinner=function(){var u=this._element,t=this._spinner,n=t.element=document.createElement("div"),f=n.style,e,i,r;n.className="spinner";f.display="none";u.appendChild(n);e=t.graphics=new jxGraphics(n);i=document.createElement("span");i.className="number";t.text=i.appendChild(document.createTextNode(""));n.appendChild(i);r=t.shapes;r.circle=new jxCircle(null,null,"shape-spinner")};n.refresh=function(){this._collapsed?(Sys.UI.DomElement.addCssClass(this._element,"collapsed"),Sys.UI.DomElement.removeCssClass(this._element,"expanded")):(Sys.UI.DomElement.removeCssClass(this._element,"collapsed"),Sys.UI.DomElement.addCssClass(this._element,"expanded"));this._buttons.length==0?Sys.UI.DomElement.addCssClass(this._element,"empty"):Sys.UI.DomElement.removeCssClass(this._element,"empty");this._computeDimensions();this._refreshProgressBar();this._refreshWheel();this.refreshCenter();this._refreshSpinner()};n._refreshStep=function(){var n=r(this._step,this._stepCount);this._rotateProgressBar(n);this._rotateSpinner(n)};n._refreshProgressBar=function(){var it=this._step,i=this._stepCount,rt=this.get_enabledStepCount(),b=this._progress,o=b.bar,k=o.element,u=Math.min(k.clientHeight,k.clientWidth),h,c,l,a,n;if(u>0){var s=o.shapes,k=o.element,ut=o.graphics,p=u/2,f=new jxPoint(p,p),t=s.background;t.center=f;t instanceof jxArcSector?t.width=t.height=u:t.radius=p;h=s.foreground;c=s.loading;h.center=c.center=f;h.width=h.height=c.width=c.height=u;l=s.markers;l.start.fromPoint=f;l.start.toPoint=new jxPoint(f.x,0);l.end.fromPoint=f;t.draw(ut);a=r(it,i);this._rotateProgressBar(a)}var ft=b.numbers,v=ft.element,w=Math.min(v.clientHeight,v.clientWidth);if(w>0){var e=w/2,et=2*Math.PI*e,ot=2*Math.PI/i,st=Math.PI/2,d=document.createDocumentFragment(),ht=u-w,ct=Math.floor(et/ht),g=Math.floor(i/ct)+1,lt=(i-1)%g;for(n=0;n<i;n++)if(n%g==lt){var a=st-ot*(n+1),y=document.createElement("li"),nt=y.style,tt=["number"];n>=rt&&tt.push("disabled");y.className=tt.join(" ");nt.left=e+Math.round(e*Math.cos(a))+"px";nt.top=e-Math.round(e*Math.sin(a))+"px";y.innerText=n+1;d.appendChild(y)}v.innerHTML="";v.appendChild(d)}};n._rotateProgressBar=function(n){var y=this._progress,f=y.bar,c=f.element,l=Math.min(c.clientHeight,c.clientWidth),h;if(l>0){var i=f.graphics,e=f.shapes,t=e.foreground,o=e.loading,s=e.markers,u=l/2,a=this._stepCount,p=this.get_enabledStepCount(),w=this.get_loadedStepCount(),v=r(p-1,a),b=r(w-1,a);t.arcAngle=Math.min(Math.min(n,v,b)*180/Math.PI,359.99999);o.startAngle=t.startAngle+t.arcAngle;o.arcAngle=Math.min(Math.min(n,v)*180/Math.PI,359.99999)-t.arcAngle;h=Math.PI/2-n;s.end.toPoint=new jxPoint(u+u*Math.cos(h),u-u*Math.sin(h));t.draw(i);o.draw(i);s.start.draw(i);s.end.draw(i)}};n._refreshWheel=function(){for(var h,i,t,a,v,u=this._wheel,f=u.element,y=u.buttonElements,o=u.shapes,n=o.length;n--;)h=o.pop(),h.remove(),t=y.pop(),f.removeChild(t);if(i=Math.min(f.clientWidth,f.clientHeight),i>0){var p=this._buttons,e=p.length,c=i/2,l=new jxPoint(c,c),it=this._center,w=it.element,rt=Math.min(w.clientWidth,w.clientHeight),b=rt/2,k=b+(c-b)/2,et=u.graphics,ut=r/2,d=document.createDocumentFragment(),r=2*Math.PI/e,ft=e%2==0?Math.PI:Math.PI/2+r/Math.max(Math.floor(e/2),1),ut=r/2,d=document.createDocumentFragment();for(n=0;n<e;n++){var g=p[n],nt=ft-r*n,tt=nt-ut,h=o[n]=new jxArcSector(l,i,i,-nt*180/Math.PI,Math.min(r*180/Math.PI,359.99999));h.addEventListener("click",this._clickShapeHandler);t=y[n]=document.createElement("span");a=t.style;t.onclick=Function.createCallback(s,g);a.left=l.x+Math.round(k*Math.cos(tt))+"px";a.top=l.y-Math.round(k*Math.sin(tt))+"px";v=document.createElement("span");v.className="label";t.appendChild(v);this.refreshButton(g);d.appendChild(t)}f.appendChild(d)}};n.refreshButton=function(n){var s=this._buttons,e=Array.indexOf(s,n),t=this._wheel,l=t.element,h=t.buttonElements,i=h[e],c=t.shapes,u=c[e],r=[],f,o;n.className&&r.push(n.className);n.pushed&&r.push("pushed");n.disabled&&r.push("disabled");f=r.join(" ");u&&(u.cssClass="shape-button "+f,u.draw(t.graphics));i&&(i.className="button "+f,i.title=n.toolTip,o=i.firstChild,o.innerText=n.text)};n.refreshCenter=function(){var n=this._centerButton,t=this._center,s=t.element,u=t.buttonElement,i=[],f,e,h;if(n.className&&i.push(n.className),n.pushed&&i.push("pushed"),n.disabled&&i.push("disabled"),f=i.join(" "),e=Math.min(s.clientWidth,s.clientHeight),e>0){var r=t.shape,c=t.graphics,o=e/2;r.cssClass="shape-button "+f;r.radius=o;r.center=new jxPoint(o,o);r.draw(c)}u.className="button "+f;u.title=n.toolTip;h=u.firstChild;h.innerText=n.text};n._refreshSpinner=function(){var e=this._showSpinner,n=this._spinner,t=n.element,s=t.style,i,o;if((s.display=e?"":"none",e)&&(i=Math.min(t.clientWidth,t.clientHeight),i>0)){var u=i/2,h=n.shapes,f=h.circle;f.center=new jxPoint(u,u);f.radius=u;f.draw(n.graphics);o=r(this._step,this._stepCount);this._rotateSpinner(o)}};n._rotateSpinner=function(n){var h;if(this._showSpinner){var i=this._spinner,t=i.element,f=t.style,e=Math.min(t.clientWidth,t.clientHeight);if(e>0){var c=e/2,r=this._radius,o=r+c,s=Math.PI/2-n,l=this._stepCount,a=this.get_enabledStepCount();f.left=Math.round(r+o*Math.cos(s))+"px";f.top=Math.round(r-o*Math.sin(s))+"px";h=t.className;!this._enableSpinner||u(n,l)>=a?Sys.UI.DomElement.addCssClass(t,"disabled"):Sys.UI.DomElement.removeCssClass(t,"disabled");t.className!=h&&i.shapes.circle.draw(i.graphics)}i.text.data=u(n,this._stepCount)+1}};n.move=function(n,t){var u=this._element,i=u.style,r=this._centerLocation;i.left=n+"px";i.top=t+"px";r.x=n;r.y=t};n._onClickShape=function(n,t){this._onClick(new Sys.UI.DomEvent(n),t)};n._onClick=function(n,t){var o,i,r;if(t){var s=this._wheel,h=s.shapes,u=Array.indexOf(h,t);u!=-1&&(i=this._buttons[u],e(i)||(n.stopPropagation(),n.preventDefault()));return}if(o=this._center,f(n.target,o.element)){i=this._centerButton;i.disabled||(r=i.onclick,r&&r(i)==!1||this.set_collapsed(!this._collapsed));n.stopPropagation();n.preventDefault();return}n.stopPropagation()};n._onDragStart=function(n){n.stopPropagation();n.preventDefault()};n._onMouseDownShape=function(n,t){this._onMouseDown(new Sys.UI.DomEvent(n),t)};n._onMouseDown=function(n){var u=this._spinner,t=u.element,e=this._center,i=e.element,r=f(n.target,t)&&t||f(n.target,i)&&i;r&&($addHandler(document,"mousemove",this._mouseMoveHandler),$addHandler(document,"touchmove",this._mouseMoveHandler),$addHandler(document,"mouseup",this._mouseUpHandler),$addHandler(document,"touchend",this._mouseUpHandler),this._moving=!1,this._moveOrigin=o(n),this._moveTarget=r,this._element.setCapture&&this._element.setCapture(),n.type=="mousedown"&&n.preventDefault());n.stopPropagation()};n._onMouseMove=function(n){var l=o(n),f=l.x,t=l.y,s,a,v,e;if(!this._moving){if(s=this._moveOrigin,Math.max(Math.abs(s.x-f),Math.abs(s.y-t))<5)return;this._moving=!0;this._moveStep=this._step;this._overlay=h();document.body.appendChild(this._overlay);this._mouseOver=!1;Sys.UI.DomElement.addCssClass(this._element,"moving");i(this._element,100)}if(a=this._spinner,v=a.element,center=this._center,centerElement=center.element,moveTarget=this._moveTarget,moveTarget==centerElement)this.raiseMoving(f,t)&&this.move(f,t);else if(moveTarget==v&&this._enableSpinner){var y=this._centerLocation,p=y.x,c=y.y,r;r=c>t?Math.atan((f-p)/(c-t)):Math.PI+Math.atan((p-f)/(t-c));r<=0&&(r+=2*Math.PI);this._rotateProgressBar(r);this._rotateSpinner(r);e=Math.min(u(r,this._stepCount),this.get_enabledStepCount()-1);e!=this._moveStep&&(this._moveStep=e,this._moveStepAllowed=this.raiseStepChanging(e))}n.stopPropagation();n.preventDefault()};n._onMouseUp=function(){if(this._moving){var n=this._spinner,t=n.element,r=this._center,f=r.element,u=this._moveTarget;u==t&&(this._moveStep!=this._step&&this._moveStepAllowed?(this.set_step(this._moveStep),this.raiseStepChanged(this._moveStep)):this._refreshStep());document.body.removeChild(this._overlay);this._overlay=null;this._moving=!1;this._moveStep=0;Sys.UI.DomElement.removeCssClass(this._element,"moving");i(this._element,100);this.raiseMoved()}this._element.releaseCapture&&this._element.releaseCapture();$removeHandler(document,"mousemove",this._mouseMoveHandler);$removeHandler(document,"touchmove",this._mouseMoveHandler);$removeHandler(document,"mouseup",this._mouseUpHandler);$removeHandler(document,"touchend",this._mouseUpHandler);this._moveTarget=null};n._onMouseOver=function(){this._mouseOver||this._overlay!=null||(this._mouseOver=!0,Sys.UI.DomElement.addCssClass(this._element,"hover"),this.refresh());this._mouseOutTimeout&&(clearTimeout(this._mouseOutTimeout),this._mouseOutTimeout=null)};n._onMouseOut=function(){this._mouseOutTimeout&&(clearTimeout(this._mouseOutTimeout),this._mouseOutTimeout=null);this._mouseOutTimeout=setTimeout(this._mouseOutTimeoutHandler,0)};n._onMouseOutTimeout=function(){this._mouseOver&&(this._mouseOver=!1,Sys.UI.DomElement.removeCssClass(this._element,"hover"),this.refresh(),this.raiseUnfocused());this._mouseOutTimeout=null};n._opacityStartAnimation=function(){this._opacityValue=100;i(this._element,this._opacityValue);this._opacityAnimate()};n._opacityAnimate=function(){if(!this._mouseOver&&!this._moving&&this._opacityValue>85)if(this._opacityAnimationSpeed>0){this._opacityValue--;i(this._element,this._opacityValue);var n=this;setTimeout(function(){n._opacityAnimate()},this._opacityAnimationSpeed)}else this._opacityValue=85,i(this._element,this._opacityValue)};n._onSelectStart=function(n){n.stopPropagation();n.preventDefault()};n.reduceOpacity=function(){this._opacityStartAnimation()};var i=function(n,t){n.style.opacity=(t/100).toString();n.style.filter="alpha(opacity="+t+")"},r=function(n,t){return 2*Math.PI*(n+1)/t},u=function(n,t){return Math.max(0,Math.round(t*n/(2*Math.PI))-1)},s=function(){return e(arguments[arguments.length-1])},e=function(n){return n.disabled?!1:n.onclick?!!n.onclick(n):!1},o=function(n){var t,i,r;return n.type.startsWith("touch")?(r=n.rawEvent.touches[0],t=r.clientX,i=r.clientY):(t=n.clientX,i=n.clientY),new Sys.UI.Point(t+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft),i+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop))},f=function(n,t){for(var i=n,r=document.body;i&&i!=r;i=i.parentNode)if(i==t)return!0;return!1},h=function(){var n=document.createElement("div");return n.className="overlay",n.unselectable="on",n};Assima.Controls.Wheel=t;t.registerClass("Assima.Controls.Wheel",Sys.UI.Control)}(),function(){function n(t){n.initializeBase(this);t==null&&(t={});this.className=t.className||"";this.disabled=t.disabled!=null?t.disabled:!1;this.onclick=t.onclick||null;this.pushed=t.pushed!=null?t.pushed:!1;this.text=t.text||"";this.toolTip=t.toolTip||""}Assima.Controls.WheelButton=n;n.registerClass("Assima.Controls.WheelButton")}(),function(){function n(t){n.initializeBase(this);this.collapsed=t}Assima.Controls.ExpandCollapseEventArgs=n;n.registerClass("Assima.Controls.ExpandCollapseEventArgs",Sys.EventArgs)}();Type.registerNamespace("Assima.Controls"),function(){function t(n){t.initializeBase(this,[n]);this._progress={element:n,bar:{element:null},level:{element:null},loading:{element:null},numbers:{element:null},tooltip:{element:null}};this._slider={element:null};this._step=0;this._stepCount=0;this._enabledStepCount=null;this._loadedStepCount=null;this._moveTarget=null;this._moveOrigin=null;this._moveStep=0;this._moveStepAllowed=!0;this._moving=!1;this._showSlider=!0;this._enableSlider=!0;this._isMinimal=!1;this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._mouseDownHandler=Function.createDelegate(this,this._onMouseDown);this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._selectStartHandler=Function.createDelegate(this,this._onSelectStart)}var n=t.prototype;n.get_showSlider=function(){return this._showSpinner};n.set_showSlider=function(n){this._showSlider!==n&&(this._showSlider=n,this._initialized&&this._refreshSlider(),this.raisePropertyChanged("showSlider"))};n.get_enableSlider=function(){return this._enableSlider};n.set_enableSlider=function(n){this._enableSlider!==n&&(this._enableSlider=n,this._initialized&&this._refreshSlider(),this.raisePropertyChanged("enableSlider"))};n.get_step=function(){return this._step};n.set_step=function(n){this._step!==n&&(this._step=n,this._initialized&&this._refreshStep(),this.raisePropertyChanged("step"))};n.get_stepCount=function(){return this._stepCount};n.set_stepCount=function(n){this._stepCount!==n&&(this._stepCount=n,this._step=Math.min(this._step,n-1),this._initialized&&(this._refreshProgressBar(),this._refreshSlider()),this.raisePropertyChanged("stepCount"))};n.get_enabledStepCount=function(){return this._enabledStepCount!=null?this._enabledStepCount:this._stepCount};n.set_enabledStepCount=function(n){this._enabledStepCount!==n&&(this._enabledStepCount=Math.min(n,this._stepCount),this._initialized&&(this._refreshProgressBar(),this._refreshSlider()),this.raisePropertyChanged("enabledStepCount"))};n.get_loadedStepCount=function(){return this._loadedStepCount!=null?this._loadedStepCount:this._stepCount};n.set_loadedStepCount=function(n){this._loadedStepCount!==n&&(this._loadedStepCount=Math.min(n,this._stepCount),this._initialized&&this._refreshProgressBar(),this.raisePropertyChanged("loadedStepCount"))};n.set_isMinimal=function(n){this._isMinimal!==n&&(this._isMinimal=n,this.raisePropertyChanged("isMinimal"))};n.add_stepChanging=function(n){this.get_events().addHandler("stepChanging",n)};n.remove_stepChanging=function(n){this.get_events().removeHandler("stepChanging",n)};n.raiseStepChanging=function(n){var i=this.get_events().getHandler("stepChanging"),t;return i?(t=new Assima.Controls.StepCancelEventArgs(n),i(this,t),!t.get_cancel()):!0};n.add_stepChanged=function(n){this.get_events().addHandler("stepChanged",n)};n.remove_stepChanged=function(n){this.get_events().removeHandler("stepChanged",n)};n.raiseStepChanged=function(n){var t=this.get_events().getHandler("stepChanged");t&&t(this,new Assima.Controls.StepEventArgs(n))};n.initialize=function(){var n=this._element;n.unselectable="on";$addHandler(n,"mousedown",this._mouseDownHandler);$addHandler(n,"touchstart",this._mouseDownHandler);$addHandler(n,"dragStart",this._dragStartHandler);$addHandler(n,"selectstart",this._selectStartHandler);this._initializeProgressBar();this._initializeSlider();this.refresh();t.callBaseMethod(this,"initialize")};n._initializeProgressBar=function(){var f=this._element,n=this._progress,h=n.bar,t=h.element=document.createElement("div"),e,i,o,r,s,u;t.className="bar";f.appendChild(t);e=n.level;i=e.element=document.createElement("span");i.className="level";t.appendChild(i);o=n.loading;r=o.element=document.createElement("span");r.className="loading";t.appendChild(r);s=n.numbers;u=s.element=document.createElement("ol");u.className="numbers";f.appendChild(u)};n._initializeSlider=function(){var u=this._element,t=this._slider,n=t.element=document.createElement("div"),i,r;n.className="slider";n.style.display="none";i=document.createElement("span");i.className="screentext";i.innerText=String.format(this._isMinimal?"{0}":"Screen {0}",1);n.screentext=n.appendChild(i);u.appendChild(n);r=document.createElement("div");r.className="tooltip";r.style.display="none";t.tooltipElement=n.appendChild(r);n.style.marginLeft=this._isMinimal?"":Math.round(-n.offsetWidth/2)+"px";t.tooltipElement.style.left=-Math.round(t.tooltipElement.offsetWidth/2)+"px"};n.refresh=function(){this._refreshProgressBar();this._refreshSlider()};n._refreshStep=function(){var n=u(this._step,this._stepCount);this._updateProgressBarLevel(n);this._moveSlider(n)};n._refreshProgressBar=function(){for(var i,r,o=this._step,t=this._stepCount,s=this.get_enabledStepCount(),h=this._progress,c=h.numbers,u=c.element,l=this._element.offsetWidth,a=this._progress.bar.element.offsetHeight*2,v=Math.floor(l/a),f=Math.floor(t/v)+1,y=(t-1)%f,e=document.createDocumentFragment(),n=0;n<t;n++)n>0&&n%f!=y||(i=document.createElement("li"),r=["number"],n>=s&&r.push("disabled"),n==0?r.push("first"):n==t-1&&r.push("last"),i.className=r.join(" "),i.style.left=n*100/(t-1)+"%",i.innerText=n+1,e.appendChild(i));u.innerHTML="";u.appendChild(e);this._updateProgressBarLevel(o/(t-1))};n._updateProgressBarLevel=function(n){var t=this._stepCount,f=this.get_enabledStepCount(),i=this.get_loadedStepCount(),e=(f-1)/(t-1),o=(i-1)/(t-1),r=Math.min(e,o,n),u;this._progress.level.element.style.width=u=r*100+"%";i<t&&n>r?(this._progress.loading.element.style.left=u,this._progress.loading.element.style.right=(1-n)*this._element.offsetWidth+"px"):(this._progress.loading.element.style.left="",this._progress.loading.element.style.right="")};n._refreshSlider=function(){var n=this._showSlider,t=this._slider,i=t.element,r=i.style;r.display=n?"":"none";this._moveSlider(this._step/(this._stepCount-1))};n._moveSlider=function(n){if(this._showSlider){var u=this._slider,t=u.element,f=this._stepCount,e=this.get_enabledStepCount(),r=i(n,f);t.style.left=Math.round(n*this._element.offsetWidth)+"px";!this._enableSlider||r>=e?Sys.UI.DomElement.addCssClass(t,"disabled"):Sys.UI.DomElement.removeCssClass(t,"disabled");t.screentext.innerText=String.format(this._isMinimal?"{0}":"Screen {0}",r+1);this._isMinimal&&this._moving&&(this._slider.tooltipElement.innerText=String.format("Screen {0}",r+1),this._slider.tooltipElement.style.display="",this._slider.tooltipElement.style.left=-Math.round(this._slider.tooltipElement.offsetWidth/2)+"px");t.style.marginLeft=this._isMinimal?"":Math.round(-t.offsetWidth/2)+"px"}};n._onDragStart=function(n){n.stopPropagation();n.preventDefault()};n._onMouseDown=function(n){var u=this._slider,t=u.element,i=f(n.target,t)&&t;i&&($addHandler(document,"mousemove",this._mouseMoveHandler),$addHandler(document,"touchmove",this._mouseMoveHandler),$addHandler(document,"mouseup",this._mouseUpHandler),$addHandler(document,"touchend",this._mouseUpHandler),this._moving=!1,this._moveOrigin=r(n),this._moveTarget=i,this._element.setCapture&&this._element.setCapture(),n.type=="mousedown"&&n.preventDefault());n.stopPropagation()};n._onMouseMove=function(n){var h=r(n),s=h.x,c=this._moveOrigin,l=c.x-s,a=this._slider,v=a.element,u,t,f,o;if(!this._moving){if(Math.max(Math.abs(l))<5)return;this._moving=!0;this._moveStep=this._step;this._overlay=e();document.body.appendChild(this._overlay)}this._moveTarget==v&&this._enableSlider&&(u=this._element.offsetWidth,u>0&&(t=s-this._element.offsetLeft,t<0?t=0:t>u&&(t=u),f=t/u,this._updateProgressBarLevel(f),this._moveSlider(f),o=Math.min(i(f,this._stepCount),this.get_enabledStepCount()-1),o!=this._moveStep&&(this._moveStep=o,this._moveStepAllowed=this.raiseStepChanging(o))));n.stopPropagation();n.preventDefault()};n._onMouseUp=function(){if(this._moving){var n=this._slider,t=n.element,i=this._moveTarget;i==t&&(this._moveStep!=this._step&&this._moveStepAllowed?(this.set_step(this._moveStep),this.raiseStepChanged(this._moveStep)):this._refreshStep());document.body.removeChild(this._overlay);this._overlay=null;this._moving=!1;this._moveStep=0;this._slider.tooltipElement.style.display="none";Sys.UI.DomElement.removeCssClass(this._element,"moving")}this._element.releaseCapture&&this._element.releaseCapture();$removeHandler(document,"mousemove",this._mouseMoveHandler);$removeHandler(document,"touchmove",this._mouseMoveHandler);$removeHandler(document,"mouseup",this._mouseUpHandler);$removeHandler(document,"touchend",this._mouseUpHandler);this._moveTarget=null};n._onSelectStart=function(n){n.stopPropagation();n.preventDefault()};var u=function(n,t){return t==0?0:n/(t-1)},i=function(n,t){return Math.max(0,Math.round(n*(t-1)))},r=function(n){var t,i,r;return n.type.startsWith("touch")?(r=n.rawEvent.touches[0],t=r.clientX,i=r.clientY):(t=n.clientX,i=n.clientY),new Sys.UI.Point(t+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft),i+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop))},f=function(n,t){for(var i=n,r=document.body;i&&i!=r;i=i.parentNode)if(i==t)return!0;return!1},e=function(){var n=document.createElement("div");return n.className="overlay",n.unselectable="on",n};Assima.Controls.Progressbar=t;t.registerClass("Assima.Controls.Progressbar",Sys.UI.Control)}(),function(){function n(t){n.initializeBase(this);this.step=t}Assima.Controls.StepEventArgs=n;n.registerClass("Assima.Controls.StepEventArgs",Sys.EventArgs)}(),function(){function n(t){n.initializeBase(this);this.step=t}Assima.Controls.StepCancelEventArgs=n;n.registerClass("Assima.Controls.StepCancelEventArgs",Sys.CancelEventArgs)}(),function(){function n(t,i){n.initializeBase(this);this.x=t;this.y=i}Assima.Controls.MoveEventArgs=n;n.registerClass("Assima.Controls.MoveEventArgs",Sys.EventArgs)}(),function(){function n(t,i){n.initializeBase(this);this.x=t;this.y=i}Assima.Controls.MoveCancelEventArgs=n;n.registerClass("Assima.Controls.MoveCancelEventArgs",Sys.CancelEventArgs)}();Type.registerNamespace("Assima.Controls"),function(){function t(n){t.initializeBase(this,[n]);this._editableItems=[];this._frames={}}var n=t.prototype;n.get_editableItems=function(){return this._editableItems};n.set_editableItems=function(n){if(this._editableItems!==n){this._editableItems=n;for(var t=this._element;t.firstChild;)t.removeChild(t.firstChild);this._frames={};this.raisePropertyChanged("editableItems")}};n.initialize=function(){t.callBaseMethod(this,"initialize")};n.show=function(){this._element.style.display="";this.refresh()};n.hide=function(){this._element.style.display="none"};n.refresh=function(){for(var n=0,t=this._editableItems.length;n<t;++n)this.refreshItem(this._editableItems[n])};n.refreshItem=function(n){var i=n.rect,f,t,r,s,e,o,u;if(i){if(f=!this._frames[n._id],t=f?document.createElement("div"):this._frames[n._id],t.style.left=i.left+"px",t.style.top=i.top+"px",t.style.width=i.right-i.left+"px",t.style.height=i.bottom-i.top+"px",f){if(t.className="frame "+n.extraClassName+(n.isLayer?" layer":""),r=$create(Assima.Controls.ElementMoving,{},null,null,t),r.add_startMoving(Function.createDelegate(this,Function.createCallback(this._startMovingItem,n))),r.add_elementMoved(Function.createDelegate(this,Function.createCallback(this._moveItem,n))),r.add_endMoving(Function.createDelegate(this,Function.createCallback(this._endMovingItem,n))),n.onResize)for(s=function(i){var r=document.createElement("div");r.className="grip "+i+" "+n.extraClassName;r.direction=i;t.appendChild(r)},e=["nw","n","ne","e","se","s","sw","w"],o=e.length;o--;)s(e[o]);u=document.createElement("div");u.className="rectinfo";u.style.display="none";t.rectInfo=t.appendChild(u);this._element.appendChild(t);this._frames[n._id]=t}n.isLayer&&this._refreshItemBordersAndGrips(n,t)}};n._refreshItemBordersAndGrips=function(n,t){for(var u,g,w,r,a,v,l,b=t.getElementsByClassName("border"),y=t.getElementsByClassName("grip"),s=b.length;s--;)t.removeChild(b[s]);var p=this._editableItems,i=n.rect,f=n.rectBoundaries,e={c1:i.left,c2:i.right},h={c1:i.top,c2:i.bottom},o={c1:i.left,c2:i.right},c={c1:i.top,c2:i.bottom},k=this,d=function(n,t){for(var u=[],f=y.length;f--;){var i=y[f],r=Sys.UI.DomElement.getLocation(i),e={left:r.x,top:r.y,right:r.x+i.offsetWidth,bottom:r.y+i.offsetHeight};(t?k._areRectanglesOverlapping(e,n):!k._areRectanglesOverlapping(e,n))?i.style.visibility="hidden":(i.style.visibility="visible",u.push(i))}y=u};for(f&&(i.top>f.bottom||i.bottom<f.top||i.left>f.right||i.right<f.left?e=o=c=h=null:(i.top<f.top&&(e=null,c.c1=h.c1=f.top),i.bottom>f.bottom&&(o=null,c.c2=h.c2=f.bottom),i.left<f.left&&(c=null,e&&(e.c1=f.left),o.c1&&(o.c1=f.left)),i.right>f.right&&(h=null,e&&(e.c2=f.right),o&&(o.c2=f.right))),d(f,!1)),u={top:e?[e]:[],right:h?[h]:[],bottom:o?[o]:[],left:c?[c]:[]},s=Array.indexOf(p,n)+1,g=p.length;s<g;++s)(w=p[s],w.isLayer)&&(r=w.rect,u.top.length&&(a=r.top<=i.top&&r.bottom>=i.top,a&&(u.top=this._getVisibleBorders(u.top,r.left,r.right))),u.bottom.length&&(a=r.top<=i.bottom&&r.bottom>=i.bottom,a&&(u.bottom=this._getVisibleBorders(u.bottom,r.left,r.right))),u.left.length&&(v=r.left<=i.left&&r.right>=i.left,v&&(u.left=this._getVisibleBorders(u.left,r.top,r.bottom))),u.right.length&&(v=r.left<=i.right&&r.right>=i.right,v&&(u.right=this._getVisibleBorders(u.right,r.top,r.bottom))),d(r,!0));l=function(r,u,f,e,o){for(var h,s,c=r.length;c--;)h=r[c],s=document.createElement("div"),s.className="border "+u+(n.onResize?" resizable":""),s.direction=o,u=="top"||u=="bottom"?(s.style.left=Math.round(h.c1-i.left)+"px",s.style.width=Math.round(h.c2-h.c1)+"px",s.style.top=f,s.style.bottom=e):(s.style.top=Math.round(h.c1-i.top)+"px",s.style.height=Math.round(h.c2-h.c1)+"px",s.style.left=f,s.style.right=e),t.appendChild(s)};l(u.top,"top",0,"","n");l(u.bottom,"bottom","",0,"s");l(u.left,"left",0,"","w");l(u.right,"right","",0,"e")};n._getVisibleBorders=function(n,t,i){for(var r,s,f,e,u=[],o=n.length;o--;)r=n[o],s=r.c1<=t?r.c2>=t:i>=r.c1,s?r.c1<=t?(f=Math.min(r.c2,t),f>r.c1&&u.push({c1:r.c1,c2:f}),i<r.c2&&u.push({c1:i,c2:r.c2})):(e=Math.min(i,r.c2),e<r.c2&&u.push({c1:e,c2:r.c2})):u.push(r);return u};n._areRectanglesOverlapping=function(n,t){var i=n.left<t.left?n.right>=t.left:t.right>=n.left,r=n.top<t.top?n.bottom>=t.top:t.bottom>=n.top;return i&&r};n._startMovingItem=function(n,t,i){if(this._movingElement=t.target,i.onStartMoving)i.onStartMoving(this,t,i);if(i.realRect){var r=null;Sys.UI.DomElement.containsCssClass(this._movingElement,"border")||Sys.UI.DomElement.containsCssClass(this._movingElement,"grip")?i.onResize&&(r=this._refreshRectangleInfo(i,!0)):i.onMove&&(r=this._refreshRectangleInfo(i,!1));r&&(r.style.display="")}};n._moveItem=function(n,t,i){var r;Sys.UI.DomElement.containsCssClass(this._movingElement,"border")||Sys.UI.DomElement.containsCssClass(this._movingElement,"grip")?i.onResize&&(r=i.onResize(this,t,this._movingElement.direction,i),r&&(i.rect=r,this.refresh(),this._refreshRectangleInfo(i,!0))):i.onMove&&(r=i.onMove(this,t,i),r&&(i.rect=r,this.refresh(),this._refreshRectangleInfo(i,!1)))};n._endMovingItem=function(n,t,i){if(i.onEndMoving)i.onEndMoving(this,i);var r=this._getRectangleInfoElement(i);r&&(r.style.display="none")};n._getRectangleInfoElement=function(n){var t=this._frames[n._id];return t?t.rectInfo:null};n._refreshRectangleInfo=function(n,t){var r=this._getRectangleInfoElement(n),i,u;return r?(i=n.realRect,!i)?void 0:(u="",u=t?String.format("{0} x {1}",Math.round(i.right-i.left),Math.round(i.bottom-i.top)):String.format("({0}, {1})",Math.round(i.left),Math.round(i.top)),r.innerText=u,r):null};Assima.Controls.Editor=t;t.registerClass("Assima.Controls.Editor",Sys.UI.Control)}(),function(){function n(i){n.initializeBase(this);i==null&&(i={});this._id=t++;this.type=i.type||"";this.targetElement=i.targetElement||null;this.rect=i.rect||null;this.realRect=i.realRect||null;this.rectBoundaries=i.rectBoundaries||null;this.onStartMoving=i.onStartMoving||null;this.onMove=i.onMove||null;this.onEndMoving=i.onEndMoving||null;this.onResize=i.onResize||null;this.extraData=i.extraData||null;this.extraClassName=i.extraClassName||"";this.isLayer=i.isLayer||!1}var t=0;Assima.Controls.EditableItem=n;n.registerClass("Assima.Controls.EditableItem")}();Type.registerNamespace("Assima.Controls"),function(){function t(n){t.initializeBase(this,[n]);this._scrollers={};this._checkVertival=!0;this._checkHorizontal=!0;this._scrollersContainer=null;this._clickHandler=Function.createDelegate(this,this._onClick);this._scrollHandler=Function.createDelegate(this,this._onScroll)}var n=t.prototype;n.get_checkVertical=function(){return this._checkVertival};n.set_checkVertical=function(n){this._checkVertival!==n&&(this._checkVertival=n,this.raisePropertyChanged("checkVertical"))};n.get_checkHorizontal=function(){return this._checkVertival};n.set_checkHorizontal=function(n){this._checkHorizontal!==n&&(this._checkHorizontal=n,this.raisePropertyChanged("checkHorizontal"))};n.get_scrollersContainer=function(){return this._scrollersContainer||this._element};n.set_scrollersContainer=function(n){this._scrollersContainer!==n&&(this._scrollersContainer=n,this.raisePropertyChanged("scrollersContainer"))};n.initialize=function(){t.callBaseMethod(this,"initialize");$addHandler(this._element,"scroll",this._scrollHandler);this._clickHandler=Function.createDelegate(this,this._onClick)};n.refresh=function(){var n=this._scrollers,t=this._element,i;this._checkHorizontal&&(i=t.scrollWidth-t.clientWidth,n.left=this._refreshScroller(n.left,i>0&&t.scrollLeft>0,"left"),n.right=this._refreshScroller(n.right,i>0&&t.scrollLeft<i,"right"));this._checkVertical&&(i=t.scrollHeight-t.clientHeight,n.top=this._refreshScroller(n.top,i>0&&t.scrollTop>0,"top"),n.bottom=this._refreshScroller(n.bottom,i>0&&t.scrollTop<i,"bottom"))};n._refreshScroller=function(n,t,i){var r=this.get_scrollersContainer();return t?n||(n=r.appendChild(this._createScroller(i))):n&&(r.removeChild(n),$removeHandler(n,"click",this._clickHandler),n=null),n};n._createScroller=function(n){var t=document.createElement("a");return t.href="#",t.className="scroll_extender_scroller "+n,t.direction=n,$addHandler(t,"click",this._clickHandler),t};n._onClick=function(n){var r=n.target,t=this._element,i={direction:r.direction};switch(r.direction){case"left":i.finalValue=Math.max(0,t.scrollLeft-.8*t.clientWidth);i.scrollPx=t.scrollLeft-i.finalValue;break;case"right":i.finalValue=Math.min(t.scrollWidth-t.clientWidth,t.scrollLeft+.8*t.clientWidth);i.scrollPx=i.finalValue-t.scrollLeft;break;case"top":i.scrollPx=t.scrollTop-Math.max(0,t.scrollTop-.8*t.clientHeight);break;case"bottom":i.scrollPx=Math.min(t.scrollHeight-t.clientHeight,t.scrollTop+.8*t.clientHeight)-t.scrollTop}this._startScrollAnimation(i);n.preventDefault();n.stopPropagation()};n._onScroll=function(){this.refresh()};n._startScrollAnimation=function(n){var t=this._element,i,r;n.scrollPx/=2;i=!0;switch(n.direction){case"left":t.scrollLeft-=n.scrollPx;n.scrollPx<1&&(t.scrollLeft=n.finalValue,i=!1);break;case"right":t.scrollLeft+=n.scrollPx;n.scrollPx<1&&(t.scrollLeft=n.finalValue,i=!1);break;case"top":t.scrollTop-=n.scrollPx;n.scrollPx<1&&(t.scrollTop=n.finalValue,i=!1);break;case"bottom":t.scrollTop+=n.scrollPx;n.scrollPx<1&&(t.scrollTop=n.finalValue,i=!1)}i?(r=this,setTimeout(function(){r._startScrollAnimation(n)},40)):this.refresh()};n.dispose=function(){delete this._clickHandler;delete this._scrollHandler;t.callBaseMethod(this,"dispose")};Assima.Controls.ScrollExtender=t;t.registerClass("Assima.Controls.ScrollExtender",Sys.UI.Behavior)}()